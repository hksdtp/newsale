(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(c){if(c.ep)return;c.ep=!0;const u=n(c);fetch(c.href,u)}})();function Ug(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function av(l){if(Object.prototype.hasOwnProperty.call(l,"__esModule"))return l;var a=l.default;if(typeof a=="function"){var n=function i(){var c=!1;try{c=this instanceof i}catch{}return c?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};n.prototype=a.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(l).forEach(function(i){var c=Object.getOwnPropertyDescriptor(l,i);Object.defineProperty(n,i,c.get?c:{enumerable:!0,get:function(){return l[i]}})}),n}var Du={exports:{}},ll={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N0;function rv(){if(N0)return ll;N0=1;var l=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function n(i,c,u){var h=null;if(u!==void 0&&(h=""+u),c.key!==void 0&&(h=""+c.key),"key"in c){u={};for(var g in c)g!=="key"&&(u[g]=c[g])}else u=c;return c=u.ref,{$$typeof:l,type:i,key:h,ref:c!==void 0?c:null,props:u}}return ll.Fragment=a,ll.jsx=n,ll.jsxs=n,ll}var S0;function nv(){return S0||(S0=1,Du.exports=rv()),Du.exports}var s=nv(),Au={exports:{}},_e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _0;function lv(){if(_0)return _e;_0=1;var l=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.iterator;function j(T){return T===null||typeof T!="object"?null:(T=v&&T[v]||T["@@iterator"],typeof T=="function"?T:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,_={};function D(T,R,W){this.props=T,this.context=R,this.refs=_,this.updater=W||N}D.prototype.isReactComponent={},D.prototype.setState=function(T,R){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,R,"setState")},D.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function M(){}M.prototype=D.prototype;function E(T,R,W){this.props=T,this.context=R,this.refs=_,this.updater=W||N}var C=E.prototype=new M;C.constructor=E,S(C,D.prototype),C.isPureReactComponent=!0;var G=Array.isArray,z={H:null,A:null,T:null,S:null,V:null},H=Object.prototype.hasOwnProperty;function O(T,R,W,re,ue,me){return W=me.ref,{$$typeof:l,type:T,key:R,ref:W!==void 0?W:null,props:me}}function X(T,R){return O(T.type,R,void 0,void 0,void 0,T.props)}function ie(T){return typeof T=="object"&&T!==null&&T.$$typeof===l}function Q(T){var R={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(W){return R[W]})}var J=/\/+/g;function ne(T,R){return typeof T=="object"&&T!==null&&T.key!=null?Q(""+T.key):R.toString(36)}function je(){}function se(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(je,je):(T.status="pending",T.then(function(R){T.status==="pending"&&(T.status="fulfilled",T.value=R)},function(R){T.status==="pending"&&(T.status="rejected",T.reason=R)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function oe(T,R,W,re,ue){var me=typeof T;(me==="undefined"||me==="boolean")&&(T=null);var pe=!1;if(T===null)pe=!0;else switch(me){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(T.$$typeof){case l:case a:pe=!0;break;case p:return pe=T._init,oe(pe(T._payload),R,W,re,ue)}}if(pe)return ue=ue(T),pe=re===""?"."+ne(T,0):re,G(ue)?(W="",pe!=null&&(W=pe.replace(J,"$&/")+"/"),oe(ue,R,W,"",function(zt){return zt})):ue!=null&&(ie(ue)&&(ue=X(ue,W+(ue.key==null||T&&T.key===ue.key?"":(""+ue.key).replace(J,"$&/")+"/")+pe)),R.push(ue)),1;pe=0;var mt=re===""?".":re+":";if(G(T))for(var Be=0;Be<T.length;Be++)re=T[Be],me=mt+ne(re,Be),pe+=oe(re,R,W,me,ue);else if(Be=j(T),typeof Be=="function")for(T=Be.call(T),Be=0;!(re=T.next()).done;)re=re.value,me=mt+ne(re,Be++),pe+=oe(re,R,W,me,ue);else if(me==="object"){if(typeof T.then=="function")return oe(se(T),R,W,re,ue);throw R=String(T),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.")}return pe}function L(T,R,W){if(T==null)return T;var re=[],ue=0;return oe(T,re,"","",function(me){return R.call(W,me,ue++)}),re}function I(T){if(T._status===-1){var R=T._result;R=R(),R.then(function(W){(T._status===0||T._status===-1)&&(T._status=1,T._result=W)},function(W){(T._status===0||T._status===-1)&&(T._status=2,T._result=W)}),T._status===-1&&(T._status=0,T._result=R)}if(T._status===1)return T._result.default;throw T._result}var ae=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var R=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(R))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function ve(){}return _e.Children={map:L,forEach:function(T,R,W){L(T,function(){R.apply(this,arguments)},W)},count:function(T){var R=0;return L(T,function(){R++}),R},toArray:function(T){return L(T,function(R){return R})||[]},only:function(T){if(!ie(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},_e.Component=D,_e.Fragment=n,_e.Profiler=c,_e.PureComponent=E,_e.StrictMode=i,_e.Suspense=m,_e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,_e.__COMPILER_RUNTIME={__proto__:null,c:function(T){return z.H.useMemoCache(T)}},_e.cache=function(T){return function(){return T.apply(null,arguments)}},_e.cloneElement=function(T,R,W){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var re=S({},T.props),ue=T.key,me=void 0;if(R!=null)for(pe in R.ref!==void 0&&(me=void 0),R.key!==void 0&&(ue=""+R.key),R)!H.call(R,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&R.ref===void 0||(re[pe]=R[pe]);var pe=arguments.length-2;if(pe===1)re.children=W;else if(1<pe){for(var mt=Array(pe),Be=0;Be<pe;Be++)mt[Be]=arguments[Be+2];re.children=mt}return O(T.type,ue,void 0,void 0,me,re)},_e.createContext=function(T){return T={$$typeof:h,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:u,_context:T},T},_e.createElement=function(T,R,W){var re,ue={},me=null;if(R!=null)for(re in R.key!==void 0&&(me=""+R.key),R)H.call(R,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(ue[re]=R[re]);var pe=arguments.length-2;if(pe===1)ue.children=W;else if(1<pe){for(var mt=Array(pe),Be=0;Be<pe;Be++)mt[Be]=arguments[Be+2];ue.children=mt}if(T&&T.defaultProps)for(re in pe=T.defaultProps,pe)ue[re]===void 0&&(ue[re]=pe[re]);return O(T,me,void 0,void 0,null,ue)},_e.createRef=function(){return{current:null}},_e.forwardRef=function(T){return{$$typeof:g,render:T}},_e.isValidElement=ie,_e.lazy=function(T){return{$$typeof:p,_payload:{_status:-1,_result:T},_init:I}},_e.memo=function(T,R){return{$$typeof:x,type:T,compare:R===void 0?null:R}},_e.startTransition=function(T){var R=z.T,W={};z.T=W;try{var re=T(),ue=z.S;ue!==null&&ue(W,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(ve,ae)}catch(me){ae(me)}finally{z.T=R}},_e.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},_e.use=function(T){return z.H.use(T)},_e.useActionState=function(T,R,W){return z.H.useActionState(T,R,W)},_e.useCallback=function(T,R){return z.H.useCallback(T,R)},_e.useContext=function(T){return z.H.useContext(T)},_e.useDebugValue=function(){},_e.useDeferredValue=function(T,R){return z.H.useDeferredValue(T,R)},_e.useEffect=function(T,R,W){var re=z.H;if(typeof W=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(T,R)},_e.useId=function(){return z.H.useId()},_e.useImperativeHandle=function(T,R,W){return z.H.useImperativeHandle(T,R,W)},_e.useInsertionEffect=function(T,R){return z.H.useInsertionEffect(T,R)},_e.useLayoutEffect=function(T,R){return z.H.useLayoutEffect(T,R)},_e.useMemo=function(T,R){return z.H.useMemo(T,R)},_e.useOptimistic=function(T,R){return z.H.useOptimistic(T,R)},_e.useReducer=function(T,R,W){return z.H.useReducer(T,R,W)},_e.useRef=function(T){return z.H.useRef(T)},_e.useState=function(T){return z.H.useState(T)},_e.useSyncExternalStore=function(T,R,W){return z.H.useSyncExternalStore(T,R,W)},_e.useTransition=function(){return z.H.useTransition()},_e.version="19.1.0",_e}var k0;function fd(){return k0||(k0=1,Au.exports=lv()),Au.exports}var b=fd();const Wr=Ug(b);var Mu={exports:{}},il={},Ou={exports:{}},Ru={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T0;function iv(){return T0||(T0=1,function(l){function a(L,I){var ae=L.length;L.push(I);e:for(;0<ae;){var ve=ae-1>>>1,T=L[ve];if(0<c(T,I))L[ve]=I,L[ae]=T,ae=ve;else break e}}function n(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var I=L[0],ae=L.pop();if(ae!==I){L[0]=ae;e:for(var ve=0,T=L.length,R=T>>>1;ve<R;){var W=2*(ve+1)-1,re=L[W],ue=W+1,me=L[ue];if(0>c(re,ae))ue<T&&0>c(me,re)?(L[ve]=me,L[ue]=ae,ve=ue):(L[ve]=re,L[W]=ae,ve=W);else if(ue<T&&0>c(me,ae))L[ve]=me,L[ue]=ae,ve=ue;else break e}}return I}function c(L,I){var ae=L.sortIndex-I.sortIndex;return ae!==0?ae:L.id-I.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;l.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();l.unstable_now=function(){return h.now()-g}}var m=[],x=[],p=1,v=null,j=3,N=!1,S=!1,_=!1,D=!1,M=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function G(L){for(var I=n(x);I!==null;){if(I.callback===null)i(x);else if(I.startTime<=L)i(x),I.sortIndex=I.expirationTime,a(m,I);else break;I=n(x)}}function z(L){if(_=!1,G(L),!S)if(n(m)!==null)S=!0,H||(H=!0,ne());else{var I=n(x);I!==null&&oe(z,I.startTime-L)}}var H=!1,O=-1,X=5,ie=-1;function Q(){return D?!0:!(l.unstable_now()-ie<X)}function J(){if(D=!1,H){var L=l.unstable_now();ie=L;var I=!0;try{e:{S=!1,_&&(_=!1,E(O),O=-1),N=!0;var ae=j;try{t:{for(G(L),v=n(m);v!==null&&!(v.expirationTime>L&&Q());){var ve=v.callback;if(typeof ve=="function"){v.callback=null,j=v.priorityLevel;var T=ve(v.expirationTime<=L);if(L=l.unstable_now(),typeof T=="function"){v.callback=T,G(L),I=!0;break t}v===n(m)&&i(m),G(L)}else i(m);v=n(m)}if(v!==null)I=!0;else{var R=n(x);R!==null&&oe(z,R.startTime-L),I=!1}}break e}finally{v=null,j=ae,N=!1}I=void 0}}finally{I?ne():H=!1}}}var ne;if(typeof C=="function")ne=function(){C(J)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,se=je.port2;je.port1.onmessage=J,ne=function(){se.postMessage(null)}}else ne=function(){M(J,0)};function oe(L,I){O=M(function(){L(l.unstable_now())},I)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(L){L.callback=null},l.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<L?Math.floor(1e3/L):5},l.unstable_getCurrentPriorityLevel=function(){return j},l.unstable_next=function(L){switch(j){case 1:case 2:case 3:var I=3;break;default:I=j}var ae=j;j=I;try{return L()}finally{j=ae}},l.unstable_requestPaint=function(){D=!0},l.unstable_runWithPriority=function(L,I){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var ae=j;j=L;try{return I()}finally{j=ae}},l.unstable_scheduleCallback=function(L,I,ae){var ve=l.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?ve+ae:ve):ae=ve,L){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=ae+T,L={id:p++,callback:I,priorityLevel:L,startTime:ae,expirationTime:T,sortIndex:-1},ae>ve?(L.sortIndex=ae,a(x,L),n(m)===null&&L===n(x)&&(_?(E(O),O=-1):_=!0,oe(z,ae-ve))):(L.sortIndex=T,a(m,L),S||N||(S=!0,H||(H=!0,ne()))),L},l.unstable_shouldYield=Q,l.unstable_wrapCallback=function(L){var I=j;return function(){var ae=j;j=I;try{return L.apply(this,arguments)}finally{j=ae}}}}(Ru)),Ru}var E0;function ov(){return E0||(E0=1,Ou.exports=iv()),Ou.exports}var Uu={exports:{}},bt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C0;function cv(){if(C0)return bt;C0=1;var l=fd();function a(m){var x="https://react.dev/errors/"+m;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)x+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+m+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(a(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(m,x,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:v==null?null:""+v,children:m,containerInfo:x,implementation:p}}var h=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(m,x){if(m==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return bt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,bt.createPortal=function(m,x){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(a(299));return u(m,x,null,p)},bt.flushSync=function(m){var x=h.T,p=i.p;try{if(h.T=null,i.p=2,m)return m()}finally{h.T=x,i.p=p,i.d.f()}},bt.preconnect=function(m,x){typeof m=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,i.d.C(m,x))},bt.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},bt.preinit=function(m,x){if(typeof m=="string"&&x&&typeof x.as=="string"){var p=x.as,v=g(p,x.crossOrigin),j=typeof x.integrity=="string"?x.integrity:void 0,N=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;p==="style"?i.d.S(m,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:v,integrity:j,fetchPriority:N}):p==="script"&&i.d.X(m,{crossOrigin:v,integrity:j,fetchPriority:N,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},bt.preinitModule=function(m,x){if(typeof m=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var p=g(x.as,x.crossOrigin);i.d.M(m,{crossOrigin:p,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&i.d.M(m)},bt.preload=function(m,x){if(typeof m=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var p=x.as,v=g(p,x.crossOrigin);i.d.L(m,p,{crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},bt.preloadModule=function(m,x){if(typeof m=="string")if(x){var p=g(x.as,x.crossOrigin);i.d.m(m,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:p,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else i.d.m(m)},bt.requestFormReset=function(m){i.d.r(m)},bt.unstable_batchedUpdates=function(m,x){return m(x)},bt.useFormState=function(m,x,p){return h.H.useFormState(m,x,p)},bt.useFormStatus=function(){return h.H.useHostTransitionStatus()},bt.version="19.1.0",bt}var D0;function Lg(){if(D0)return Uu.exports;D0=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(a){console.error(a)}}return l(),Uu.exports=cv(),Uu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A0;function uv(){if(A0)return il;A0=1;var l=ov(),a=fd(),n=Lg();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(i(188))}function m(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(i(188));return t!==e?null:e}for(var r=e,o=t;;){var d=r.return;if(d===null)break;var f=d.alternate;if(f===null){if(o=d.return,o!==null){r=o;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===r)return g(d),e;if(f===o)return g(d),t;f=f.sibling}throw Error(i(188))}if(r.return!==o.return)r=d,o=f;else{for(var y=!1,w=d.child;w;){if(w===r){y=!0,r=d,o=f;break}if(w===o){y=!0,o=d,r=f;break}w=w.sibling}if(!y){for(w=f.child;w;){if(w===r){y=!0,r=f,o=d;break}if(w===o){y=!0,o=f,r=d;break}w=w.sibling}if(!y)throw Error(i(189))}}if(r.alternate!==o)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?e:t}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=x(e),t!==null)return t;e=e.sibling}return null}var p=Object.assign,v=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),E=Symbol.for("react.consumer"),C=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),ie=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function ne(e){return e===null||typeof e!="object"?null:(e=J&&e[J]||e["@@iterator"],typeof e=="function"?e:null)}var je=Symbol.for("react.client.reference");function se(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===je?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case D:return"Profiler";case _:return"StrictMode";case z:return"Suspense";case H:return"SuspenseList";case ie:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case N:return"Portal";case C:return(e.displayName||"Context")+".Provider";case E:return(e._context.displayName||"Context")+".Consumer";case G:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case O:return t=e.displayName||null,t!==null?t:se(e.type)||"Memo";case X:t=e._payload,e=e._init;try{return se(e(t))}catch{}}return null}var oe=Array.isArray,L=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},ve=[],T=-1;function R(e){return{current:e}}function W(e){0>T||(e.current=ve[T],ve[T]=null,T--)}function re(e,t){T++,ve[T]=e.current,e.current=t}var ue=R(null),me=R(null),pe=R(null),mt=R(null);function Be(e,t){switch(re(pe,t),re(me,e),re(ue,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Zm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Zm(t),e=Jm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}W(ue),re(ue,e)}function zt(){W(ue),W(me),W(pe)}function Ja(e){e.memoizedState!==null&&re(mt,e);var t=ue.current,r=Jm(t,e.type);t!==r&&(re(me,e),re(ue,r))}function us(e){me.current===e&&(W(ue),W(me)),mt.current===e&&(W(mt),tl._currentValue=ae)}var F=Object.prototype.hasOwnProperty,de=l.unstable_scheduleCallback,Ee=l.unstable_cancelCallback,Ce=l.unstable_shouldYield,Re=l.unstable_requestPaint,tt=l.unstable_now,Wa=l.unstable_getCurrentPriorityLevel,ba=l.unstable_ImmediatePriority,er=l.unstable_UserBlockingPriority,wa=l.unstable_NormalPriority,yo=l.unstable_LowPriority,K=l.unstable_IdlePriority,le=l.log,ee=l.unstable_setDisableYieldValue,be=null,ce=null;function He(e){if(typeof le=="function"&&ee(e),ce&&typeof ce.setStrictMode=="function")try{ce.setStrictMode(be,e)}catch{}}var Ne=Math.clz32?Math.clz32:Gs,$t=Math.log,es=Math.LN2;function Gs(e){return e>>>=0,e===0?32:31-($t(e)/es|0)|0}var ja=256,Na=4194304;function Sa(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Al(e,t,r){var o=e.pendingLanes;if(o===0)return 0;var d=0,f=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var w=o&134217727;return w!==0?(o=w&~f,o!==0?d=Sa(o):(y&=w,y!==0?d=Sa(y):r||(r=w&~e,r!==0&&(d=Sa(r))))):(w=o&~f,w!==0?d=Sa(w):y!==0?d=Sa(y):r||(r=o&~e,r!==0&&(d=Sa(r)))),d===0?0:t!==0&&t!==d&&(t&f)===0&&(f=d&-d,r=t&-t,f>=r||f===32&&(r&4194048)!==0)?t:d}function un(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Gx(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Od(){var e=ja;return ja<<=1,(ja&4194048)===0&&(ja=256),e}function Rd(){var e=Na;return Na<<=1,(Na&62914560)===0&&(Na=4194304),e}function vo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function dn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ix(e,t,r,o,d,f){var y=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var w=e.entanglements,k=e.expirationTimes,q=e.hiddenUpdates;for(r=y&~r;0<r;){var V=31-Ne(r),Z=1<<V;w[V]=0,k[V]=-1;var $=q[V];if($!==null)for(q[V]=null,V=0;V<$.length;V++){var P=$[V];P!==null&&(P.lane&=-536870913)}r&=~Z}o!==0&&Ud(e,o,0),f!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=f&~(y&~t))}function Ud(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-Ne(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|r&4194090}function Ld(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var o=31-Ne(r),d=1<<o;d&t|e[o]&t&&(e[o]|=t),r&=~d}}function bo(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function wo(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Hd(){var e=I.p;return e!==0?e:(e=window.event,e===void 0?32:p0(e.type))}function Vx(e,t){var r=I.p;try{return I.p=e,t()}finally{I.p=r}}var Is=Math.random().toString(36).slice(2),yt="__reactFiber$"+Is,_t="__reactProps$"+Is,tr="__reactContainer$"+Is,jo="__reactEvents$"+Is,Qx="__reactListeners$"+Is,Yx="__reactHandles$"+Is,Bd="__reactResources$"+Is,hn="__reactMarker$"+Is;function No(e){delete e[yt],delete e[_t],delete e[jo],delete e[Qx],delete e[Yx]}function sr(e){var t=e[yt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[tr]||r[yt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=s0(e);e!==null;){if(r=e[yt])return r;e=s0(e)}return t}e=r,r=e.parentNode}return null}function ar(e){if(e=e[yt]||e[tr]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function fn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function rr(e){var t=e[Bd];return t||(t=e[Bd]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ot(e){e[hn]=!0}var qd=new Set,zd={};function _a(e,t){nr(e,t),nr(e+"Capture",t)}function nr(e,t){for(zd[e]=t,e=0;e<t.length;e++)qd.add(t[e])}var Fx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$d={},Pd={};function Xx(e){return F.call(Pd,e)?!0:F.call($d,e)?!1:Fx.test(e)?Pd[e]=!0:($d[e]=!0,!1)}function Ml(e,t,r){if(Xx(t))if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+r)}}function Ol(e,t,r){if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+r)}}function js(e,t,r,o){if(o===null)e.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(t,r,""+o)}}var So,Kd;function lr(e){if(So===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);So=t&&t[1]||"",Kd=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+So+e+Kd}var _o=!1;function ko(e,t){if(!e||_o)return"";_o=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(P){var $=P}Reflect.construct(e,[],Z)}else{try{Z.call()}catch(P){$=P}e.call(Z.prototype)}}else{try{throw Error()}catch(P){$=P}(Z=e())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(P){if(P&&$&&typeof P.stack=="string")return[P.stack,$.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),y=f[0],w=f[1];if(y&&w){var k=y.split(`
`),q=w.split(`
`);for(d=o=0;o<k.length&&!k[o].includes("DetermineComponentFrameRoot");)o++;for(;d<q.length&&!q[d].includes("DetermineComponentFrameRoot");)d++;if(o===k.length||d===q.length)for(o=k.length-1,d=q.length-1;1<=o&&0<=d&&k[o]!==q[d];)d--;for(;1<=o&&0<=d;o--,d--)if(k[o]!==q[d]){if(o!==1||d!==1)do if(o--,d--,0>d||k[o]!==q[d]){var V=`
`+k[o].replace(" at new "," at ");return e.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",e.displayName)),V}while(1<=o&&0<=d);break}}}finally{_o=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?lr(r):""}function Zx(e){switch(e.tag){case 26:case 27:case 5:return lr(e.type);case 16:return lr("Lazy");case 13:return lr("Suspense");case 19:return lr("SuspenseList");case 0:case 15:return ko(e.type,!1);case 11:return ko(e.type.render,!1);case 1:return ko(e.type,!0);case 31:return lr("Activity");default:return""}}function Gd(e){try{var t="";do t+=Zx(e),e=e.return;while(e);return t}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function Pt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Id(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Jx(e){var t=Id(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var d=r.get,f=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(y){o=""+y,f.call(this,y)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(y){o=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Rl(e){e._valueTracker||(e._valueTracker=Jx(e))}function Vd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return e&&(o=Id(e)?e.checked?"true":"false":e.value),e=o,e!==r?(t.setValue(e),!0):!1}function Ul(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Wx=/[\n"\\]/g;function Kt(e){return e.replace(Wx,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function To(e,t,r,o,d,f,y,w){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),t!=null?y==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Pt(t)):e.value!==""+Pt(t)&&(e.value=""+Pt(t)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),t!=null?Eo(e,y,Pt(t)):r!=null?Eo(e,y,Pt(r)):o!=null&&e.removeAttribute("value"),d==null&&f!=null&&(e.defaultChecked=!!f),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+Pt(w):e.removeAttribute("name")}function Qd(e,t,r,o,d,f,y,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||r!=null){if(!(f!=="submit"&&f!=="reset"||t!=null))return;r=r!=null?""+Pt(r):"",t=t!=null?""+Pt(t):r,w||t===e.value||(e.value=t),e.defaultValue=t}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=w?e.checked:!!o,e.defaultChecked=!!o,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y)}function Eo(e,t,r){t==="number"&&Ul(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function ir(e,t,r,o){if(e=e.options,t){t={};for(var d=0;d<r.length;d++)t["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=t.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&o&&(e[r].defaultSelected=!0)}else{for(r=""+Pt(r),t=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,o&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Yd(e,t,r){if(t!=null&&(t=""+Pt(t),t!==e.value&&(e.value=t),r==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=r!=null?""+Pt(r):""}function Fd(e,t,r,o){if(t==null){if(o!=null){if(r!=null)throw Error(i(92));if(oe(o)){if(1<o.length)throw Error(i(93));o=o[0]}r=o}r==null&&(r=""),t=r}r=Pt(t),e.defaultValue=r,o=e.textContent,o===r&&o!==""&&o!==null&&(e.value=o)}function or(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ep=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xd(e,t,r){var o=t.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,r):typeof r!="number"||r===0||ep.has(t)?t==="float"?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function Zd(e,t,r){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var d in t)o=t[d],t.hasOwnProperty(d)&&r[d]!==o&&Xd(e,d,o)}else for(var f in t)t.hasOwnProperty(f)&&Xd(e,f,t[f])}function Co(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ll(e){return sp.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Do=null;function Ao(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cr=null,ur=null;function Jd(e){var t=ar(e);if(t&&(e=t.stateNode)){var r=e[_t]||null;e:switch(e=t.stateNode,t.type){case"input":if(To(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Kt(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var d=o[_t]||null;if(!d)throw Error(i(90));To(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<r.length;t++)o=r[t],o.form===e.form&&Vd(o)}break e;case"textarea":Yd(e,r.value,r.defaultValue);break e;case"select":t=r.value,t!=null&&ir(e,!!r.multiple,t,!1)}}}var Mo=!1;function Wd(e,t,r){if(Mo)return e(t,r);Mo=!0;try{var o=e(t);return o}finally{if(Mo=!1,(cr!==null||ur!==null)&&(wi(),cr&&(t=cr,e=ur,ur=cr=null,Jd(t),e)))for(t=0;t<e.length;t++)Jd(e[t])}}function mn(e,t){var r=e.stateNode;if(r===null)return null;var o=r[_t]||null;if(o===null)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(i(231,t,typeof r));return r}var Ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oo=!1;if(Ns)try{var gn={};Object.defineProperty(gn,"passive",{get:function(){Oo=!0}}),window.addEventListener("test",gn,gn),window.removeEventListener("test",gn,gn)}catch{Oo=!1}var Vs=null,Ro=null,Hl=null;function eh(){if(Hl)return Hl;var e,t=Ro,r=t.length,o,d="value"in Vs?Vs.value:Vs.textContent,f=d.length;for(e=0;e<r&&t[e]===d[e];e++);var y=r-e;for(o=1;o<=y&&t[r-o]===d[f-o];o++);return Hl=d.slice(e,1<o?1-o:void 0)}function Bl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ql(){return!0}function th(){return!1}function kt(e){function t(r,o,d,f,y){this._reactName=r,this._targetInst=d,this.type=o,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(r=e[w],this[w]=r?r(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ql:th,this.isPropagationStopped=th,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ql)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ql)},persist:function(){},isPersistent:ql}),t}var ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zl=kt(ka),xn=p({},ka,{view:0,detail:0}),ap=kt(xn),Uo,Lo,pn,$l=p({},xn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pn&&(pn&&e.type==="mousemove"?(Uo=e.screenX-pn.screenX,Lo=e.screenY-pn.screenY):Lo=Uo=0,pn=e),Uo)},movementY:function(e){return"movementY"in e?e.movementY:Lo}}),sh=kt($l),rp=p({},$l,{dataTransfer:0}),np=kt(rp),lp=p({},xn,{relatedTarget:0}),Ho=kt(lp),ip=p({},ka,{animationName:0,elapsedTime:0,pseudoElement:0}),op=kt(ip),cp=p({},ka,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),up=kt(cp),dp=p({},ka,{data:0}),ah=kt(dp),hp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mp[e])?!!t[e]:!1}function Bo(){return gp}var xp=p({},xn,{key:function(e){if(e.key){var t=hp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bo,charCode:function(e){return e.type==="keypress"?Bl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pp=kt(xp),yp=p({},$l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rh=kt(yp),vp=p({},xn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bo}),bp=kt(vp),wp=p({},ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),jp=kt(wp),Np=p({},$l,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Sp=kt(Np),_p=p({},ka,{newState:0,oldState:0}),kp=kt(_p),Tp=[9,13,27,32],qo=Ns&&"CompositionEvent"in window,yn=null;Ns&&"documentMode"in document&&(yn=document.documentMode);var Ep=Ns&&"TextEvent"in window&&!yn,nh=Ns&&(!qo||yn&&8<yn&&11>=yn),lh=" ",ih=!1;function oh(e,t){switch(e){case"keyup":return Tp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ch(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var dr=!1;function Cp(e,t){switch(e){case"compositionend":return ch(t);case"keypress":return t.which!==32?null:(ih=!0,lh);case"textInput":return e=t.data,e===lh&&ih?null:e;default:return null}}function Dp(e,t){if(dr)return e==="compositionend"||!qo&&oh(e,t)?(e=eh(),Hl=Ro=Vs=null,dr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nh&&t.locale!=="ko"?null:t.data;default:return null}}var Ap={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ap[e.type]:t==="textarea"}function dh(e,t,r,o){cr?ur?ur.push(o):ur=[o]:cr=o,t=Ti(t,"onChange"),0<t.length&&(r=new zl("onChange","change",null,r,o),e.push({event:r,listeners:t}))}var vn=null,bn=null;function Mp(e){Vm(e,0)}function Pl(e){var t=fn(e);if(Vd(t))return e}function hh(e,t){if(e==="change")return t}var fh=!1;if(Ns){var zo;if(Ns){var $o="oninput"in document;if(!$o){var mh=document.createElement("div");mh.setAttribute("oninput","return;"),$o=typeof mh.oninput=="function"}zo=$o}else zo=!1;fh=zo&&(!document.documentMode||9<document.documentMode)}function gh(){vn&&(vn.detachEvent("onpropertychange",xh),bn=vn=null)}function xh(e){if(e.propertyName==="value"&&Pl(bn)){var t=[];dh(t,bn,e,Ao(e)),Wd(Mp,t)}}function Op(e,t,r){e==="focusin"?(gh(),vn=t,bn=r,vn.attachEvent("onpropertychange",xh)):e==="focusout"&&gh()}function Rp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pl(bn)}function Up(e,t){if(e==="click")return Pl(t)}function Lp(e,t){if(e==="input"||e==="change")return Pl(t)}function Hp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var At=typeof Object.is=="function"?Object.is:Hp;function wn(e,t){if(At(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var d=r[o];if(!F.call(t,d)||!At(e[d],t[d]))return!1}return!0}function ph(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yh(e,t){var r=ph(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=t&&o>=t)return{node:r,offset:t-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ph(r)}}function vh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function bh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ul(e.document);t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ul(e.document)}return t}function Po(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Bp=Ns&&"documentMode"in document&&11>=document.documentMode,hr=null,Ko=null,jn=null,Go=!1;function wh(e,t,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Go||hr==null||hr!==Ul(o)||(o=hr,"selectionStart"in o&&Po(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),jn&&wn(jn,o)||(jn=o,o=Ti(Ko,"onSelect"),0<o.length&&(t=new zl("onSelect","select",null,t,r),e.push({event:t,listeners:o}),t.target=hr)))}function Ta(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var fr={animationend:Ta("Animation","AnimationEnd"),animationiteration:Ta("Animation","AnimationIteration"),animationstart:Ta("Animation","AnimationStart"),transitionrun:Ta("Transition","TransitionRun"),transitionstart:Ta("Transition","TransitionStart"),transitioncancel:Ta("Transition","TransitionCancel"),transitionend:Ta("Transition","TransitionEnd")},Io={},jh={};Ns&&(jh=document.createElement("div").style,"AnimationEvent"in window||(delete fr.animationend.animation,delete fr.animationiteration.animation,delete fr.animationstart.animation),"TransitionEvent"in window||delete fr.transitionend.transition);function Ea(e){if(Io[e])return Io[e];if(!fr[e])return e;var t=fr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in jh)return Io[e]=t[r];return e}var Nh=Ea("animationend"),Sh=Ea("animationiteration"),_h=Ea("animationstart"),qp=Ea("transitionrun"),zp=Ea("transitionstart"),$p=Ea("transitioncancel"),kh=Ea("transitionend"),Th=new Map,Vo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vo.push("scrollEnd");function ts(e,t){Th.set(e,t),_a(t,[e])}var Eh=new WeakMap;function Gt(e,t){if(typeof e=="object"&&e!==null){var r=Eh.get(e);return r!==void 0?r:(t={value:e,source:t,stack:Gd(t)},Eh.set(e,t),t)}return{value:e,source:t,stack:Gd(t)}}var It=[],mr=0,Qo=0;function Kl(){for(var e=mr,t=Qo=mr=0;t<e;){var r=It[t];It[t++]=null;var o=It[t];It[t++]=null;var d=It[t];It[t++]=null;var f=It[t];if(It[t++]=null,o!==null&&d!==null){var y=o.pending;y===null?d.next=d:(d.next=y.next,y.next=d),o.pending=d}f!==0&&Ch(r,d,f)}}function Gl(e,t,r,o){It[mr++]=e,It[mr++]=t,It[mr++]=r,It[mr++]=o,Qo|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Yo(e,t,r,o){return Gl(e,t,r,o),Il(e)}function gr(e,t){return Gl(e,null,null,t),Il(e)}function Ch(e,t,r){e.lanes|=r;var o=e.alternate;o!==null&&(o.lanes|=r);for(var d=!1,f=e.return;f!==null;)f.childLanes|=r,o=f.alternate,o!==null&&(o.childLanes|=r),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(d=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,d&&t!==null&&(d=31-Ne(r),e=f.hiddenUpdates,o=e[d],o===null?e[d]=[t]:o.push(t),t.lane=r|536870912),f):null}function Il(e){if(50<Qn)throw Qn=0,eu=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var xr={};function Pp(e,t,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(e,t,r,o){return new Pp(e,t,r,o)}function Fo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ss(e,t){var r=e.alternate;return r===null?(r=Mt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Dh(e,t){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vl(e,t,r,o,d,f){var y=0;if(o=e,typeof e=="function")Fo(e)&&(y=1);else if(typeof e=="string")y=Gy(e,r,ue.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ie:return e=Mt(31,r,t,d),e.elementType=ie,e.lanes=f,e;case S:return Ca(r.children,d,f,t);case _:y=8,d|=24;break;case D:return e=Mt(12,r,t,d|2),e.elementType=D,e.lanes=f,e;case z:return e=Mt(13,r,t,d),e.elementType=z,e.lanes=f,e;case H:return e=Mt(19,r,t,d),e.elementType=H,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M:case C:y=10;break e;case E:y=9;break e;case G:y=11;break e;case O:y=14;break e;case X:y=16,o=null;break e}y=29,r=Error(i(130,e===null?"null":typeof e,"")),o=null}return t=Mt(y,r,t,d),t.elementType=e,t.type=o,t.lanes=f,t}function Ca(e,t,r,o){return e=Mt(7,e,o,t),e.lanes=r,e}function Xo(e,t,r){return e=Mt(6,e,null,t),e.lanes=r,e}function Zo(e,t,r){return t=Mt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var pr=[],yr=0,Ql=null,Yl=0,Vt=[],Qt=0,Da=null,_s=1,ks="";function Aa(e,t){pr[yr++]=Yl,pr[yr++]=Ql,Ql=e,Yl=t}function Ah(e,t,r){Vt[Qt++]=_s,Vt[Qt++]=ks,Vt[Qt++]=Da,Da=e;var o=_s;e=ks;var d=32-Ne(o)-1;o&=~(1<<d),r+=1;var f=32-Ne(t)+d;if(30<f){var y=d-d%5;f=(o&(1<<y)-1).toString(32),o>>=y,d-=y,_s=1<<32-Ne(t)+d|r<<d|o,ks=f+e}else _s=1<<f|r<<d|o,ks=e}function Jo(e){e.return!==null&&(Aa(e,1),Ah(e,1,0))}function Wo(e){for(;e===Ql;)Ql=pr[--yr],pr[yr]=null,Yl=pr[--yr],pr[yr]=null;for(;e===Da;)Da=Vt[--Qt],Vt[Qt]=null,ks=Vt[--Qt],Vt[Qt]=null,_s=Vt[--Qt],Vt[Qt]=null}var jt=null,Je=null,Le=!1,Ma=null,ds=!1,ec=Error(i(519));function Oa(e){var t=Error(i(418,""));throw _n(Gt(t,e)),ec}function Mh(e){var t=e.stateNode,r=e.type,o=e.memoizedProps;switch(t[yt]=e,t[_t]=o,r){case"dialog":Ae("cancel",t),Ae("close",t);break;case"iframe":case"object":case"embed":Ae("load",t);break;case"video":case"audio":for(r=0;r<Fn.length;r++)Ae(Fn[r],t);break;case"source":Ae("error",t);break;case"img":case"image":case"link":Ae("error",t),Ae("load",t);break;case"details":Ae("toggle",t);break;case"input":Ae("invalid",t),Qd(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Rl(t);break;case"select":Ae("invalid",t);break;case"textarea":Ae("invalid",t),Fd(t,o.value,o.defaultValue,o.children),Rl(t)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||t.textContent===""+r||o.suppressHydrationWarning===!0||Xm(t.textContent,r)?(o.popover!=null&&(Ae("beforetoggle",t),Ae("toggle",t)),o.onScroll!=null&&Ae("scroll",t),o.onScrollEnd!=null&&Ae("scrollend",t),o.onClick!=null&&(t.onclick=Ei),t=!0):t=!1,t||Oa(e)}function Oh(e){for(jt=e.return;jt;)switch(jt.tag){case 5:case 13:ds=!1;return;case 27:case 3:ds=!0;return;default:jt=jt.return}}function Nn(e){if(e!==jt)return!1;if(!Le)return Oh(e),Le=!0,!1;var t=e.tag,r;if((r=t!==3&&t!==27)&&((r=t===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||xu(e.type,e.memoizedProps)),r=!r),r&&Je&&Oa(e),Oh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(r=e.data,r==="/$"){if(t===0){Je=as(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++;e=e.nextSibling}Je=null}}else t===27?(t=Je,oa(e.type)?(e=bu,bu=null,Je=e):Je=t):Je=jt?as(e.stateNode.nextSibling):null;return!0}function Sn(){Je=jt=null,Le=!1}function Rh(){var e=Ma;return e!==null&&(Ct===null?Ct=e:Ct.push.apply(Ct,e),Ma=null),e}function _n(e){Ma===null?Ma=[e]:Ma.push(e)}var tc=R(null),Ra=null,Ts=null;function Qs(e,t,r){re(tc,t._currentValue),t._currentValue=r}function Es(e){e._currentValue=tc.current,W(tc)}function sc(e,t,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===r)break;e=e.return}}function ac(e,t,r,o){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var f=d.dependencies;if(f!==null){var y=d.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=d;for(var k=0;k<t.length;k++)if(w.context===t[k]){f.lanes|=r,w=f.alternate,w!==null&&(w.lanes|=r),sc(f.return,r,e),o||(y=null);break e}f=w.next}}else if(d.tag===18){if(y=d.return,y===null)throw Error(i(341));y.lanes|=r,f=y.alternate,f!==null&&(f.lanes|=r),sc(y,r,e),y=null}else y=d.child;if(y!==null)y.return=d;else for(y=d;y!==null;){if(y===e){y=null;break}if(d=y.sibling,d!==null){d.return=y.return,y=d;break}y=y.return}d=y}}function kn(e,t,r,o){e=null;for(var d=t,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var y=d.alternate;if(y===null)throw Error(i(387));if(y=y.memoizedProps,y!==null){var w=d.type;At(d.pendingProps.value,y.value)||(e!==null?e.push(w):e=[w])}}else if(d===mt.current){if(y=d.alternate,y===null)throw Error(i(387));y.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(tl):e=[tl])}d=d.return}e!==null&&ac(t,e,r,o),t.flags|=262144}function Fl(e){for(e=e.firstContext;e!==null;){if(!At(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ua(e){Ra=e,Ts=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function vt(e){return Uh(Ra,e)}function Xl(e,t){return Ra===null&&Ua(e),Uh(e,t)}function Uh(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},Ts===null){if(e===null)throw Error(i(308));Ts=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ts=Ts.next=t;return r}var Kp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(r,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(r){return r()})}},Gp=l.unstable_scheduleCallback,Ip=l.unstable_NormalPriority,lt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rc(){return{controller:new Kp,data:new Map,refCount:0}}function Tn(e){e.refCount--,e.refCount===0&&Gp(Ip,function(){e.controller.abort()})}var En=null,nc=0,vr=0,br=null;function Vp(e,t){if(En===null){var r=En=[];nc=0,vr=iu(),br={status:"pending",value:void 0,then:function(o){r.push(o)}}}return nc++,t.then(Lh,Lh),t}function Lh(){if(--nc===0&&En!==null){br!==null&&(br.status="fulfilled");var e=En;En=null,vr=0,br=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Qp(e,t){var r=[],o={status:"pending",value:null,reason:null,then:function(d){r.push(d)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var d=0;d<r.length;d++)(0,r[d])(t)},function(d){for(o.status="rejected",o.reason=d,d=0;d<r.length;d++)(0,r[d])(void 0)}),o}var Hh=L.S;L.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Vp(e,t),Hh!==null&&Hh(e,t)};var La=R(null);function lc(){var e=La.current;return e!==null?e:Ve.pooledCache}function Zl(e,t){t===null?re(La,La.current):re(La,t.pool)}function Bh(){var e=lc();return e===null?null:{parent:lt._currentValue,pool:e}}var Cn=Error(i(460)),qh=Error(i(474)),Jl=Error(i(542)),ic={then:function(){}};function zh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Wl(){}function $h(e,t,r){switch(r=e[r],r===void 0?e.push(t):r!==t&&(t.then(Wl,Wl),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Kh(e),e;default:if(typeof t.status=="string")t.then(Wl,Wl);else{if(e=Ve,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=o}},function(o){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Kh(e),e}throw Dn=t,Cn}}var Dn=null;function Ph(){if(Dn===null)throw Error(i(459));var e=Dn;return Dn=null,e}function Kh(e){if(e===Cn||e===Jl)throw Error(i(483))}var Ys=!1;function oc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Fs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Xs(e,t,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(qe&2)!==0){var d=o.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),o.pending=t,t=Il(e),Ch(e,null,r),t}return Gl(e,o,t,r),Il(e)}function An(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194048)!==0)){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,Ld(e,r)}}function uc(e,t){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var d=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var y={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};f===null?d=f=y:f=f.next=y,r=r.next}while(r!==null);f===null?d=f=t:f=f.next=t}else d=f=t;r={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var dc=!1;function Mn(){if(dc){var e=br;if(e!==null)throw e}}function On(e,t,r,o){dc=!1;var d=e.updateQueue;Ys=!1;var f=d.firstBaseUpdate,y=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var k=w,q=k.next;k.next=null,y===null?f=q:y.next=q,y=k;var V=e.alternate;V!==null&&(V=V.updateQueue,w=V.lastBaseUpdate,w!==y&&(w===null?V.firstBaseUpdate=q:w.next=q,V.lastBaseUpdate=k))}if(f!==null){var Z=d.baseState;y=0,V=q=k=null,w=f;do{var $=w.lane&-536870913,P=$!==w.lane;if(P?(Oe&$)===$:(o&$)===$){$!==0&&$===vr&&(dc=!0),V!==null&&(V=V.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ye=e,ge=w;$=t;var Ke=r;switch(ge.tag){case 1:if(ye=ge.payload,typeof ye=="function"){Z=ye.call(Ke,Z,$);break e}Z=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=ge.payload,$=typeof ye=="function"?ye.call(Ke,Z,$):ye,$==null)break e;Z=p({},Z,$);break e;case 2:Ys=!0}}$=w.callback,$!==null&&(e.flags|=64,P&&(e.flags|=8192),P=d.callbacks,P===null?d.callbacks=[$]:P.push($))}else P={lane:$,tag:w.tag,payload:w.payload,callback:w.callback,next:null},V===null?(q=V=P,k=Z):V=V.next=P,y|=$;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;P=w,w=P.next,P.next=null,d.lastBaseUpdate=P,d.shared.pending=null}}while(!0);V===null&&(k=Z),d.baseState=k,d.firstBaseUpdate=q,d.lastBaseUpdate=V,f===null&&(d.shared.lanes=0),ra|=y,e.lanes=y,e.memoizedState=Z}}function Gh(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Ih(e,t){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)Gh(r[e],t)}var wr=R(null),ei=R(0);function Vh(e,t){e=Us,re(ei,e),re(wr,t),Us=e|t.baseLanes}function hc(){re(ei,Us),re(wr,wr.current)}function fc(){Us=ei.current,W(wr),W(ei)}var Zs=0,ke=null,$e=null,rt=null,ti=!1,jr=!1,Ha=!1,si=0,Rn=0,Nr=null,Yp=0;function st(){throw Error(i(321))}function mc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!At(e[r],t[r]))return!1;return!0}function gc(e,t,r,o,d,f){return Zs=f,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,L.H=e===null||e.memoizedState===null?Df:Af,Ha=!1,f=r(o,d),Ha=!1,jr&&(f=Yh(t,r,o,d)),Qh(e),f}function Qh(e){L.H=oi;var t=$e!==null&&$e.next!==null;if(Zs=0,rt=$e=ke=null,ti=!1,Rn=0,Nr=null,t)throw Error(i(300));e===null||ct||(e=e.dependencies,e!==null&&Fl(e)&&(ct=!0))}function Yh(e,t,r,o){ke=e;var d=0;do{if(jr&&(Nr=null),Rn=0,jr=!1,25<=d)throw Error(i(301));if(d+=1,rt=$e=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}L.H=ty,f=t(r,o)}while(jr);return f}function Fp(){var e=L.H,t=e.useState()[0];return t=typeof t.then=="function"?Un(t):t,e=e.useState()[0],($e!==null?$e.memoizedState:null)!==e&&(ke.flags|=1024),t}function xc(){var e=si!==0;return si=0,e}function pc(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function yc(e){if(ti){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ti=!1}Zs=0,rt=$e=ke=null,jr=!1,Rn=si=0,Nr=null}function Tt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?ke.memoizedState=rt=e:rt=rt.next=e,rt}function nt(){if($e===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=$e.next;var t=rt===null?ke.memoizedState:rt.next;if(t!==null)rt=t,$e=e;else{if(e===null)throw ke.alternate===null?Error(i(467)):Error(i(310));$e=e,e={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},rt===null?ke.memoizedState=rt=e:rt=rt.next=e}return rt}function vc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Un(e){var t=Rn;return Rn+=1,Nr===null&&(Nr=[]),e=$h(Nr,e,t),t=ke,(rt===null?t.memoizedState:rt.next)===null&&(t=t.alternate,L.H=t===null||t.memoizedState===null?Df:Af),e}function ai(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Un(e);if(e.$$typeof===C)return vt(e)}throw Error(i(438,String(e)))}function bc(e){var t=null,r=ke.updateQueue;if(r!==null&&(t=r.memoCache),t==null){var o=ke.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),r===null&&(r=vc(),ke.updateQueue=r),r.memoCache=t,r=t.data[t.index],r===void 0)for(r=t.data[t.index]=Array(e),o=0;o<e;o++)r[o]=Q;return t.index++,r}function Cs(e,t){return typeof t=="function"?t(e):t}function ri(e){var t=nt();return wc(t,$e,e)}function wc(e,t,r){var o=e.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var d=e.baseQueue,f=o.pending;if(f!==null){if(d!==null){var y=d.next;d.next=f.next,f.next=y}t.baseQueue=d=f,o.pending=null}if(f=e.baseState,d===null)e.memoizedState=f;else{t=d.next;var w=y=null,k=null,q=t,V=!1;do{var Z=q.lane&-536870913;if(Z!==q.lane?(Oe&Z)===Z:(Zs&Z)===Z){var $=q.revertLane;if($===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),Z===vr&&(V=!0);else if((Zs&$)===$){q=q.next,$===vr&&(V=!0);continue}else Z={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},k===null?(w=k=Z,y=f):k=k.next=Z,ke.lanes|=$,ra|=$;Z=q.action,Ha&&r(f,Z),f=q.hasEagerState?q.eagerState:r(f,Z)}else $={lane:Z,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},k===null?(w=k=$,y=f):k=k.next=$,ke.lanes|=Z,ra|=Z;q=q.next}while(q!==null&&q!==t);if(k===null?y=f:k.next=w,!At(f,e.memoizedState)&&(ct=!0,V&&(r=br,r!==null)))throw r;e.memoizedState=f,e.baseState=y,e.baseQueue=k,o.lastRenderedState=f}return d===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function jc(e){var t=nt(),r=t.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=e;var o=r.dispatch,d=r.pending,f=t.memoizedState;if(d!==null){r.pending=null;var y=d=d.next;do f=e(f,y.action),y=y.next;while(y!==d);At(f,t.memoizedState)||(ct=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),r.lastRenderedState=f}return[f,o]}function Fh(e,t,r){var o=ke,d=nt(),f=Le;if(f){if(r===void 0)throw Error(i(407));r=r()}else r=t();var y=!At(($e||d).memoizedState,r);y&&(d.memoizedState=r,ct=!0),d=d.queue;var w=Jh.bind(null,o,d,e);if(Ln(2048,8,w,[e]),d.getSnapshot!==t||y||rt!==null&&rt.memoizedState.tag&1){if(o.flags|=2048,Sr(9,ni(),Zh.bind(null,o,d,r,t),null),Ve===null)throw Error(i(349));f||(Zs&124)!==0||Xh(o,t,r)}return r}function Xh(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ke.updateQueue,t===null?(t=vc(),ke.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Zh(e,t,r,o){t.value=r,t.getSnapshot=o,Wh(t)&&ef(e)}function Jh(e,t,r){return r(function(){Wh(t)&&ef(e)})}function Wh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!At(e,r)}catch{return!0}}function ef(e){var t=gr(e,2);t!==null&&Ht(t,e,2)}function Nc(e){var t=Tt();if(typeof e=="function"){var r=e;if(e=r(),Ha){He(!0);try{r()}finally{He(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:e},t}function tf(e,t,r,o){return e.baseState=r,wc(e,$e,typeof o=="function"?o:Cs)}function Xp(e,t,r,o,d){if(ii(e))throw Error(i(485));if(e=t.action,e!==null){var f={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){f.listeners.push(y)}};L.T!==null?r(!0):f.isTransition=!1,o(f),r=t.pending,r===null?(f.next=t.pending=f,sf(t,f)):(f.next=r.next,t.pending=r.next=f)}}function sf(e,t){var r=t.action,o=t.payload,d=e.state;if(t.isTransition){var f=L.T,y={};L.T=y;try{var w=r(d,o),k=L.S;k!==null&&k(y,w),af(e,t,w)}catch(q){Sc(e,t,q)}finally{L.T=f}}else try{f=r(d,o),af(e,t,f)}catch(q){Sc(e,t,q)}}function af(e,t,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){rf(e,t,o)},function(o){return Sc(e,t,o)}):rf(e,t,r)}function rf(e,t,r){t.status="fulfilled",t.value=r,nf(t),e.state=r,t=e.pending,t!==null&&(r=t.next,r===t?e.pending=null:(r=r.next,t.next=r,sf(e,r)))}function Sc(e,t,r){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=r,nf(t),t=t.next;while(t!==o)}e.action=null}function nf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function lf(e,t){return t}function of(e,t){if(Le){var r=Ve.formState;if(r!==null){e:{var o=ke;if(Le){if(Je){t:{for(var d=Je,f=ds;d.nodeType!==8;){if(!f){d=null;break t}if(d=as(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){Je=as(d.nextSibling),o=d.data==="F!";break e}}Oa(o)}o=!1}o&&(t=r[0])}}return r=Tt(),r.memoizedState=r.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lf,lastRenderedState:t},r.queue=o,r=Tf.bind(null,ke,o),o.dispatch=r,o=Nc(!1),f=Cc.bind(null,ke,!1,o.queue),o=Tt(),d={state:t,dispatch:null,action:e,pending:null},o.queue=d,r=Xp.bind(null,ke,d,f,r),d.dispatch=r,o.memoizedState=e,[t,r,!1]}function cf(e){var t=nt();return uf(t,$e,e)}function uf(e,t,r){if(t=wc(e,t,lf)[0],e=ri(Cs)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var o=Un(t)}catch(y){throw y===Cn?Jl:y}else o=t;t=nt();var d=t.queue,f=d.dispatch;return r!==t.memoizedState&&(ke.flags|=2048,Sr(9,ni(),Zp.bind(null,d,r),null)),[o,f,e]}function Zp(e,t){e.action=t}function df(e){var t=nt(),r=$e;if(r!==null)return uf(t,r,e);nt(),t=t.memoizedState,r=nt();var o=r.queue.dispatch;return r.memoizedState=e,[t,o,!1]}function Sr(e,t,r,o){return e={tag:e,create:r,deps:o,inst:t,next:null},t=ke.updateQueue,t===null&&(t=vc(),ke.updateQueue=t),r=t.lastEffect,r===null?t.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,t.lastEffect=e),e}function ni(){return{destroy:void 0,resource:void 0}}function hf(){return nt().memoizedState}function li(e,t,r,o){var d=Tt();o=o===void 0?null:o,ke.flags|=e,d.memoizedState=Sr(1|t,ni(),r,o)}function Ln(e,t,r,o){var d=nt();o=o===void 0?null:o;var f=d.memoizedState.inst;$e!==null&&o!==null&&mc(o,$e.memoizedState.deps)?d.memoizedState=Sr(t,f,r,o):(ke.flags|=e,d.memoizedState=Sr(1|t,f,r,o))}function ff(e,t){li(8390656,8,e,t)}function mf(e,t){Ln(2048,8,e,t)}function gf(e,t){return Ln(4,2,e,t)}function xf(e,t){return Ln(4,4,e,t)}function pf(e,t){if(typeof t=="function"){e=e();var r=t(e);return function(){typeof r=="function"?r():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yf(e,t,r){r=r!=null?r.concat([e]):null,Ln(4,4,pf.bind(null,t,e),r)}function _c(){}function vf(e,t){var r=nt();t=t===void 0?null:t;var o=r.memoizedState;return t!==null&&mc(t,o[1])?o[0]:(r.memoizedState=[e,t],e)}function bf(e,t){var r=nt();t=t===void 0?null:t;var o=r.memoizedState;if(t!==null&&mc(t,o[1]))return o[0];if(o=e(),Ha){He(!0);try{e()}finally{He(!1)}}return r.memoizedState=[o,t],o}function kc(e,t,r){return r===void 0||(Zs&1073741824)!==0?e.memoizedState=t:(e.memoizedState=r,e=Nm(),ke.lanes|=e,ra|=e,r)}function wf(e,t,r,o){return At(r,t)?r:wr.current!==null?(e=kc(e,r,o),At(e,t)||(ct=!0),e):(Zs&42)===0?(ct=!0,e.memoizedState=r):(e=Nm(),ke.lanes|=e,ra|=e,t)}function jf(e,t,r,o,d){var f=I.p;I.p=f!==0&&8>f?f:8;var y=L.T,w={};L.T=w,Cc(e,!1,t,r);try{var k=d(),q=L.S;if(q!==null&&q(w,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var V=Qp(k,o);Hn(e,t,V,Lt(e))}else Hn(e,t,o,Lt(e))}catch(Z){Hn(e,t,{then:function(){},status:"rejected",reason:Z},Lt())}finally{I.p=f,L.T=y}}function Jp(){}function Tc(e,t,r,o){if(e.tag!==5)throw Error(i(476));var d=Nf(e).queue;jf(e,d,t,ae,r===null?Jp:function(){return Sf(e),r(o)})}function Nf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:ae},next:null};var r={};return t.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:r},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Sf(e){var t=Nf(e).next.queue;Hn(e,t,{},Lt())}function Ec(){return vt(tl)}function _f(){return nt().memoizedState}function kf(){return nt().memoizedState}function Wp(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var r=Lt();e=Fs(r);var o=Xs(t,e,r);o!==null&&(Ht(o,t,r),An(o,t,r)),t={cache:rc()},e.payload=t;return}t=t.return}}function ey(e,t,r){var o=Lt();r={lane:o,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},ii(e)?Ef(t,r):(r=Yo(e,t,r,o),r!==null&&(Ht(r,e,o),Cf(r,t,o)))}function Tf(e,t,r){var o=Lt();Hn(e,t,r,o)}function Hn(e,t,r,o){var d={lane:o,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(ii(e))Ef(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var y=t.lastRenderedState,w=f(y,r);if(d.hasEagerState=!0,d.eagerState=w,At(w,y))return Gl(e,t,d,0),Ve===null&&Kl(),!1}catch{}finally{}if(r=Yo(e,t,d,o),r!==null)return Ht(r,e,o),Cf(r,t,o),!0}return!1}function Cc(e,t,r,o){if(o={lane:2,revertLane:iu(),action:o,hasEagerState:!1,eagerState:null,next:null},ii(e)){if(t)throw Error(i(479))}else t=Yo(e,r,o,2),t!==null&&Ht(t,e,2)}function ii(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function Ef(e,t){jr=ti=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Cf(e,t,r){if((r&4194048)!==0){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,Ld(e,r)}}var oi={readContext:vt,use:ai,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useLayoutEffect:st,useInsertionEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useSyncExternalStore:st,useId:st,useHostTransitionStatus:st,useFormState:st,useActionState:st,useOptimistic:st,useMemoCache:st,useCacheRefresh:st},Df={readContext:vt,use:ai,useCallback:function(e,t){return Tt().memoizedState=[e,t===void 0?null:t],e},useContext:vt,useEffect:ff,useImperativeHandle:function(e,t,r){r=r!=null?r.concat([e]):null,li(4194308,4,pf.bind(null,t,e),r)},useLayoutEffect:function(e,t){return li(4194308,4,e,t)},useInsertionEffect:function(e,t){li(4,2,e,t)},useMemo:function(e,t){var r=Tt();t=t===void 0?null:t;var o=e();if(Ha){He(!0);try{e()}finally{He(!1)}}return r.memoizedState=[o,t],o},useReducer:function(e,t,r){var o=Tt();if(r!==void 0){var d=r(t);if(Ha){He(!0);try{r(t)}finally{He(!1)}}}else d=t;return o.memoizedState=o.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},o.queue=e,e=e.dispatch=ey.bind(null,ke,e),[o.memoizedState,e]},useRef:function(e){var t=Tt();return e={current:e},t.memoizedState=e},useState:function(e){e=Nc(e);var t=e.queue,r=Tf.bind(null,ke,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:_c,useDeferredValue:function(e,t){var r=Tt();return kc(r,e,t)},useTransition:function(){var e=Nc(!1);return e=jf.bind(null,ke,e.queue,!0,!1),Tt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var o=ke,d=Tt();if(Le){if(r===void 0)throw Error(i(407));r=r()}else{if(r=t(),Ve===null)throw Error(i(349));(Oe&124)!==0||Xh(o,t,r)}d.memoizedState=r;var f={value:r,getSnapshot:t};return d.queue=f,ff(Jh.bind(null,o,f,e),[e]),o.flags|=2048,Sr(9,ni(),Zh.bind(null,o,f,r,t),null),r},useId:function(){var e=Tt(),t=Ve.identifierPrefix;if(Le){var r=ks,o=_s;r=(o&~(1<<32-Ne(o)-1)).toString(32)+r,t=""+t+"R"+r,r=si++,0<r&&(t+="H"+r.toString(32)),t+=""}else r=Yp++,t=""+t+"r"+r.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Ec,useFormState:of,useActionState:of,useOptimistic:function(e){var t=Tt();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=Cc.bind(null,ke,!0,r),r.dispatch=t,[e,t]},useMemoCache:bc,useCacheRefresh:function(){return Tt().memoizedState=Wp.bind(null,ke)}},Af={readContext:vt,use:ai,useCallback:vf,useContext:vt,useEffect:mf,useImperativeHandle:yf,useInsertionEffect:gf,useLayoutEffect:xf,useMemo:bf,useReducer:ri,useRef:hf,useState:function(){return ri(Cs)},useDebugValue:_c,useDeferredValue:function(e,t){var r=nt();return wf(r,$e.memoizedState,e,t)},useTransition:function(){var e=ri(Cs)[0],t=nt().memoizedState;return[typeof e=="boolean"?e:Un(e),t]},useSyncExternalStore:Fh,useId:_f,useHostTransitionStatus:Ec,useFormState:cf,useActionState:cf,useOptimistic:function(e,t){var r=nt();return tf(r,$e,e,t)},useMemoCache:bc,useCacheRefresh:kf},ty={readContext:vt,use:ai,useCallback:vf,useContext:vt,useEffect:mf,useImperativeHandle:yf,useInsertionEffect:gf,useLayoutEffect:xf,useMemo:bf,useReducer:jc,useRef:hf,useState:function(){return jc(Cs)},useDebugValue:_c,useDeferredValue:function(e,t){var r=nt();return $e===null?kc(r,e,t):wf(r,$e.memoizedState,e,t)},useTransition:function(){var e=jc(Cs)[0],t=nt().memoizedState;return[typeof e=="boolean"?e:Un(e),t]},useSyncExternalStore:Fh,useId:_f,useHostTransitionStatus:Ec,useFormState:df,useActionState:df,useOptimistic:function(e,t){var r=nt();return $e!==null?tf(r,$e,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:bc,useCacheRefresh:kf},_r=null,Bn=0;function ci(e){var t=Bn;return Bn+=1,_r===null&&(_r=[]),$h(_r,e,t)}function qn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ui(e,t){throw t.$$typeof===v?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Mf(e){var t=e._init;return t(e._payload)}function Of(e){function t(U,A){if(e){var B=U.deletions;B===null?(U.deletions=[A],U.flags|=16):B.push(A)}}function r(U,A){if(!e)return null;for(;A!==null;)t(U,A),A=A.sibling;return null}function o(U){for(var A=new Map;U!==null;)U.key!==null?A.set(U.key,U):A.set(U.index,U),U=U.sibling;return A}function d(U,A){return U=Ss(U,A),U.index=0,U.sibling=null,U}function f(U,A,B){return U.index=B,e?(B=U.alternate,B!==null?(B=B.index,B<A?(U.flags|=67108866,A):B):(U.flags|=67108866,A)):(U.flags|=1048576,A)}function y(U){return e&&U.alternate===null&&(U.flags|=67108866),U}function w(U,A,B,Y){return A===null||A.tag!==6?(A=Xo(B,U.mode,Y),A.return=U,A):(A=d(A,B),A.return=U,A)}function k(U,A,B,Y){var he=B.type;return he===S?V(U,A,B.props.children,Y,B.key):A!==null&&(A.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===X&&Mf(he)===A.type)?(A=d(A,B.props),qn(A,B),A.return=U,A):(A=Vl(B.type,B.key,B.props,null,U.mode,Y),qn(A,B),A.return=U,A)}function q(U,A,B,Y){return A===null||A.tag!==4||A.stateNode.containerInfo!==B.containerInfo||A.stateNode.implementation!==B.implementation?(A=Zo(B,U.mode,Y),A.return=U,A):(A=d(A,B.children||[]),A.return=U,A)}function V(U,A,B,Y,he){return A===null||A.tag!==7?(A=Ca(B,U.mode,Y,he),A.return=U,A):(A=d(A,B),A.return=U,A)}function Z(U,A,B){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=Xo(""+A,U.mode,B),A.return=U,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case j:return B=Vl(A.type,A.key,A.props,null,U.mode,B),qn(B,A),B.return=U,B;case N:return A=Zo(A,U.mode,B),A.return=U,A;case X:var Y=A._init;return A=Y(A._payload),Z(U,A,B)}if(oe(A)||ne(A))return A=Ca(A,U.mode,B,null),A.return=U,A;if(typeof A.then=="function")return Z(U,ci(A),B);if(A.$$typeof===C)return Z(U,Xl(U,A),B);ui(U,A)}return null}function $(U,A,B,Y){var he=A!==null?A.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return he!==null?null:w(U,A,""+B,Y);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case j:return B.key===he?k(U,A,B,Y):null;case N:return B.key===he?q(U,A,B,Y):null;case X:return he=B._init,B=he(B._payload),$(U,A,B,Y)}if(oe(B)||ne(B))return he!==null?null:V(U,A,B,Y,null);if(typeof B.then=="function")return $(U,A,ci(B),Y);if(B.$$typeof===C)return $(U,A,Xl(U,B),Y);ui(U,B)}return null}function P(U,A,B,Y,he){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return U=U.get(B)||null,w(A,U,""+Y,he);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case j:return U=U.get(Y.key===null?B:Y.key)||null,k(A,U,Y,he);case N:return U=U.get(Y.key===null?B:Y.key)||null,q(A,U,Y,he);case X:var Te=Y._init;return Y=Te(Y._payload),P(U,A,B,Y,he)}if(oe(Y)||ne(Y))return U=U.get(B)||null,V(A,U,Y,he,null);if(typeof Y.then=="function")return P(U,A,B,ci(Y),he);if(Y.$$typeof===C)return P(U,A,B,Xl(A,Y),he);ui(A,Y)}return null}function ye(U,A,B,Y){for(var he=null,Te=null,fe=A,xe=A=0,dt=null;fe!==null&&xe<B.length;xe++){fe.index>xe?(dt=fe,fe=null):dt=fe.sibling;var Ue=$(U,fe,B[xe],Y);if(Ue===null){fe===null&&(fe=dt);break}e&&fe&&Ue.alternate===null&&t(U,fe),A=f(Ue,A,xe),Te===null?he=Ue:Te.sibling=Ue,Te=Ue,fe=dt}if(xe===B.length)return r(U,fe),Le&&Aa(U,xe),he;if(fe===null){for(;xe<B.length;xe++)fe=Z(U,B[xe],Y),fe!==null&&(A=f(fe,A,xe),Te===null?he=fe:Te.sibling=fe,Te=fe);return Le&&Aa(U,xe),he}for(fe=o(fe);xe<B.length;xe++)dt=P(fe,U,xe,B[xe],Y),dt!==null&&(e&&dt.alternate!==null&&fe.delete(dt.key===null?xe:dt.key),A=f(dt,A,xe),Te===null?he=dt:Te.sibling=dt,Te=dt);return e&&fe.forEach(function(fa){return t(U,fa)}),Le&&Aa(U,xe),he}function ge(U,A,B,Y){if(B==null)throw Error(i(151));for(var he=null,Te=null,fe=A,xe=A=0,dt=null,Ue=B.next();fe!==null&&!Ue.done;xe++,Ue=B.next()){fe.index>xe?(dt=fe,fe=null):dt=fe.sibling;var fa=$(U,fe,Ue.value,Y);if(fa===null){fe===null&&(fe=dt);break}e&&fe&&fa.alternate===null&&t(U,fe),A=f(fa,A,xe),Te===null?he=fa:Te.sibling=fa,Te=fa,fe=dt}if(Ue.done)return r(U,fe),Le&&Aa(U,xe),he;if(fe===null){for(;!Ue.done;xe++,Ue=B.next())Ue=Z(U,Ue.value,Y),Ue!==null&&(A=f(Ue,A,xe),Te===null?he=Ue:Te.sibling=Ue,Te=Ue);return Le&&Aa(U,xe),he}for(fe=o(fe);!Ue.done;xe++,Ue=B.next())Ue=P(fe,U,xe,Ue.value,Y),Ue!==null&&(e&&Ue.alternate!==null&&fe.delete(Ue.key===null?xe:Ue.key),A=f(Ue,A,xe),Te===null?he=Ue:Te.sibling=Ue,Te=Ue);return e&&fe.forEach(function(sv){return t(U,sv)}),Le&&Aa(U,xe),he}function Ke(U,A,B,Y){if(typeof B=="object"&&B!==null&&B.type===S&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case j:e:{for(var he=B.key;A!==null;){if(A.key===he){if(he=B.type,he===S){if(A.tag===7){r(U,A.sibling),Y=d(A,B.props.children),Y.return=U,U=Y;break e}}else if(A.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===X&&Mf(he)===A.type){r(U,A.sibling),Y=d(A,B.props),qn(Y,B),Y.return=U,U=Y;break e}r(U,A);break}else t(U,A);A=A.sibling}B.type===S?(Y=Ca(B.props.children,U.mode,Y,B.key),Y.return=U,U=Y):(Y=Vl(B.type,B.key,B.props,null,U.mode,Y),qn(Y,B),Y.return=U,U=Y)}return y(U);case N:e:{for(he=B.key;A!==null;){if(A.key===he)if(A.tag===4&&A.stateNode.containerInfo===B.containerInfo&&A.stateNode.implementation===B.implementation){r(U,A.sibling),Y=d(A,B.children||[]),Y.return=U,U=Y;break e}else{r(U,A);break}else t(U,A);A=A.sibling}Y=Zo(B,U.mode,Y),Y.return=U,U=Y}return y(U);case X:return he=B._init,B=he(B._payload),Ke(U,A,B,Y)}if(oe(B))return ye(U,A,B,Y);if(ne(B)){if(he=ne(B),typeof he!="function")throw Error(i(150));return B=he.call(B),ge(U,A,B,Y)}if(typeof B.then=="function")return Ke(U,A,ci(B),Y);if(B.$$typeof===C)return Ke(U,A,Xl(U,B),Y);ui(U,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,A!==null&&A.tag===6?(r(U,A.sibling),Y=d(A,B),Y.return=U,U=Y):(r(U,A),Y=Xo(B,U.mode,Y),Y.return=U,U=Y),y(U)):r(U,A)}return function(U,A,B,Y){try{Bn=0;var he=Ke(U,A,B,Y);return _r=null,he}catch(fe){if(fe===Cn||fe===Jl)throw fe;var Te=Mt(29,fe,null,U.mode);return Te.lanes=Y,Te.return=U,Te}finally{}}}var kr=Of(!0),Rf=Of(!1),Yt=R(null),hs=null;function Js(e){var t=e.alternate;re(it,it.current&1),re(Yt,e),hs===null&&(t===null||wr.current!==null||t.memoizedState!==null)&&(hs=e)}function Uf(e){if(e.tag===22){if(re(it,it.current),re(Yt,e),hs===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(hs=e)}}else Ws()}function Ws(){re(it,it.current),re(Yt,Yt.current)}function Ds(e){W(Yt),hs===e&&(hs=null),W(it)}var it=R(0);function di(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||vu(r)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Dc(e,t,r,o){t=e.memoizedState,r=r(o,t),r=r==null?t:p({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ac={enqueueSetState:function(e,t,r){e=e._reactInternals;var o=Lt(),d=Fs(o);d.payload=t,r!=null&&(d.callback=r),t=Xs(e,d,o),t!==null&&(Ht(t,e,o),An(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var o=Lt(),d=Fs(o);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=Xs(e,d,o),t!==null&&(Ht(t,e,o),An(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Lt(),o=Fs(r);o.tag=2,t!=null&&(o.callback=t),t=Xs(e,o,r),t!==null&&(Ht(t,e,r),An(t,e,r))}};function Lf(e,t,r,o,d,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,y):t.prototype&&t.prototype.isPureReactComponent?!wn(r,o)||!wn(d,f):!0}function Hf(e,t,r,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==e&&Ac.enqueueReplaceState(t,t.state,null)}function Ba(e,t){var r=t;if("ref"in t){r={};for(var o in t)o!=="ref"&&(r[o]=t[o])}if(e=e.defaultProps){r===t&&(r=p({},r));for(var d in e)r[d]===void 0&&(r[d]=e[d])}return r}var hi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Bf(e){hi(e)}function qf(e){console.error(e)}function zf(e){hi(e)}function fi(e,t){try{var r=e.onUncaughtError;r(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function $f(e,t,r){try{var o=e.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Mc(e,t,r){return r=Fs(r),r.tag=3,r.payload={element:null},r.callback=function(){fi(e,t)},r}function Pf(e){return e=Fs(e),e.tag=3,e}function Kf(e,t,r,o){var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var f=o.value;e.payload=function(){return d(f)},e.callback=function(){$f(t,r,o)}}var y=r.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){$f(t,r,o),typeof d!="function"&&(na===null?na=new Set([this]):na.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})})}function sy(e,t,r,o,d){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=r.alternate,t!==null&&kn(t,r,d,!0),r=Yt.current,r!==null){switch(r.tag){case 13:return hs===null?su():r.alternate===null&&We===0&&(We=3),r.flags&=-257,r.flags|=65536,r.lanes=d,o===ic?r.flags|=16384:(t=r.updateQueue,t===null?r.updateQueue=new Set([o]):t.add(o),ru(e,o,d)),!1;case 22:return r.flags|=65536,o===ic?r.flags|=16384:(t=r.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=t):(r=t.retryQueue,r===null?t.retryQueue=new Set([o]):r.add(o)),ru(e,o,d)),!1}throw Error(i(435,r.tag))}return ru(e,o,d),su(),!1}if(Le)return t=Yt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,o!==ec&&(e=Error(i(422),{cause:o}),_n(Gt(e,r)))):(o!==ec&&(t=Error(i(423),{cause:o}),_n(Gt(t,r))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,o=Gt(o,r),d=Mc(e.stateNode,o,d),uc(e,d),We!==4&&(We=2)),!1;var f=Error(i(520),{cause:o});if(f=Gt(f,r),Vn===null?Vn=[f]:Vn.push(f),We!==4&&(We=2),t===null)return!0;o=Gt(o,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=d&-d,r.lanes|=e,e=Mc(r.stateNode,o,e),uc(r,e),!1;case 1:if(t=r.type,f=r.stateNode,(r.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(na===null||!na.has(f))))return r.flags|=65536,d&=-d,r.lanes|=d,d=Pf(d),Kf(d,e,r,o),uc(r,d),!1}r=r.return}while(r!==null);return!1}var Gf=Error(i(461)),ct=!1;function gt(e,t,r,o){t.child=e===null?Rf(t,null,r,o):kr(t,e.child,r,o)}function If(e,t,r,o,d){r=r.render;var f=t.ref;if("ref"in o){var y={};for(var w in o)w!=="ref"&&(y[w]=o[w])}else y=o;return Ua(t),o=gc(e,t,r,y,f,d),w=xc(),e!==null&&!ct?(pc(e,t,d),As(e,t,d)):(Le&&w&&Jo(t),t.flags|=1,gt(e,t,o,d),t.child)}function Vf(e,t,r,o,d){if(e===null){var f=r.type;return typeof f=="function"&&!Fo(f)&&f.defaultProps===void 0&&r.compare===null?(t.tag=15,t.type=f,Qf(e,t,f,o,d)):(e=Vl(r.type,null,o,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!zc(e,d)){var y=f.memoizedProps;if(r=r.compare,r=r!==null?r:wn,r(y,o)&&e.ref===t.ref)return As(e,t,d)}return t.flags|=1,e=Ss(f,o),e.ref=t.ref,e.return=t,t.child=e}function Qf(e,t,r,o,d){if(e!==null){var f=e.memoizedProps;if(wn(f,o)&&e.ref===t.ref)if(ct=!1,t.pendingProps=o=f,zc(e,d))(e.flags&131072)!==0&&(ct=!0);else return t.lanes=e.lanes,As(e,t,d)}return Oc(e,t,r,o,d)}function Yf(e,t,r){var o=t.pendingProps,d=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((t.flags&128)!==0){if(o=f!==null?f.baseLanes|r:r,e!==null){for(d=t.child=e.child,f=0;d!==null;)f=f|d.lanes|d.childLanes,d=d.sibling;t.childLanes=f&~o}else t.childLanes=0,t.child=null;return Ff(e,t,o,r)}if((r&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Zl(t,f!==null?f.cachePool:null),f!==null?Vh(t,f):hc(),Uf(t);else return t.lanes=t.childLanes=536870912,Ff(e,t,f!==null?f.baseLanes|r:r,r)}else f!==null?(Zl(t,f.cachePool),Vh(t,f),Ws(),t.memoizedState=null):(e!==null&&Zl(t,null),hc(),Ws());return gt(e,t,d,r),t.child}function Ff(e,t,r,o){var d=lc();return d=d===null?null:{parent:lt._currentValue,pool:d},t.memoizedState={baseLanes:r,cachePool:d},e!==null&&Zl(t,null),hc(),Uf(t),e!==null&&kn(e,t,o,!0),null}function mi(e,t){var r=t.ref;if(r===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(e===null||e.ref!==r)&&(t.flags|=4194816)}}function Oc(e,t,r,o,d){return Ua(t),r=gc(e,t,r,o,void 0,d),o=xc(),e!==null&&!ct?(pc(e,t,d),As(e,t,d)):(Le&&o&&Jo(t),t.flags|=1,gt(e,t,r,d),t.child)}function Xf(e,t,r,o,d,f){return Ua(t),t.updateQueue=null,r=Yh(t,o,r,d),Qh(e),o=xc(),e!==null&&!ct?(pc(e,t,f),As(e,t,f)):(Le&&o&&Jo(t),t.flags|=1,gt(e,t,r,f),t.child)}function Zf(e,t,r,o,d){if(Ua(t),t.stateNode===null){var f=xr,y=r.contextType;typeof y=="object"&&y!==null&&(f=vt(y)),f=new r(o,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Ac,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=o,f.state=t.memoizedState,f.refs={},oc(t),y=r.contextType,f.context=typeof y=="object"&&y!==null?vt(y):xr,f.state=t.memoizedState,y=r.getDerivedStateFromProps,typeof y=="function"&&(Dc(t,r,y,o),f.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(y=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),y!==f.state&&Ac.enqueueReplaceState(f,f.state,null),On(t,o,f,d),Mn(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){f=t.stateNode;var w=t.memoizedProps,k=Ba(r,w);f.props=k;var q=f.context,V=r.contextType;y=xr,typeof V=="object"&&V!==null&&(y=vt(V));var Z=r.getDerivedStateFromProps;V=typeof Z=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=t.pendingProps!==w,V||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||q!==y)&&Hf(t,f,o,y),Ys=!1;var $=t.memoizedState;f.state=$,On(t,o,f,d),Mn(),q=t.memoizedState,w||$!==q||Ys?(typeof Z=="function"&&(Dc(t,r,Z,o),q=t.memoizedState),(k=Ys||Lf(t,r,k,o,$,q,y))?(V||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=q),f.props=o,f.state=q,f.context=y,o=k):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{f=t.stateNode,cc(e,t),y=t.memoizedProps,V=Ba(r,y),f.props=V,Z=t.pendingProps,$=f.context,q=r.contextType,k=xr,typeof q=="object"&&q!==null&&(k=vt(q)),w=r.getDerivedStateFromProps,(q=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==Z||$!==k)&&Hf(t,f,o,k),Ys=!1,$=t.memoizedState,f.state=$,On(t,o,f,d),Mn();var P=t.memoizedState;y!==Z||$!==P||Ys||e!==null&&e.dependencies!==null&&Fl(e.dependencies)?(typeof w=="function"&&(Dc(t,r,w,o),P=t.memoizedState),(V=Ys||Lf(t,r,V,o,$,P,k)||e!==null&&e.dependencies!==null&&Fl(e.dependencies))?(q||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,P,k),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,P,k)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=P),f.props=o,f.state=P,f.context=k,o=V):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),o=!1)}return f=o,mi(e,t),o=(t.flags&128)!==0,f||o?(f=t.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&o?(t.child=kr(t,e.child,null,d),t.child=kr(t,null,r,d)):gt(e,t,r,d),t.memoizedState=f.state,e=t.child):e=As(e,t,d),e}function Jf(e,t,r,o){return Sn(),t.flags|=256,gt(e,t,r,o),t.child}var Rc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uc(e){return{baseLanes:e,cachePool:Bh()}}function Lc(e,t,r){return e=e!==null?e.childLanes&~r:0,t&&(e|=Ft),e}function Wf(e,t,r){var o=t.pendingProps,d=!1,f=(t.flags&128)!==0,y;if((y=f)||(y=e!==null&&e.memoizedState===null?!1:(it.current&2)!==0),y&&(d=!0,t.flags&=-129),y=(t.flags&32)!==0,t.flags&=-33,e===null){if(Le){if(d?Js(t):Ws(),Le){var w=Je,k;if(k=w){e:{for(k=w,w=ds;k.nodeType!==8;){if(!w){w=null;break e}if(k=as(k.nextSibling),k===null){w=null;break e}}w=k}w!==null?(t.memoizedState={dehydrated:w,treeContext:Da!==null?{id:_s,overflow:ks}:null,retryLane:536870912,hydrationErrors:null},k=Mt(18,null,null,0),k.stateNode=w,k.return=t,t.child=k,jt=t,Je=null,k=!0):k=!1}k||Oa(t)}if(w=t.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return vu(w)?t.lanes=32:t.lanes=536870912,null;Ds(t)}return w=o.children,o=o.fallback,d?(Ws(),d=t.mode,w=gi({mode:"hidden",children:w},d),o=Ca(o,d,r,null),w.return=t,o.return=t,w.sibling=o,t.child=w,d=t.child,d.memoizedState=Uc(r),d.childLanes=Lc(e,y,r),t.memoizedState=Rc,o):(Js(t),Hc(t,w))}if(k=e.memoizedState,k!==null&&(w=k.dehydrated,w!==null)){if(f)t.flags&256?(Js(t),t.flags&=-257,t=Bc(e,t,r)):t.memoizedState!==null?(Ws(),t.child=e.child,t.flags|=128,t=null):(Ws(),d=o.fallback,w=t.mode,o=gi({mode:"visible",children:o.children},w),d=Ca(d,w,r,null),d.flags|=2,o.return=t,d.return=t,o.sibling=d,t.child=o,kr(t,e.child,null,r),o=t.child,o.memoizedState=Uc(r),o.childLanes=Lc(e,y,r),t.memoizedState=Rc,t=d);else if(Js(t),vu(w)){if(y=w.nextSibling&&w.nextSibling.dataset,y)var q=y.dgst;y=q,o=Error(i(419)),o.stack="",o.digest=y,_n({value:o,source:null,stack:null}),t=Bc(e,t,r)}else if(ct||kn(e,t,r,!1),y=(r&e.childLanes)!==0,ct||y){if(y=Ve,y!==null&&(o=r&-r,o=(o&42)!==0?1:bo(o),o=(o&(y.suspendedLanes|r))!==0?0:o,o!==0&&o!==k.retryLane))throw k.retryLane=o,gr(e,o),Ht(y,e,o),Gf;w.data==="$?"||su(),t=Bc(e,t,r)}else w.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=k.treeContext,Je=as(w.nextSibling),jt=t,Le=!0,Ma=null,ds=!1,e!==null&&(Vt[Qt++]=_s,Vt[Qt++]=ks,Vt[Qt++]=Da,_s=e.id,ks=e.overflow,Da=t),t=Hc(t,o.children),t.flags|=4096);return t}return d?(Ws(),d=o.fallback,w=t.mode,k=e.child,q=k.sibling,o=Ss(k,{mode:"hidden",children:o.children}),o.subtreeFlags=k.subtreeFlags&65011712,q!==null?d=Ss(q,d):(d=Ca(d,w,r,null),d.flags|=2),d.return=t,o.return=t,o.sibling=d,t.child=o,o=d,d=t.child,w=e.child.memoizedState,w===null?w=Uc(r):(k=w.cachePool,k!==null?(q=lt._currentValue,k=k.parent!==q?{parent:q,pool:q}:k):k=Bh(),w={baseLanes:w.baseLanes|r,cachePool:k}),d.memoizedState=w,d.childLanes=Lc(e,y,r),t.memoizedState=Rc,o):(Js(t),r=e.child,e=r.sibling,r=Ss(r,{mode:"visible",children:o.children}),r.return=t,r.sibling=null,e!==null&&(y=t.deletions,y===null?(t.deletions=[e],t.flags|=16):y.push(e)),t.child=r,t.memoizedState=null,r)}function Hc(e,t){return t=gi({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function gi(e,t){return e=Mt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Bc(e,t,r){return kr(t,e.child,null,r),e=Hc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function em(e,t,r){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),sc(e.return,t,r)}function qc(e,t,r,o,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:d}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=r,f.tailMode=d)}function tm(e,t,r){var o=t.pendingProps,d=o.revealOrder,f=o.tail;if(gt(e,t,o.children,r),o=it.current,(o&2)!==0)o=o&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&em(e,r,t);else if(e.tag===19)em(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(re(it,o),d){case"forwards":for(r=t.child,d=null;r!==null;)e=r.alternate,e!==null&&di(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=t.child,t.child=null):(d=r.sibling,r.sibling=null),qc(t,!1,d,r,f);break;case"backwards":for(r=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&di(e)===null){t.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}qc(t,!0,r,null,f);break;case"together":qc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function As(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ra|=t.lanes,(r&t.childLanes)===0)if(e!==null){if(kn(e,t,r,!1),(r&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,r=Ss(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ss(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function zc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Fl(e)))}function ay(e,t,r){switch(t.tag){case 3:Be(t,t.stateNode.containerInfo),Qs(t,lt,e.memoizedState.cache),Sn();break;case 27:case 5:Ja(t);break;case 4:Be(t,t.stateNode.containerInfo);break;case 10:Qs(t,t.type,t.memoizedProps.value);break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(Js(t),t.flags|=128,null):(r&t.child.childLanes)!==0?Wf(e,t,r):(Js(t),e=As(e,t,r),e!==null?e.sibling:null);Js(t);break;case 19:var d=(e.flags&128)!==0;if(o=(r&t.childLanes)!==0,o||(kn(e,t,r,!1),o=(r&t.childLanes)!==0),d){if(o)return tm(e,t,r);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),re(it,it.current),o)break;return null;case 22:case 23:return t.lanes=0,Yf(e,t,r);case 24:Qs(t,lt,e.memoizedState.cache)}return As(e,t,r)}function sm(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps)ct=!0;else{if(!zc(e,r)&&(t.flags&128)===0)return ct=!1,ay(e,t,r);ct=(e.flags&131072)!==0}else ct=!1,Le&&(t.flags&1048576)!==0&&Ah(t,Yl,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var o=t.elementType,d=o._init;if(o=d(o._payload),t.type=o,typeof o=="function")Fo(o)?(e=Ba(o,e),t.tag=1,t=Zf(null,t,o,e,r)):(t.tag=0,t=Oc(null,t,o,e,r));else{if(o!=null){if(d=o.$$typeof,d===G){t.tag=11,t=If(null,t,o,e,r);break e}else if(d===O){t.tag=14,t=Vf(null,t,o,e,r);break e}}throw t=se(o)||o,Error(i(306,t,""))}}return t;case 0:return Oc(e,t,t.type,t.pendingProps,r);case 1:return o=t.type,d=Ba(o,t.pendingProps),Zf(e,t,o,d,r);case 3:e:{if(Be(t,t.stateNode.containerInfo),e===null)throw Error(i(387));o=t.pendingProps;var f=t.memoizedState;d=f.element,cc(e,t),On(t,o,null,r);var y=t.memoizedState;if(o=y.cache,Qs(t,lt,o),o!==f.cache&&ac(t,[lt],r,!0),Mn(),o=y.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:y.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=Jf(e,t,o,r);break e}else if(o!==d){d=Gt(Error(i(424)),t),_n(d),t=Jf(e,t,o,r);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Je=as(e.firstChild),jt=t,Le=!0,Ma=null,ds=!0,r=Rf(t,null,o,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Sn(),o===d){t=As(e,t,r);break e}gt(e,t,o,r)}t=t.child}return t;case 26:return mi(e,t),e===null?(r=l0(t.type,null,t.pendingProps,null))?t.memoizedState=r:Le||(r=t.type,e=t.pendingProps,o=Ci(pe.current).createElement(r),o[yt]=t,o[_t]=e,pt(o,r,e),ot(o),t.stateNode=o):t.memoizedState=l0(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ja(t),e===null&&Le&&(o=t.stateNode=a0(t.type,t.pendingProps,pe.current),jt=t,ds=!0,d=Je,oa(t.type)?(bu=d,Je=as(o.firstChild)):Je=d),gt(e,t,t.pendingProps.children,r),mi(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Le&&((d=o=Je)&&(o=Ay(o,t.type,t.pendingProps,ds),o!==null?(t.stateNode=o,jt=t,Je=as(o.firstChild),ds=!1,d=!0):d=!1),d||Oa(t)),Ja(t),d=t.type,f=t.pendingProps,y=e!==null?e.memoizedProps:null,o=f.children,xu(d,f)?o=null:y!==null&&xu(d,y)&&(t.flags|=32),t.memoizedState!==null&&(d=gc(e,t,Fp,null,null,r),tl._currentValue=d),mi(e,t),gt(e,t,o,r),t.child;case 6:return e===null&&Le&&((e=r=Je)&&(r=My(r,t.pendingProps,ds),r!==null?(t.stateNode=r,jt=t,Je=null,e=!0):e=!1),e||Oa(t)),null;case 13:return Wf(e,t,r);case 4:return Be(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=kr(t,null,o,r):gt(e,t,o,r),t.child;case 11:return If(e,t,t.type,t.pendingProps,r);case 7:return gt(e,t,t.pendingProps,r),t.child;case 8:return gt(e,t,t.pendingProps.children,r),t.child;case 12:return gt(e,t,t.pendingProps.children,r),t.child;case 10:return o=t.pendingProps,Qs(t,t.type,o.value),gt(e,t,o.children,r),t.child;case 9:return d=t.type._context,o=t.pendingProps.children,Ua(t),d=vt(d),o=o(d),t.flags|=1,gt(e,t,o,r),t.child;case 14:return Vf(e,t,t.type,t.pendingProps,r);case 15:return Qf(e,t,t.type,t.pendingProps,r);case 19:return tm(e,t,r);case 31:return o=t.pendingProps,r=t.mode,o={mode:o.mode,children:o.children},e===null?(r=gi(o,r),r.ref=t.ref,t.child=r,r.return=t,t=r):(r=Ss(e.child,o),r.ref=t.ref,t.child=r,r.return=t,t=r),t;case 22:return Yf(e,t,r);case 24:return Ua(t),o=vt(lt),e===null?(d=lc(),d===null&&(d=Ve,f=rc(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=r),d=f),t.memoizedState={parent:o,cache:d},oc(t),Qs(t,lt,d)):((e.lanes&r)!==0&&(cc(e,t),On(t,null,null,r),Mn()),d=e.memoizedState,f=t.memoizedState,d.parent!==o?(d={parent:o,cache:o},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),Qs(t,lt,o)):(o=f.cache,Qs(t,lt,o),o!==d.cache&&ac(t,[lt],r,!0))),gt(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Ms(e){e.flags|=4}function am(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!d0(t)){if(t=Yt.current,t!==null&&((Oe&4194048)===Oe?hs!==null:(Oe&62914560)!==Oe&&(Oe&536870912)===0||t!==hs))throw Dn=ic,qh;e.flags|=8192}}function xi(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Rd():536870912,e.lanes|=t,Dr|=t)}function zn(e,t){if(!Le)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(t)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=o,e.childLanes=r,t}function ry(e,t,r){var o=t.pendingProps;switch(Wo(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(t),null;case 1:return Ze(t),null;case 3:return r=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),Es(lt),zt(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Nn(t)?Ms(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Rh())),Ze(t),null;case 26:return r=t.memoizedState,e===null?(Ms(t),r!==null?(Ze(t),am(t,r)):(Ze(t),t.flags&=-16777217)):r?r!==e.memoizedState?(Ms(t),Ze(t),am(t,r)):(Ze(t),t.flags&=-16777217):(e.memoizedProps!==o&&Ms(t),Ze(t),t.flags&=-16777217),null;case 27:us(t),r=pe.current;var d=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==o&&Ms(t);else{if(!o){if(t.stateNode===null)throw Error(i(166));return Ze(t),null}e=ue.current,Nn(t)?Mh(t):(e=a0(d,o,r),t.stateNode=e,Ms(t))}return Ze(t),null;case 5:if(us(t),r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&Ms(t);else{if(!o){if(t.stateNode===null)throw Error(i(166));return Ze(t),null}if(e=ue.current,Nn(t))Mh(t);else{switch(d=Ci(pe.current),e){case 1:e=d.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:e=d.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":e=d.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":e=d.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?d.createElement("select",{is:o.is}):d.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?d.createElement(r,{is:o.is}):d.createElement(r)}}e[yt]=t,e[_t]=o;e:for(d=t.child;d!==null;){if(d.tag===5||d.tag===6)e.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}t.stateNode=e;e:switch(pt(e,r,o),r){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ms(t)}}return Ze(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&Ms(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(i(166));if(e=pe.current,Nn(t)){if(e=t.stateNode,r=t.memoizedProps,o=null,d=jt,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}e[yt]=t,e=!!(e.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||Xm(e.nodeValue,r)),e||Oa(t)}else e=Ci(e).createTextNode(o),e[yt]=t,t.stateNode=e}return Ze(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Nn(t),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(i(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[yt]=t}else Sn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ze(t),d=!1}else d=Rh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(Ds(t),t):(Ds(t),null)}if(Ds(t),(t.flags&128)!==0)return t.lanes=r,t;if(r=o!==null,e=e!==null&&e.memoizedState!==null,r){o=t.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==d&&(o.flags|=2048)}return r!==e&&r&&(t.child.flags|=8192),xi(t,t.updateQueue),Ze(t),null;case 4:return zt(),e===null&&du(t.stateNode.containerInfo),Ze(t),null;case 10:return Es(t.type),Ze(t),null;case 19:if(W(it),d=t.memoizedState,d===null)return Ze(t),null;if(o=(t.flags&128)!==0,f=d.rendering,f===null)if(o)zn(d,!1);else{if(We!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=di(e),f!==null){for(t.flags|=128,zn(d,!1),e=f.updateQueue,t.updateQueue=e,xi(t,e),t.subtreeFlags=0,e=r,r=t.child;r!==null;)Dh(r,e),r=r.sibling;return re(it,it.current&1|2),t.child}e=e.sibling}d.tail!==null&&tt()>vi&&(t.flags|=128,o=!0,zn(d,!1),t.lanes=4194304)}else{if(!o)if(e=di(f),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,xi(t,e),zn(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!Le)return Ze(t),null}else 2*tt()-d.renderingStartTime>vi&&r!==536870912&&(t.flags|=128,o=!0,zn(d,!1),t.lanes=4194304);d.isBackwards?(f.sibling=t.child,t.child=f):(e=d.last,e!==null?e.sibling=f:t.child=f,d.last=f)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=tt(),t.sibling=null,e=it.current,re(it,o?e&1|2:e&1),t):(Ze(t),null);case 22:case 23:return Ds(t),fc(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(r&536870912)!==0&&(t.flags&128)===0&&(Ze(t),t.subtreeFlags&6&&(t.flags|=8192)):Ze(t),r=t.updateQueue,r!==null&&xi(t,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==r&&(t.flags|=2048),e!==null&&W(La),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Es(lt),Ze(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function ny(e,t){switch(Wo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Es(lt),zt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return us(t),null;case 13:if(Ds(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Sn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return W(it),null;case 4:return zt(),null;case 10:return Es(t.type),null;case 22:case 23:return Ds(t),fc(),e!==null&&W(La),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Es(lt),null;case 25:return null;default:return null}}function rm(e,t){switch(Wo(t),t.tag){case 3:Es(lt),zt();break;case 26:case 27:case 5:us(t);break;case 4:zt();break;case 13:Ds(t);break;case 19:W(it);break;case 10:Es(t.type);break;case 22:case 23:Ds(t),fc(),e!==null&&W(La);break;case 24:Es(lt)}}function $n(e,t){try{var r=t.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var d=o.next;r=d;do{if((r.tag&e)===e){o=void 0;var f=r.create,y=r.inst;o=f(),y.destroy=o}r=r.next}while(r!==d)}}catch(w){Ie(t,t.return,w)}}function ea(e,t,r){try{var o=t.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var f=d.next;o=f;do{if((o.tag&e)===e){var y=o.inst,w=y.destroy;if(w!==void 0){y.destroy=void 0,d=t;var k=r,q=w;try{q()}catch(V){Ie(d,k,V)}}}o=o.next}while(o!==f)}}catch(V){Ie(t,t.return,V)}}function nm(e){var t=e.updateQueue;if(t!==null){var r=e.stateNode;try{Ih(t,r)}catch(o){Ie(e,e.return,o)}}}function lm(e,t,r){r.props=Ba(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(o){Ie(e,t,o)}}function Pn(e,t){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof r=="function"?e.refCleanup=r(o):r.current=o}}catch(d){Ie(e,t,d)}}function fs(e,t){var r=e.ref,o=e.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(d){Ie(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(d){Ie(e,t,d)}else r.current=null}function im(e){var t=e.type,r=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(d){Ie(e,e.return,d)}}function $c(e,t,r){try{var o=e.stateNode;ky(o,e.type,r,t),o[_t]=t}catch(d){Ie(e,e.return,d)}}function om(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&oa(e.type)||e.tag===4}function Pc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||om(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&oa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Kc(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,t):(t=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,t.appendChild(e),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ei));else if(o!==4&&(o===27&&oa(e.type)&&(r=e.stateNode,t=null),e=e.child,e!==null))for(Kc(e,t,r),e=e.sibling;e!==null;)Kc(e,t,r),e=e.sibling}function pi(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(o!==4&&(o===27&&oa(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(pi(e,t,r),e=e.sibling;e!==null;)pi(e,t,r),e=e.sibling}function cm(e){var t=e.stateNode,r=e.memoizedProps;try{for(var o=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);pt(t,o,r),t[yt]=e,t[_t]=r}catch(f){Ie(e,e.return,f)}}var Os=!1,at=!1,Gc=!1,um=typeof WeakSet=="function"?WeakSet:Set,ut=null;function ly(e,t){if(e=e.containerInfo,mu=Ui,e=bh(e),Po(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var d=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var y=0,w=-1,k=-1,q=0,V=0,Z=e,$=null;t:for(;;){for(var P;Z!==r||d!==0&&Z.nodeType!==3||(w=y+d),Z!==f||o!==0&&Z.nodeType!==3||(k=y+o),Z.nodeType===3&&(y+=Z.nodeValue.length),(P=Z.firstChild)!==null;)$=Z,Z=P;for(;;){if(Z===e)break t;if($===r&&++q===d&&(w=y),$===f&&++V===o&&(k=y),(P=Z.nextSibling)!==null)break;Z=$,$=Z.parentNode}Z=P}r=w===-1||k===-1?null:{start:w,end:k}}else r=null}r=r||{start:0,end:0}}else r=null;for(gu={focusedElem:e,selectionRange:r},Ui=!1,ut=t;ut!==null;)if(t=ut,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,ut=e;else for(;ut!==null;){switch(t=ut,f=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,r=t,d=f.memoizedProps,f=f.memoizedState,o=r.stateNode;try{var ye=Ba(r.type,d,r.elementType===r.type);e=o.getSnapshotBeforeUpdate(ye,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(ge){Ie(r,r.return,ge)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,r=e.nodeType,r===9)yu(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":yu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,ut=e;break}ut=t.return}}function dm(e,t,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:ta(e,r),o&4&&$n(5,r);break;case 1:if(ta(e,r),o&4)if(e=r.stateNode,t===null)try{e.componentDidMount()}catch(y){Ie(r,r.return,y)}else{var d=Ba(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(y){Ie(r,r.return,y)}}o&64&&nm(r),o&512&&Pn(r,r.return);break;case 3:if(ta(e,r),o&64&&(e=r.updateQueue,e!==null)){if(t=null,r.child!==null)switch(r.child.tag){case 27:case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}try{Ih(e,t)}catch(y){Ie(r,r.return,y)}}break;case 27:t===null&&o&4&&cm(r);case 26:case 5:ta(e,r),t===null&&o&4&&im(r),o&512&&Pn(r,r.return);break;case 12:ta(e,r);break;case 13:ta(e,r),o&4&&mm(e,r),o&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=gy.bind(null,r),Oy(e,r))));break;case 22:if(o=r.memoizedState!==null||Os,!o){t=t!==null&&t.memoizedState!==null||at,d=Os;var f=at;Os=o,(at=t)&&!f?sa(e,r,(r.subtreeFlags&8772)!==0):ta(e,r),Os=d,at=f}break;case 30:break;default:ta(e,r)}}function hm(e){var t=e.alternate;t!==null&&(e.alternate=null,hm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&No(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Fe=null,Et=!1;function Rs(e,t,r){for(r=r.child;r!==null;)fm(e,t,r),r=r.sibling}function fm(e,t,r){if(ce&&typeof ce.onCommitFiberUnmount=="function")try{ce.onCommitFiberUnmount(be,r)}catch{}switch(r.tag){case 26:at||fs(r,t),Rs(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:at||fs(r,t);var o=Fe,d=Et;oa(r.type)&&(Fe=r.stateNode,Et=!1),Rs(e,t,r),Zn(r.stateNode),Fe=o,Et=d;break;case 5:at||fs(r,t);case 6:if(o=Fe,d=Et,Fe=null,Rs(e,t,r),Fe=o,Et=d,Fe!==null)if(Et)try{(Fe.nodeType===9?Fe.body:Fe.nodeName==="HTML"?Fe.ownerDocument.body:Fe).removeChild(r.stateNode)}catch(f){Ie(r,t,f)}else try{Fe.removeChild(r.stateNode)}catch(f){Ie(r,t,f)}break;case 18:Fe!==null&&(Et?(e=Fe,t0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),nl(e)):t0(Fe,r.stateNode));break;case 4:o=Fe,d=Et,Fe=r.stateNode.containerInfo,Et=!0,Rs(e,t,r),Fe=o,Et=d;break;case 0:case 11:case 14:case 15:at||ea(2,r,t),at||ea(4,r,t),Rs(e,t,r);break;case 1:at||(fs(r,t),o=r.stateNode,typeof o.componentWillUnmount=="function"&&lm(r,t,o)),Rs(e,t,r);break;case 21:Rs(e,t,r);break;case 22:at=(o=at)||r.memoizedState!==null,Rs(e,t,r),at=o;break;default:Rs(e,t,r)}}function mm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{nl(e)}catch(r){Ie(t,t.return,r)}}function iy(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new um),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new um),t;default:throw Error(i(435,e.tag))}}function Ic(e,t){var r=iy(e);t.forEach(function(o){var d=xy.bind(null,e,o);r.has(o)||(r.add(o),o.then(d,d))})}function Ot(e,t){var r=t.deletions;if(r!==null)for(var o=0;o<r.length;o++){var d=r[o],f=e,y=t,w=y;e:for(;w!==null;){switch(w.tag){case 27:if(oa(w.type)){Fe=w.stateNode,Et=!1;break e}break;case 5:Fe=w.stateNode,Et=!1;break e;case 3:case 4:Fe=w.stateNode.containerInfo,Et=!0;break e}w=w.return}if(Fe===null)throw Error(i(160));fm(f,y,d),Fe=null,Et=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)gm(t,e),t=t.sibling}var ss=null;function gm(e,t){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ot(t,e),Rt(e),o&4&&(ea(3,e,e.return),$n(3,e),ea(5,e,e.return));break;case 1:Ot(t,e),Rt(e),o&512&&(at||r===null||fs(r,r.return)),o&64&&Os&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var d=ss;if(Ot(t,e),Rt(e),o&512&&(at||r===null||fs(r,r.return)),o&4){var f=r!==null?r.memoizedState:null;if(o=e.memoizedState,r===null)if(o===null)if(e.stateNode===null){e:{o=e.type,r=e.memoizedProps,d=d.ownerDocument||d;t:switch(o){case"title":f=d.getElementsByTagName("title")[0],(!f||f[hn]||f[yt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(o),d.head.insertBefore(f,d.querySelector("head > title"))),pt(f,o,r),f[yt]=e,ot(f),o=f;break e;case"link":var y=c0("link","href",d).get(o+(r.href||""));if(y){for(var w=0;w<y.length;w++)if(f=y[w],f.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&f.getAttribute("rel")===(r.rel==null?null:r.rel)&&f.getAttribute("title")===(r.title==null?null:r.title)&&f.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){y.splice(w,1);break t}}f=d.createElement(o),pt(f,o,r),d.head.appendChild(f);break;case"meta":if(y=c0("meta","content",d).get(o+(r.content||""))){for(w=0;w<y.length;w++)if(f=y[w],f.getAttribute("content")===(r.content==null?null:""+r.content)&&f.getAttribute("name")===(r.name==null?null:r.name)&&f.getAttribute("property")===(r.property==null?null:r.property)&&f.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&f.getAttribute("charset")===(r.charSet==null?null:r.charSet)){y.splice(w,1);break t}}f=d.createElement(o),pt(f,o,r),d.head.appendChild(f);break;default:throw Error(i(468,o))}f[yt]=e,ot(f),o=f}e.stateNode=o}else u0(d,e.type,e.stateNode);else e.stateNode=o0(d,o,e.memoizedProps);else f!==o?(f===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):f.count--,o===null?u0(d,e.type,e.stateNode):o0(d,o,e.memoizedProps)):o===null&&e.stateNode!==null&&$c(e,e.memoizedProps,r.memoizedProps)}break;case 27:Ot(t,e),Rt(e),o&512&&(at||r===null||fs(r,r.return)),r!==null&&o&4&&$c(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Ot(t,e),Rt(e),o&512&&(at||r===null||fs(r,r.return)),e.flags&32){d=e.stateNode;try{or(d,"")}catch(P){Ie(e,e.return,P)}}o&4&&e.stateNode!=null&&(d=e.memoizedProps,$c(e,d,r!==null?r.memoizedProps:d)),o&1024&&(Gc=!0);break;case 6:if(Ot(t,e),Rt(e),o&4){if(e.stateNode===null)throw Error(i(162));o=e.memoizedProps,r=e.stateNode;try{r.nodeValue=o}catch(P){Ie(e,e.return,P)}}break;case 3:if(Mi=null,d=ss,ss=Di(t.containerInfo),Ot(t,e),ss=d,Rt(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{nl(t.containerInfo)}catch(P){Ie(e,e.return,P)}Gc&&(Gc=!1,xm(e));break;case 4:o=ss,ss=Di(e.stateNode.containerInfo),Ot(t,e),Rt(e),ss=o;break;case 12:Ot(t,e),Rt(e);break;case 13:Ot(t,e),Rt(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Zc=tt()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ic(e,o)));break;case 22:d=e.memoizedState!==null;var k=r!==null&&r.memoizedState!==null,q=Os,V=at;if(Os=q||d,at=V||k,Ot(t,e),at=V,Os=q,Rt(e),o&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(r===null||k||Os||at||qa(e)),r=null,t=e;;){if(t.tag===5||t.tag===26){if(r===null){k=r=t;try{if(f=k.stateNode,d)y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{w=k.stateNode;var Z=k.memoizedProps.style,$=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;w.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(P){Ie(k,k.return,P)}}}else if(t.tag===6){if(r===null){k=t;try{k.stateNode.nodeValue=d?"":k.memoizedProps}catch(P){Ie(k,k.return,P)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,Ic(e,r))));break;case 19:Ot(t,e),Rt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ic(e,o)));break;case 30:break;case 21:break;default:Ot(t,e),Rt(e)}}function Rt(e){var t=e.flags;if(t&2){try{for(var r,o=e.return;o!==null;){if(om(o)){r=o;break}o=o.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var d=r.stateNode,f=Pc(e);pi(e,f,d);break;case 5:var y=r.stateNode;r.flags&32&&(or(y,""),r.flags&=-33);var w=Pc(e);pi(e,w,y);break;case 3:case 4:var k=r.stateNode.containerInfo,q=Pc(e);Kc(e,q,k);break;default:throw Error(i(161))}}catch(V){Ie(e,e.return,V)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function xm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;xm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ta(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)dm(e,t.alternate,t),t=t.sibling}function qa(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ea(4,t,t.return),qa(t);break;case 1:fs(t,t.return);var r=t.stateNode;typeof r.componentWillUnmount=="function"&&lm(t,t.return,r),qa(t);break;case 27:Zn(t.stateNode);case 26:case 5:fs(t,t.return),qa(t);break;case 22:t.memoizedState===null&&qa(t);break;case 30:qa(t);break;default:qa(t)}e=e.sibling}}function sa(e,t,r){for(r=r&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,d=e,f=t,y=f.flags;switch(f.tag){case 0:case 11:case 15:sa(d,f,r),$n(4,f);break;case 1:if(sa(d,f,r),o=f,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(q){Ie(o,o.return,q)}if(o=f,d=o.updateQueue,d!==null){var w=o.stateNode;try{var k=d.shared.hiddenCallbacks;if(k!==null)for(d.shared.hiddenCallbacks=null,d=0;d<k.length;d++)Gh(k[d],w)}catch(q){Ie(o,o.return,q)}}r&&y&64&&nm(f),Pn(f,f.return);break;case 27:cm(f);case 26:case 5:sa(d,f,r),r&&o===null&&y&4&&im(f),Pn(f,f.return);break;case 12:sa(d,f,r);break;case 13:sa(d,f,r),r&&y&4&&mm(d,f);break;case 22:f.memoizedState===null&&sa(d,f,r),Pn(f,f.return);break;case 30:break;default:sa(d,f,r)}t=t.sibling}}function Vc(e,t){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Tn(r))}function Qc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Tn(e))}function ms(e,t,r,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)pm(e,t,r,o),t=t.sibling}function pm(e,t,r,o){var d=t.flags;switch(t.tag){case 0:case 11:case 15:ms(e,t,r,o),d&2048&&$n(9,t);break;case 1:ms(e,t,r,o);break;case 3:ms(e,t,r,o),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Tn(e)));break;case 12:if(d&2048){ms(e,t,r,o),e=t.stateNode;try{var f=t.memoizedProps,y=f.id,w=f.onPostCommit;typeof w=="function"&&w(y,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){Ie(t,t.return,k)}}else ms(e,t,r,o);break;case 13:ms(e,t,r,o);break;case 23:break;case 22:f=t.stateNode,y=t.alternate,t.memoizedState!==null?f._visibility&2?ms(e,t,r,o):Kn(e,t):f._visibility&2?ms(e,t,r,o):(f._visibility|=2,Tr(e,t,r,o,(t.subtreeFlags&10256)!==0)),d&2048&&Vc(y,t);break;case 24:ms(e,t,r,o),d&2048&&Qc(t.alternate,t);break;default:ms(e,t,r,o)}}function Tr(e,t,r,o,d){for(d=d&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var f=e,y=t,w=r,k=o,q=y.flags;switch(y.tag){case 0:case 11:case 15:Tr(f,y,w,k,d),$n(8,y);break;case 23:break;case 22:var V=y.stateNode;y.memoizedState!==null?V._visibility&2?Tr(f,y,w,k,d):Kn(f,y):(V._visibility|=2,Tr(f,y,w,k,d)),d&&q&2048&&Vc(y.alternate,y);break;case 24:Tr(f,y,w,k,d),d&&q&2048&&Qc(y.alternate,y);break;default:Tr(f,y,w,k,d)}t=t.sibling}}function Kn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var r=e,o=t,d=o.flags;switch(o.tag){case 22:Kn(r,o),d&2048&&Vc(o.alternate,o);break;case 24:Kn(r,o),d&2048&&Qc(o.alternate,o);break;default:Kn(r,o)}t=t.sibling}}var Gn=8192;function Er(e){if(e.subtreeFlags&Gn)for(e=e.child;e!==null;)ym(e),e=e.sibling}function ym(e){switch(e.tag){case 26:Er(e),e.flags&Gn&&e.memoizedState!==null&&Vy(ss,e.memoizedState,e.memoizedProps);break;case 5:Er(e);break;case 3:case 4:var t=ss;ss=Di(e.stateNode.containerInfo),Er(e),ss=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Gn,Gn=16777216,Er(e),Gn=t):Er(e));break;default:Er(e)}}function vm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function In(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var o=t[r];ut=o,wm(o,e)}vm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)bm(e),e=e.sibling}function bm(e){switch(e.tag){case 0:case 11:case 15:In(e),e.flags&2048&&ea(9,e,e.return);break;case 3:In(e);break;case 12:In(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,yi(e)):In(e);break;default:In(e)}}function yi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var o=t[r];ut=o,wm(o,e)}vm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ea(8,t,t.return),yi(t);break;case 22:r=t.stateNode,r._visibility&2&&(r._visibility&=-3,yi(t));break;default:yi(t)}e=e.sibling}}function wm(e,t){for(;ut!==null;){var r=ut;switch(r.tag){case 0:case 11:case 15:ea(8,r,t);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Tn(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,ut=o;else e:for(r=e;ut!==null;){o=ut;var d=o.sibling,f=o.return;if(hm(o),o===r){ut=null;break e}if(d!==null){d.return=f,ut=d;break e}ut=f}}}var oy={getCacheForType:function(e){var t=vt(lt),r=t.data.get(e);return r===void 0&&(r=e(),t.data.set(e,r)),r}},cy=typeof WeakMap=="function"?WeakMap:Map,qe=0,Ve=null,De=null,Oe=0,ze=0,Ut=null,aa=!1,Cr=!1,Yc=!1,Us=0,We=0,ra=0,za=0,Fc=0,Ft=0,Dr=0,Vn=null,Ct=null,Xc=!1,Zc=0,vi=1/0,bi=null,na=null,xt=0,la=null,Ar=null,Mr=0,Jc=0,Wc=null,jm=null,Qn=0,eu=null;function Lt(){if((qe&2)!==0&&Oe!==0)return Oe&-Oe;if(L.T!==null){var e=vr;return e!==0?e:iu()}return Hd()}function Nm(){Ft===0&&(Ft=(Oe&536870912)===0||Le?Od():536870912);var e=Yt.current;return e!==null&&(e.flags|=32),Ft}function Ht(e,t,r){(e===Ve&&(ze===2||ze===9)||e.cancelPendingCommit!==null)&&(Or(e,0),ia(e,Oe,Ft,!1)),dn(e,r),((qe&2)===0||e!==Ve)&&(e===Ve&&((qe&2)===0&&(za|=r),We===4&&ia(e,Oe,Ft,!1)),gs(e))}function Sm(e,t,r){if((qe&6)!==0)throw Error(i(327));var o=!r&&(t&124)===0&&(t&e.expiredLanes)===0||un(e,t),d=o?hy(e,t):au(e,t,!0),f=o;do{if(d===0){Cr&&!o&&ia(e,t,0,!1);break}else{if(r=e.current.alternate,f&&!uy(r)){d=au(e,t,!1),f=!1;continue}if(d===2){if(f=t,e.errorRecoveryDisabledLanes&f)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){t=y;e:{var w=e;d=Vn;var k=w.current.memoizedState.isDehydrated;if(k&&(Or(w,y).flags|=256),y=au(w,y,!1),y!==2){if(Yc&&!k){w.errorRecoveryDisabledLanes|=f,za|=f,d=4;break e}f=Ct,Ct=d,f!==null&&(Ct===null?Ct=f:Ct.push.apply(Ct,f))}d=y}if(f=!1,d!==2)continue}}if(d===1){Or(e,0),ia(e,t,0,!0);break}e:{switch(o=e,f=d,f){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:ia(o,t,Ft,!aa);break e;case 2:Ct=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(d=Zc+300-tt(),10<d)){if(ia(o,t,Ft,!aa),Al(o,0,!0)!==0)break e;o.timeoutHandle=Wm(_m.bind(null,o,r,Ct,bi,Xc,t,Ft,za,Dr,aa,f,2,-0,0),d);break e}_m(o,r,Ct,bi,Xc,t,Ft,za,Dr,aa,f,0,-0,0)}}break}while(!0);gs(e)}function _m(e,t,r,o,d,f,y,w,k,q,V,Z,$,P){if(e.timeoutHandle=-1,Z=t.subtreeFlags,(Z&8192||(Z&16785408)===16785408)&&(el={stylesheets:null,count:0,unsuspend:Iy},ym(t),Z=Qy(),Z!==null)){e.cancelPendingCommit=Z(Mm.bind(null,e,t,f,r,o,d,y,w,k,V,1,$,P)),ia(e,f,y,!q);return}Mm(e,t,f,r,o,d,y,w,k)}function uy(e){for(var t=e;;){var r=t.tag;if((r===0||r===11||r===15)&&t.flags&16384&&(r=t.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var d=r[o],f=d.getSnapshot;d=d.value;try{if(!At(f(),d))return!1}catch{return!1}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ia(e,t,r,o){t&=~Fc,t&=~za,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var d=t;0<d;){var f=31-Ne(d),y=1<<f;o[f]=-1,d&=~y}r!==0&&Ud(e,r,t)}function wi(){return(qe&6)===0?(Yn(0),!1):!0}function tu(){if(De!==null){if(ze===0)var e=De.return;else e=De,Ts=Ra=null,yc(e),_r=null,Bn=0,e=De;for(;e!==null;)rm(e.alternate,e),e=e.return;De=null}}function Or(e,t){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,Ey(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),tu(),Ve=e,De=r=Ss(e.current,null),Oe=t,ze=0,Ut=null,aa=!1,Cr=un(e,t),Yc=!1,Dr=Ft=Fc=za=ra=We=0,Ct=Vn=null,Xc=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var d=31-Ne(o),f=1<<d;t|=e[d],o&=~f}return Us=t,Kl(),r}function km(e,t){ke=null,L.H=oi,t===Cn||t===Jl?(t=Ph(),ze=3):t===qh?(t=Ph(),ze=4):ze=t===Gf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ut=t,De===null&&(We=1,fi(e,Gt(t,e.current)))}function Tm(){var e=L.H;return L.H=oi,e===null?oi:e}function Em(){var e=L.A;return L.A=oy,e}function su(){We=4,aa||(Oe&4194048)!==Oe&&Yt.current!==null||(Cr=!0),(ra&134217727)===0&&(za&134217727)===0||Ve===null||ia(Ve,Oe,Ft,!1)}function au(e,t,r){var o=qe;qe|=2;var d=Tm(),f=Em();(Ve!==e||Oe!==t)&&(bi=null,Or(e,t)),t=!1;var y=We;e:do try{if(ze!==0&&De!==null){var w=De,k=Ut;switch(ze){case 8:tu(),y=6;break e;case 3:case 2:case 9:case 6:Yt.current===null&&(t=!0);var q=ze;if(ze=0,Ut=null,Rr(e,w,k,q),r&&Cr){y=0;break e}break;default:q=ze,ze=0,Ut=null,Rr(e,w,k,q)}}dy(),y=We;break}catch(V){km(e,V)}while(!0);return t&&e.shellSuspendCounter++,Ts=Ra=null,qe=o,L.H=d,L.A=f,De===null&&(Ve=null,Oe=0,Kl()),y}function dy(){for(;De!==null;)Cm(De)}function hy(e,t){var r=qe;qe|=2;var o=Tm(),d=Em();Ve!==e||Oe!==t?(bi=null,vi=tt()+500,Or(e,t)):Cr=un(e,t);e:do try{if(ze!==0&&De!==null){t=De;var f=Ut;t:switch(ze){case 1:ze=0,Ut=null,Rr(e,t,f,1);break;case 2:case 9:if(zh(f)){ze=0,Ut=null,Dm(t);break}t=function(){ze!==2&&ze!==9||Ve!==e||(ze=7),gs(e)},f.then(t,t);break e;case 3:ze=7;break e;case 4:ze=5;break e;case 7:zh(f)?(ze=0,Ut=null,Dm(t)):(ze=0,Ut=null,Rr(e,t,f,7));break;case 5:var y=null;switch(De.tag){case 26:y=De.memoizedState;case 5:case 27:var w=De;if(!y||d0(y)){ze=0,Ut=null;var k=w.sibling;if(k!==null)De=k;else{var q=w.return;q!==null?(De=q,ji(q)):De=null}break t}}ze=0,Ut=null,Rr(e,t,f,5);break;case 6:ze=0,Ut=null,Rr(e,t,f,6);break;case 8:tu(),We=6;break e;default:throw Error(i(462))}}fy();break}catch(V){km(e,V)}while(!0);return Ts=Ra=null,L.H=o,L.A=d,qe=r,De!==null?0:(Ve=null,Oe=0,Kl(),We)}function fy(){for(;De!==null&&!Ce();)Cm(De)}function Cm(e){var t=sm(e.alternate,e,Us);e.memoizedProps=e.pendingProps,t===null?ji(e):De=t}function Dm(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=Xf(r,t,t.pendingProps,t.type,void 0,Oe);break;case 11:t=Xf(r,t,t.pendingProps,t.type.render,t.ref,Oe);break;case 5:yc(t);default:rm(r,t),t=De=Dh(t,Us),t=sm(r,t,Us)}e.memoizedProps=e.pendingProps,t===null?ji(e):De=t}function Rr(e,t,r,o){Ts=Ra=null,yc(t),_r=null,Bn=0;var d=t.return;try{if(sy(e,d,t,r,Oe)){We=1,fi(e,Gt(r,e.current)),De=null;return}}catch(f){if(d!==null)throw De=d,f;We=1,fi(e,Gt(r,e.current)),De=null;return}t.flags&32768?(Le||o===1?e=!0:Cr||(Oe&536870912)!==0?e=!1:(aa=e=!0,(o===2||o===9||o===3||o===6)&&(o=Yt.current,o!==null&&o.tag===13&&(o.flags|=16384))),Am(t,e)):ji(t)}function ji(e){var t=e;do{if((t.flags&32768)!==0){Am(t,aa);return}e=t.return;var r=ry(t.alternate,t,Us);if(r!==null){De=r;return}if(t=t.sibling,t!==null){De=t;return}De=t=e}while(t!==null);We===0&&(We=5)}function Am(e,t){do{var r=ny(e.alternate,e);if(r!==null){r.flags&=32767,De=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&(e=e.sibling,e!==null)){De=e;return}De=e=r}while(e!==null);We=6,De=null}function Mm(e,t,r,o,d,f,y,w,k){e.cancelPendingCommit=null;do Ni();while(xt!==0);if((qe&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(f=t.lanes|t.childLanes,f|=Qo,Ix(e,r,f,y,w,k),e===Ve&&(De=Ve=null,Oe=0),Ar=t,la=e,Mr=r,Jc=f,Wc=d,jm=o,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,py(wa,function(){return Hm(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||o){o=L.T,L.T=null,d=I.p,I.p=2,y=qe,qe|=4;try{ly(e,t,r)}finally{qe=y,I.p=d,L.T=o}}xt=1,Om(),Rm(),Um()}}function Om(){if(xt===1){xt=0;var e=la,t=Ar,r=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||r){r=L.T,L.T=null;var o=I.p;I.p=2;var d=qe;qe|=4;try{gm(t,e);var f=gu,y=bh(e.containerInfo),w=f.focusedElem,k=f.selectionRange;if(y!==w&&w&&w.ownerDocument&&vh(w.ownerDocument.documentElement,w)){if(k!==null&&Po(w)){var q=k.start,V=k.end;if(V===void 0&&(V=q),"selectionStart"in w)w.selectionStart=q,w.selectionEnd=Math.min(V,w.value.length);else{var Z=w.ownerDocument||document,$=Z&&Z.defaultView||window;if($.getSelection){var P=$.getSelection(),ye=w.textContent.length,ge=Math.min(k.start,ye),Ke=k.end===void 0?ge:Math.min(k.end,ye);!P.extend&&ge>Ke&&(y=Ke,Ke=ge,ge=y);var U=yh(w,ge),A=yh(w,Ke);if(U&&A&&(P.rangeCount!==1||P.anchorNode!==U.node||P.anchorOffset!==U.offset||P.focusNode!==A.node||P.focusOffset!==A.offset)){var B=Z.createRange();B.setStart(U.node,U.offset),P.removeAllRanges(),ge>Ke?(P.addRange(B),P.extend(A.node,A.offset)):(B.setEnd(A.node,A.offset),P.addRange(B))}}}}for(Z=[],P=w;P=P.parentNode;)P.nodeType===1&&Z.push({element:P,left:P.scrollLeft,top:P.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<Z.length;w++){var Y=Z[w];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Ui=!!mu,gu=mu=null}finally{qe=d,I.p=o,L.T=r}}e.current=t,xt=2}}function Rm(){if(xt===2){xt=0;var e=la,t=Ar,r=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||r){r=L.T,L.T=null;var o=I.p;I.p=2;var d=qe;qe|=4;try{dm(e,t.alternate,t)}finally{qe=d,I.p=o,L.T=r}}xt=3}}function Um(){if(xt===4||xt===3){xt=0,Re();var e=la,t=Ar,r=Mr,o=jm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?xt=5:(xt=0,Ar=la=null,Lm(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(na=null),wo(r),t=t.stateNode,ce&&typeof ce.onCommitFiberRoot=="function")try{ce.onCommitFiberRoot(be,t,void 0,(t.current.flags&128)===128)}catch{}if(o!==null){t=L.T,d=I.p,I.p=2,L.T=null;try{for(var f=e.onRecoverableError,y=0;y<o.length;y++){var w=o[y];f(w.value,{componentStack:w.stack})}}finally{L.T=t,I.p=d}}(Mr&3)!==0&&Ni(),gs(e),d=e.pendingLanes,(r&4194090)!==0&&(d&42)!==0?e===eu?Qn++:(Qn=0,eu=e):Qn=0,Yn(0)}}function Lm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Tn(t)))}function Ni(e){return Om(),Rm(),Um(),Hm()}function Hm(){if(xt!==5)return!1;var e=la,t=Jc;Jc=0;var r=wo(Mr),o=L.T,d=I.p;try{I.p=32>r?32:r,L.T=null,r=Wc,Wc=null;var f=la,y=Mr;if(xt=0,Ar=la=null,Mr=0,(qe&6)!==0)throw Error(i(331));var w=qe;if(qe|=4,bm(f.current),pm(f,f.current,y,r),qe=w,Yn(0,!1),ce&&typeof ce.onPostCommitFiberRoot=="function")try{ce.onPostCommitFiberRoot(be,f)}catch{}return!0}finally{I.p=d,L.T=o,Lm(e,t)}}function Bm(e,t,r){t=Gt(r,t),t=Mc(e.stateNode,t,2),e=Xs(e,t,2),e!==null&&(dn(e,2),gs(e))}function Ie(e,t,r){if(e.tag===3)Bm(e,e,r);else for(;t!==null;){if(t.tag===3){Bm(t,e,r);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(na===null||!na.has(o))){e=Gt(r,e),r=Pf(2),o=Xs(t,r,2),o!==null&&(Kf(r,o,t,e),dn(o,2),gs(o));break}}t=t.return}}function ru(e,t,r){var o=e.pingCache;if(o===null){o=e.pingCache=new cy;var d=new Set;o.set(t,d)}else d=o.get(t),d===void 0&&(d=new Set,o.set(t,d));d.has(r)||(Yc=!0,d.add(r),e=my.bind(null,e,t,r),t.then(e,e))}function my(e,t,r){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,Ve===e&&(Oe&r)===r&&(We===4||We===3&&(Oe&62914560)===Oe&&300>tt()-Zc?(qe&2)===0&&Or(e,0):Fc|=r,Dr===Oe&&(Dr=0)),gs(e)}function qm(e,t){t===0&&(t=Rd()),e=gr(e,t),e!==null&&(dn(e,t),gs(e))}function gy(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),qm(e,r)}function xy(e,t){var r=0;switch(e.tag){case 13:var o=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(t),qm(e,r)}function py(e,t){return de(e,t)}var Si=null,Ur=null,nu=!1,_i=!1,lu=!1,$a=0;function gs(e){e!==Ur&&e.next===null&&(Ur===null?Si=Ur=e:Ur=Ur.next=e),_i=!0,nu||(nu=!0,vy())}function Yn(e,t){if(!lu&&_i){lu=!0;do for(var r=!1,o=Si;o!==null;){if(e!==0){var d=o.pendingLanes;if(d===0)var f=0;else{var y=o.suspendedLanes,w=o.pingedLanes;f=(1<<31-Ne(42|e)+1)-1,f&=d&~(y&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(r=!0,Km(o,f))}else f=Oe,f=Al(o,o===Ve?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||un(o,f)||(r=!0,Km(o,f));o=o.next}while(r);lu=!1}}function yy(){zm()}function zm(){_i=nu=!1;var e=0;$a!==0&&(Ty()&&(e=$a),$a=0);for(var t=tt(),r=null,o=Si;o!==null;){var d=o.next,f=$m(o,t);f===0?(o.next=null,r===null?Si=d:r.next=d,d===null&&(Ur=r)):(r=o,(e!==0||(f&3)!==0)&&(_i=!0)),o=d}Yn(e)}function $m(e,t){for(var r=e.suspendedLanes,o=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var y=31-Ne(f),w=1<<y,k=d[y];k===-1?((w&r)===0||(w&o)!==0)&&(d[y]=Gx(w,t)):k<=t&&(e.expiredLanes|=w),f&=~w}if(t=Ve,r=Oe,r=Al(e,e===t?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,r===0||e===t&&(ze===2||ze===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Ee(o),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||un(e,r)){if(t=r&-r,t===e.callbackPriority)return t;switch(o!==null&&Ee(o),wo(r)){case 2:case 8:r=er;break;case 32:r=wa;break;case 268435456:r=K;break;default:r=wa}return o=Pm.bind(null,e),r=de(r,o),e.callbackPriority=t,e.callbackNode=r,t}return o!==null&&o!==null&&Ee(o),e.callbackPriority=2,e.callbackNode=null,2}function Pm(e,t){if(xt!==0&&xt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Ni()&&e.callbackNode!==r)return null;var o=Oe;return o=Al(e,e===Ve?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Sm(e,o,t),$m(e,tt()),e.callbackNode!=null&&e.callbackNode===r?Pm.bind(null,e):null)}function Km(e,t){if(Ni())return null;Sm(e,t,!0)}function vy(){Cy(function(){(qe&6)!==0?de(ba,yy):zm()})}function iu(){return $a===0&&($a=Od()),$a}function Gm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ll(""+e)}function Im(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}function by(e,t,r,o,d){if(t==="submit"&&r&&r.stateNode===d){var f=Gm((d[_t]||null).action),y=o.submitter;y&&(t=(t=y[_t]||null)?Gm(t.formAction):y.getAttribute("formAction"),t!==null&&(f=t,y=null));var w=new zl("action","action",null,o,d);e.push({event:w,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if($a!==0){var k=y?Im(d,y):new FormData(d);Tc(r,{pending:!0,data:k,method:d.method,action:f},null,k)}}else typeof f=="function"&&(w.preventDefault(),k=y?Im(d,y):new FormData(d),Tc(r,{pending:!0,data:k,method:d.method,action:f},f,k))},currentTarget:d}]})}}for(var ou=0;ou<Vo.length;ou++){var cu=Vo[ou],wy=cu.toLowerCase(),jy=cu[0].toUpperCase()+cu.slice(1);ts(wy,"on"+jy)}ts(Nh,"onAnimationEnd"),ts(Sh,"onAnimationIteration"),ts(_h,"onAnimationStart"),ts("dblclick","onDoubleClick"),ts("focusin","onFocus"),ts("focusout","onBlur"),ts(qp,"onTransitionRun"),ts(zp,"onTransitionStart"),ts($p,"onTransitionCancel"),ts(kh,"onTransitionEnd"),nr("onMouseEnter",["mouseout","mouseover"]),nr("onMouseLeave",["mouseout","mouseover"]),nr("onPointerEnter",["pointerout","pointerover"]),nr("onPointerLeave",["pointerout","pointerover"]),_a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_a("onBeforeInput",["compositionend","keypress","textInput","paste"]),_a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ny=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fn));function Vm(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],d=o.event;o=o.listeners;e:{var f=void 0;if(t)for(var y=o.length-1;0<=y;y--){var w=o[y],k=w.instance,q=w.currentTarget;if(w=w.listener,k!==f&&d.isPropagationStopped())break e;f=w,d.currentTarget=q;try{f(d)}catch(V){hi(V)}d.currentTarget=null,f=k}else for(y=0;y<o.length;y++){if(w=o[y],k=w.instance,q=w.currentTarget,w=w.listener,k!==f&&d.isPropagationStopped())break e;f=w,d.currentTarget=q;try{f(d)}catch(V){hi(V)}d.currentTarget=null,f=k}}}}function Ae(e,t){var r=t[jo];r===void 0&&(r=t[jo]=new Set);var o=e+"__bubble";r.has(o)||(Qm(t,e,2,!1),r.add(o))}function uu(e,t,r){var o=0;t&&(o|=4),Qm(r,e,o,t)}var ki="_reactListening"+Math.random().toString(36).slice(2);function du(e){if(!e[ki]){e[ki]=!0,qd.forEach(function(r){r!=="selectionchange"&&(Ny.has(r)||uu(r,!1,e),uu(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ki]||(t[ki]=!0,uu("selectionchange",!1,t))}}function Qm(e,t,r,o){switch(p0(t)){case 2:var d=Xy;break;case 8:d=Zy;break;default:d=_u}r=d.bind(null,t,r,e),d=void 0,!Oo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),o?d!==void 0?e.addEventListener(t,r,{capture:!0,passive:d}):e.addEventListener(t,r,!0):d!==void 0?e.addEventListener(t,r,{passive:d}):e.addEventListener(t,r,!1)}function hu(e,t,r,o,d){var f=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var w=o.stateNode.containerInfo;if(w===d)break;if(y===4)for(y=o.return;y!==null;){var k=y.tag;if((k===3||k===4)&&y.stateNode.containerInfo===d)return;y=y.return}for(;w!==null;){if(y=sr(w),y===null)return;if(k=y.tag,k===5||k===6||k===26||k===27){o=f=y;continue e}w=w.parentNode}}o=o.return}Wd(function(){var q=f,V=Ao(r),Z=[];e:{var $=Th.get(e);if($!==void 0){var P=zl,ye=e;switch(e){case"keypress":if(Bl(r)===0)break e;case"keydown":case"keyup":P=pp;break;case"focusin":ye="focus",P=Ho;break;case"focusout":ye="blur",P=Ho;break;case"beforeblur":case"afterblur":P=Ho;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=sh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=np;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=bp;break;case Nh:case Sh:case _h:P=op;break;case kh:P=jp;break;case"scroll":case"scrollend":P=ap;break;case"wheel":P=Sp;break;case"copy":case"cut":case"paste":P=up;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=rh;break;case"toggle":case"beforetoggle":P=kp}var ge=(t&4)!==0,Ke=!ge&&(e==="scroll"||e==="scrollend"),U=ge?$!==null?$+"Capture":null:$;ge=[];for(var A=q,B;A!==null;){var Y=A;if(B=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||B===null||U===null||(Y=mn(A,U),Y!=null&&ge.push(Xn(A,Y,B))),Ke)break;A=A.return}0<ge.length&&($=new P($,ye,null,r,V),Z.push({event:$,listeners:ge}))}}if((t&7)===0){e:{if($=e==="mouseover"||e==="pointerover",P=e==="mouseout"||e==="pointerout",$&&r!==Do&&(ye=r.relatedTarget||r.fromElement)&&(sr(ye)||ye[tr]))break e;if((P||$)&&($=V.window===V?V:($=V.ownerDocument)?$.defaultView||$.parentWindow:window,P?(ye=r.relatedTarget||r.toElement,P=q,ye=ye?sr(ye):null,ye!==null&&(Ke=u(ye),ge=ye.tag,ye!==Ke||ge!==5&&ge!==27&&ge!==6)&&(ye=null)):(P=null,ye=q),P!==ye)){if(ge=sh,Y="onMouseLeave",U="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(ge=rh,Y="onPointerLeave",U="onPointerEnter",A="pointer"),Ke=P==null?$:fn(P),B=ye==null?$:fn(ye),$=new ge(Y,A+"leave",P,r,V),$.target=Ke,$.relatedTarget=B,Y=null,sr(V)===q&&(ge=new ge(U,A+"enter",ye,r,V),ge.target=B,ge.relatedTarget=Ke,Y=ge),Ke=Y,P&&ye)t:{for(ge=P,U=ye,A=0,B=ge;B;B=Lr(B))A++;for(B=0,Y=U;Y;Y=Lr(Y))B++;for(;0<A-B;)ge=Lr(ge),A--;for(;0<B-A;)U=Lr(U),B--;for(;A--;){if(ge===U||U!==null&&ge===U.alternate)break t;ge=Lr(ge),U=Lr(U)}ge=null}else ge=null;P!==null&&Ym(Z,$,P,ge,!1),ye!==null&&Ke!==null&&Ym(Z,Ke,ye,ge,!0)}}e:{if($=q?fn(q):window,P=$.nodeName&&$.nodeName.toLowerCase(),P==="select"||P==="input"&&$.type==="file")var he=hh;else if(uh($))if(fh)he=Lp;else{he=Rp;var Te=Op}else P=$.nodeName,!P||P.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?q&&Co(q.elementType)&&(he=hh):he=Up;if(he&&(he=he(e,q))){dh(Z,he,r,V);break e}Te&&Te(e,$,q),e==="focusout"&&q&&$.type==="number"&&q.memoizedProps.value!=null&&Eo($,"number",$.value)}switch(Te=q?fn(q):window,e){case"focusin":(uh(Te)||Te.contentEditable==="true")&&(hr=Te,Ko=q,jn=null);break;case"focusout":jn=Ko=hr=null;break;case"mousedown":Go=!0;break;case"contextmenu":case"mouseup":case"dragend":Go=!1,wh(Z,r,V);break;case"selectionchange":if(Bp)break;case"keydown":case"keyup":wh(Z,r,V)}var fe;if(qo)e:{switch(e){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else dr?oh(e,r)&&(xe="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(xe="onCompositionStart");xe&&(nh&&r.locale!=="ko"&&(dr||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&dr&&(fe=eh()):(Vs=V,Ro="value"in Vs?Vs.value:Vs.textContent,dr=!0)),Te=Ti(q,xe),0<Te.length&&(xe=new ah(xe,e,null,r,V),Z.push({event:xe,listeners:Te}),fe?xe.data=fe:(fe=ch(r),fe!==null&&(xe.data=fe)))),(fe=Ep?Cp(e,r):Dp(e,r))&&(xe=Ti(q,"onBeforeInput"),0<xe.length&&(Te=new ah("onBeforeInput","beforeinput",null,r,V),Z.push({event:Te,listeners:xe}),Te.data=fe)),by(Z,e,q,r,V)}Vm(Z,t)})}function Xn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ti(e,t){for(var r=t+"Capture",o=[];e!==null;){var d=e,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=mn(e,r),d!=null&&o.unshift(Xn(e,d,f)),d=mn(e,t),d!=null&&o.push(Xn(e,d,f))),e.tag===3)return o;e=e.return}return[]}function Lr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ym(e,t,r,o,d){for(var f=t._reactName,y=[];r!==null&&r!==o;){var w=r,k=w.alternate,q=w.stateNode;if(w=w.tag,k!==null&&k===o)break;w!==5&&w!==26&&w!==27||q===null||(k=q,d?(q=mn(r,f),q!=null&&y.unshift(Xn(r,q,k))):d||(q=mn(r,f),q!=null&&y.push(Xn(r,q,k)))),r=r.return}y.length!==0&&e.push({event:t,listeners:y})}var Sy=/\r\n?/g,_y=/\u0000|\uFFFD/g;function Fm(e){return(typeof e=="string"?e:""+e).replace(Sy,`
`).replace(_y,"")}function Xm(e,t){return t=Fm(t),Fm(e)===t}function Ei(){}function Pe(e,t,r,o,d,f){switch(r){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||or(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&or(e,""+o);break;case"className":Ol(e,"class",o);break;case"tabIndex":Ol(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Ol(e,r,o);break;case"style":Zd(e,o,f);break;case"data":if(t!=="object"){Ol(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||r!=="href")){e.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=Ll(""+o),e.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(r==="formAction"?(t!=="input"&&Pe(e,t,"name",d.name,d,null),Pe(e,t,"formEncType",d.formEncType,d,null),Pe(e,t,"formMethod",d.formMethod,d,null),Pe(e,t,"formTarget",d.formTarget,d,null)):(Pe(e,t,"encType",d.encType,d,null),Pe(e,t,"method",d.method,d,null),Pe(e,t,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=Ll(""+o),e.setAttribute(r,o);break;case"onClick":o!=null&&(e.onclick=Ei);break;case"onScroll":o!=null&&Ae("scroll",e);break;case"onScrollEnd":o!=null&&Ae("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}r=Ll(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""+o):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":o===!0?e.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,o):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(r,o):e.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(r):e.setAttribute(r,o);break;case"popover":Ae("beforetoggle",e),Ae("toggle",e),Ml(e,"popover",o);break;case"xlinkActuate":js(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":js(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":js(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":js(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":js(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":js(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":js(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":js(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":js(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ml(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=tp.get(r)||r,Ml(e,r,o))}}function fu(e,t,r,o,d,f){switch(r){case"style":Zd(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"children":typeof o=="string"?or(e,o):(typeof o=="number"||typeof o=="bigint")&&or(e,""+o);break;case"onScroll":o!=null&&Ae("scroll",e);break;case"onScrollEnd":o!=null&&Ae("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Ei);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zd.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(d=r.endsWith("Capture"),t=r.slice(2,d?r.length-7:void 0),f=e[_t]||null,f=f!=null?f[r]:null,typeof f=="function"&&e.removeEventListener(t,f,d),typeof o=="function")){typeof f!="function"&&f!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,o,d);break e}r in e?e[r]=o:o===!0?e.setAttribute(r,""):Ml(e,r,o)}}}function pt(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",e),Ae("load",e);var o=!1,d=!1,f;for(f in r)if(r.hasOwnProperty(f)){var y=r[f];if(y!=null)switch(f){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Pe(e,t,f,y,r,null)}}d&&Pe(e,t,"srcSet",r.srcSet,r,null),o&&Pe(e,t,"src",r.src,r,null);return;case"input":Ae("invalid",e);var w=f=y=d=null,k=null,q=null;for(o in r)if(r.hasOwnProperty(o)){var V=r[o];if(V!=null)switch(o){case"name":d=V;break;case"type":y=V;break;case"checked":k=V;break;case"defaultChecked":q=V;break;case"value":f=V;break;case"defaultValue":w=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(137,t));break;default:Pe(e,t,o,V,r,null)}}Qd(e,f,w,k,q,y,d,!1),Rl(e);return;case"select":Ae("invalid",e),o=y=f=null;for(d in r)if(r.hasOwnProperty(d)&&(w=r[d],w!=null))switch(d){case"value":f=w;break;case"defaultValue":y=w;break;case"multiple":o=w;default:Pe(e,t,d,w,r,null)}t=f,r=y,e.multiple=!!o,t!=null?ir(e,!!o,t,!1):r!=null&&ir(e,!!o,r,!0);return;case"textarea":Ae("invalid",e),f=d=o=null;for(y in r)if(r.hasOwnProperty(y)&&(w=r[y],w!=null))switch(y){case"value":o=w;break;case"defaultValue":d=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:Pe(e,t,y,w,r,null)}Fd(e,o,d,f),Rl(e);return;case"option":for(k in r)if(r.hasOwnProperty(k)&&(o=r[k],o!=null))switch(k){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Pe(e,t,k,o,r,null)}return;case"dialog":Ae("beforetoggle",e),Ae("toggle",e),Ae("cancel",e),Ae("close",e);break;case"iframe":case"object":Ae("load",e);break;case"video":case"audio":for(o=0;o<Fn.length;o++)Ae(Fn[o],e);break;case"image":Ae("error",e),Ae("load",e);break;case"details":Ae("toggle",e);break;case"embed":case"source":case"link":Ae("error",e),Ae("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in r)if(r.hasOwnProperty(q)&&(o=r[q],o!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Pe(e,t,q,o,r,null)}return;default:if(Co(t)){for(V in r)r.hasOwnProperty(V)&&(o=r[V],o!==void 0&&fu(e,t,V,o,r,void 0));return}}for(w in r)r.hasOwnProperty(w)&&(o=r[w],o!=null&&Pe(e,t,w,o,r,null))}function ky(e,t,r,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,y=null,w=null,k=null,q=null,V=null;for(P in r){var Z=r[P];if(r.hasOwnProperty(P)&&Z!=null)switch(P){case"checked":break;case"value":break;case"defaultValue":k=Z;default:o.hasOwnProperty(P)||Pe(e,t,P,null,o,Z)}}for(var $ in o){var P=o[$];if(Z=r[$],o.hasOwnProperty($)&&(P!=null||Z!=null))switch($){case"type":f=P;break;case"name":d=P;break;case"checked":q=P;break;case"defaultChecked":V=P;break;case"value":y=P;break;case"defaultValue":w=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(i(137,t));break;default:P!==Z&&Pe(e,t,$,P,o,Z)}}To(e,y,w,k,q,V,f,d);return;case"select":P=y=w=$=null;for(f in r)if(k=r[f],r.hasOwnProperty(f)&&k!=null)switch(f){case"value":break;case"multiple":P=k;default:o.hasOwnProperty(f)||Pe(e,t,f,null,o,k)}for(d in o)if(f=o[d],k=r[d],o.hasOwnProperty(d)&&(f!=null||k!=null))switch(d){case"value":$=f;break;case"defaultValue":w=f;break;case"multiple":y=f;default:f!==k&&Pe(e,t,d,f,o,k)}t=w,r=y,o=P,$!=null?ir(e,!!r,$,!1):!!o!=!!r&&(t!=null?ir(e,!!r,t,!0):ir(e,!!r,r?[]:"",!1));return;case"textarea":P=$=null;for(w in r)if(d=r[w],r.hasOwnProperty(w)&&d!=null&&!o.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Pe(e,t,w,null,o,d)}for(y in o)if(d=o[y],f=r[y],o.hasOwnProperty(y)&&(d!=null||f!=null))switch(y){case"value":$=d;break;case"defaultValue":P=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==f&&Pe(e,t,y,d,o,f)}Yd(e,$,P);return;case"option":for(var ye in r)if($=r[ye],r.hasOwnProperty(ye)&&$!=null&&!o.hasOwnProperty(ye))switch(ye){case"selected":e.selected=!1;break;default:Pe(e,t,ye,null,o,$)}for(k in o)if($=o[k],P=r[k],o.hasOwnProperty(k)&&$!==P&&($!=null||P!=null))switch(k){case"selected":e.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:Pe(e,t,k,$,o,P)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ge in r)$=r[ge],r.hasOwnProperty(ge)&&$!=null&&!o.hasOwnProperty(ge)&&Pe(e,t,ge,null,o,$);for(q in o)if($=o[q],P=r[q],o.hasOwnProperty(q)&&$!==P&&($!=null||P!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,t));break;default:Pe(e,t,q,$,o,P)}return;default:if(Co(t)){for(var Ke in r)$=r[Ke],r.hasOwnProperty(Ke)&&$!==void 0&&!o.hasOwnProperty(Ke)&&fu(e,t,Ke,void 0,o,$);for(V in o)$=o[V],P=r[V],!o.hasOwnProperty(V)||$===P||$===void 0&&P===void 0||fu(e,t,V,$,o,P);return}}for(var U in r)$=r[U],r.hasOwnProperty(U)&&$!=null&&!o.hasOwnProperty(U)&&Pe(e,t,U,null,o,$);for(Z in o)$=o[Z],P=r[Z],!o.hasOwnProperty(Z)||$===P||$==null&&P==null||Pe(e,t,Z,$,o,P)}var mu=null,gu=null;function Ci(e){return e.nodeType===9?e:e.ownerDocument}function Zm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function xu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pu=null;function Ty(){var e=window.event;return e&&e.type==="popstate"?e===pu?!1:(pu=e,!0):(pu=null,!1)}var Wm=typeof setTimeout=="function"?setTimeout:void 0,Ey=typeof clearTimeout=="function"?clearTimeout:void 0,e0=typeof Promise=="function"?Promise:void 0,Cy=typeof queueMicrotask=="function"?queueMicrotask:typeof e0<"u"?function(e){return e0.resolve(null).then(e).catch(Dy)}:Wm;function Dy(e){setTimeout(function(){throw e})}function oa(e){return e==="head"}function t0(e,t){var r=t,o=0,d=0;do{var f=r.nextSibling;if(e.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"){if(0<o&&8>o){r=o;var y=e.ownerDocument;if(r&1&&Zn(y.documentElement),r&2&&Zn(y.body),r&4)for(r=y.head,Zn(r),y=r.firstChild;y;){var w=y.nextSibling,k=y.nodeName;y[hn]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&y.rel.toLowerCase()==="stylesheet"||r.removeChild(y),y=w}}if(d===0){e.removeChild(f),nl(t);return}d--}else r==="$"||r==="$?"||r==="$!"?d++:o=r.charCodeAt(0)-48;else o=0;r=f}while(r);nl(t)}function yu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":yu(r),No(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function Ay(e,t,r,o){for(;e.nodeType===1;){var d=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[hn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=as(e.nextSibling),e===null)break}return null}function My(e,t,r){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=as(e.nextSibling),e===null))return null;return e}function vu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Oy(e,t){var r=e.ownerDocument;if(e.data!=="$?"||r.readyState==="complete")t();else{var o=function(){t(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function as(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var bu=null;function s0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}function a0(e,t,r){switch(t=Ci(r),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Zn(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);No(e)}var Xt=new Map,r0=new Set;function Di(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ls=I.d;I.d={f:Ry,r:Uy,D:Ly,C:Hy,L:By,m:qy,X:$y,S:zy,M:Py};function Ry(){var e=Ls.f(),t=wi();return e||t}function Uy(e){var t=ar(e);t!==null&&t.tag===5&&t.type==="form"?Sf(t):Ls.r(e)}var Hr=typeof document>"u"?null:document;function n0(e,t,r){var o=Hr;if(o&&typeof t=="string"&&t){var d=Kt(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof r=="string"&&(d+='[crossorigin="'+r+'"]'),r0.has(d)||(r0.add(d),e={rel:e,crossOrigin:r,href:t},o.querySelector(d)===null&&(t=o.createElement("link"),pt(t,"link",e),ot(t),o.head.appendChild(t)))}}function Ly(e){Ls.D(e),n0("dns-prefetch",e,null)}function Hy(e,t){Ls.C(e,t),n0("preconnect",e,t)}function By(e,t,r){Ls.L(e,t,r);var o=Hr;if(o&&e&&t){var d='link[rel="preload"][as="'+Kt(t)+'"]';t==="image"&&r&&r.imageSrcSet?(d+='[imagesrcset="'+Kt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(d+='[imagesizes="'+Kt(r.imageSizes)+'"]')):d+='[href="'+Kt(e)+'"]';var f=d;switch(t){case"style":f=Br(e);break;case"script":f=qr(e)}Xt.has(f)||(e=p({rel:"preload",href:t==="image"&&r&&r.imageSrcSet?void 0:e,as:t},r),Xt.set(f,e),o.querySelector(d)!==null||t==="style"&&o.querySelector(Jn(f))||t==="script"&&o.querySelector(Wn(f))||(t=o.createElement("link"),pt(t,"link",e),ot(t),o.head.appendChild(t)))}}function qy(e,t){Ls.m(e,t);var r=Hr;if(r&&e){var o=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+Kt(o)+'"][href="'+Kt(e)+'"]',f=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=qr(e)}if(!Xt.has(f)&&(e=p({rel:"modulepreload",href:e},t),Xt.set(f,e),r.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Wn(f)))return}o=r.createElement("link"),pt(o,"link",e),ot(o),r.head.appendChild(o)}}}function zy(e,t,r){Ls.S(e,t,r);var o=Hr;if(o&&e){var d=rr(o).hoistableStyles,f=Br(e);t=t||"default";var y=d.get(f);if(!y){var w={loading:0,preload:null};if(y=o.querySelector(Jn(f)))w.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},r),(r=Xt.get(f))&&wu(e,r);var k=y=o.createElement("link");ot(k),pt(k,"link",e),k._p=new Promise(function(q,V){k.onload=q,k.onerror=V}),k.addEventListener("load",function(){w.loading|=1}),k.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Ai(y,t,o)}y={type:"stylesheet",instance:y,count:1,state:w},d.set(f,y)}}}function $y(e,t){Ls.X(e,t);var r=Hr;if(r&&e){var o=rr(r).hoistableScripts,d=qr(e),f=o.get(d);f||(f=r.querySelector(Wn(d)),f||(e=p({src:e,async:!0},t),(t=Xt.get(d))&&ju(e,t),f=r.createElement("script"),ot(f),pt(f,"link",e),r.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(d,f))}}function Py(e,t){Ls.M(e,t);var r=Hr;if(r&&e){var o=rr(r).hoistableScripts,d=qr(e),f=o.get(d);f||(f=r.querySelector(Wn(d)),f||(e=p({src:e,async:!0,type:"module"},t),(t=Xt.get(d))&&ju(e,t),f=r.createElement("script"),ot(f),pt(f,"link",e),r.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(d,f))}}function l0(e,t,r,o){var d=(d=pe.current)?Di(d):null;if(!d)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(t=Br(r.href),r=rr(d).hoistableStyles,o=r.get(t),o||(o={type:"style",instance:null,count:0,state:null},r.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=Br(r.href);var f=rr(d).hoistableStyles,y=f.get(e);if(y||(d=d.ownerDocument||d,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,y),(f=d.querySelector(Jn(e)))&&!f._p&&(y.instance=f,y.state.loading=5),Xt.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Xt.set(e,r),f||Ky(d,e,r,y.state))),t&&o===null)throw Error(i(528,""));return y}if(t&&o!==null)throw Error(i(529,""));return null;case"script":return t=r.async,r=r.src,typeof r=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=qr(r),r=rr(d).hoistableScripts,o=r.get(t),o||(o={type:"script",instance:null,count:0,state:null},r.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Br(e){return'href="'+Kt(e)+'"'}function Jn(e){return'link[rel="stylesheet"]['+e+"]"}function i0(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function Ky(e,t,r,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),pt(t,"link",r),ot(t),e.head.appendChild(t))}function qr(e){return'[src="'+Kt(e)+'"]'}function Wn(e){return"script[async]"+e}function o0(e,t,r){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+Kt(r.href)+'"]');if(o)return t.instance=o,ot(o),o;var d=p({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ot(o),pt(o,"style",d),Ai(o,r.precedence,e),t.instance=o;case"stylesheet":d=Br(r.href);var f=e.querySelector(Jn(d));if(f)return t.state.loading|=4,t.instance=f,ot(f),f;o=i0(r),(d=Xt.get(d))&&wu(o,d),f=(e.ownerDocument||e).createElement("link"),ot(f);var y=f;return y._p=new Promise(function(w,k){y.onload=w,y.onerror=k}),pt(f,"link",o),t.state.loading|=4,Ai(f,r.precedence,e),t.instance=f;case"script":return f=qr(r.src),(d=e.querySelector(Wn(f)))?(t.instance=d,ot(d),d):(o=r,(d=Xt.get(f))&&(o=p({},r),ju(o,d)),e=e.ownerDocument||e,d=e.createElement("script"),ot(d),pt(d,"link",o),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(o=t.instance,t.state.loading|=4,Ai(o,r.precedence,e));return t.instance}function Ai(e,t,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,f=d,y=0;y<o.length;y++){var w=o[y];if(w.dataset.precedence===t)f=w;else if(f!==d)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=r.nodeType===9?r.head:r,t.insertBefore(e,t.firstChild))}function wu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function ju(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Mi=null;function c0(e,t,r){if(Mi===null){var o=new Map,d=Mi=new Map;d.set(r,o)}else d=Mi,o=d.get(r),o||(o=new Map,d.set(r,o));if(o.has(e))return o;for(o.set(e,null),r=r.getElementsByTagName(e),d=0;d<r.length;d++){var f=r[d];if(!(f[hn]||f[yt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var y=f.getAttribute(t)||"";y=e+y;var w=o.get(y);w?w.push(f):o.set(y,[f])}}return o}function u0(e,t,r){e=e.ownerDocument||e,e.head.insertBefore(r,t==="title"?e.querySelector("head > title"):null)}function Gy(e,t,r){if(r===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function d0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var el=null;function Iy(){}function Vy(e,t,r){if(el===null)throw Error(i(475));var o=el;if(t.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var d=Br(r.href),f=e.querySelector(Jn(d));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=Oi.bind(o),e.then(o,o)),t.state.loading|=4,t.instance=f,ot(f);return}f=e.ownerDocument||e,r=i0(r),(d=Xt.get(d))&&wu(r,d),f=f.createElement("link"),ot(f);var y=f;y._p=new Promise(function(w,k){y.onload=w,y.onerror=k}),pt(f,"link",r),t.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(o.count++,t=Oi.bind(o),e.addEventListener("load",t),e.addEventListener("error",t))}}function Qy(){if(el===null)throw Error(i(475));var e=el;return e.stylesheets&&e.count===0&&Nu(e,e.stylesheets),0<e.count?function(t){var r=setTimeout(function(){if(e.stylesheets&&Nu(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(r)}}:null}function Oi(){if(this.count--,this.count===0){if(this.stylesheets)Nu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ri=null;function Nu(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ri=new Map,t.forEach(Yy,e),Ri=null,Oi.call(e))}function Yy(e,t){if(!(t.state.loading&4)){var r=Ri.get(e);if(r)var o=r.get(null);else{r=new Map,Ri.set(e,r);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var y=d[f];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(r.set(y.dataset.precedence,y),o=y)}o&&r.set(null,o)}d=t.instance,y=d.getAttribute("data-precedence"),f=r.get(y)||o,f===o&&r.set(null,d),r.set(y,d),this.count++,o=Oi.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),f?f.parentNode.insertBefore(d,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var tl={$$typeof:C,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function Fy(e,t,r,o,d,f,y,w){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vo(0),this.hiddenUpdates=vo(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function h0(e,t,r,o,d,f,y,w,k,q,V,Z){return e=new Fy(e,t,r,y,w,k,q,Z),t=1,f===!0&&(t|=24),f=Mt(3,null,null,t),e.current=f,f.stateNode=e,t=rc(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:o,isDehydrated:r,cache:t},oc(f),e}function f0(e){return e?(e=xr,e):xr}function m0(e,t,r,o,d,f){d=f0(d),o.context===null?o.context=d:o.pendingContext=d,o=Fs(t),o.payload={element:r},f=f===void 0?null:f,f!==null&&(o.callback=f),r=Xs(e,o,t),r!==null&&(Ht(r,e,t),An(r,e,t))}function g0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Su(e,t){g0(e,t),(e=e.alternate)&&g0(e,t)}function x0(e){if(e.tag===13){var t=gr(e,67108864);t!==null&&Ht(t,e,67108864),Su(e,67108864)}}var Ui=!0;function Xy(e,t,r,o){var d=L.T;L.T=null;var f=I.p;try{I.p=2,_u(e,t,r,o)}finally{I.p=f,L.T=d}}function Zy(e,t,r,o){var d=L.T;L.T=null;var f=I.p;try{I.p=8,_u(e,t,r,o)}finally{I.p=f,L.T=d}}function _u(e,t,r,o){if(Ui){var d=ku(o);if(d===null)hu(e,t,o,Li,r),y0(e,o);else if(Wy(d,e,t,r,o))o.stopPropagation();else if(y0(e,o),t&4&&-1<Jy.indexOf(e)){for(;d!==null;){var f=ar(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var y=Sa(f.pendingLanes);if(y!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;y;){var k=1<<31-Ne(y);w.entanglements[1]|=k,y&=~k}gs(f),(qe&6)===0&&(vi=tt()+500,Yn(0))}}break;case 13:w=gr(f,2),w!==null&&Ht(w,f,2),wi(),Su(f,2)}if(f=ku(o),f===null&&hu(e,t,o,Li,r),f===d)break;d=f}d!==null&&o.stopPropagation()}else hu(e,t,o,null,r)}}function ku(e){return e=Ao(e),Tu(e)}var Li=null;function Tu(e){if(Li=null,e=sr(e),e!==null){var t=u(e);if(t===null)e=null;else{var r=t.tag;if(r===13){if(e=h(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Li=e,null}function p0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wa()){case ba:return 2;case er:return 8;case wa:case yo:return 32;case K:return 268435456;default:return 32}default:return 32}}var Eu=!1,ca=null,ua=null,da=null,sl=new Map,al=new Map,ha=[],Jy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function y0(e,t){switch(e){case"focusin":case"focusout":ca=null;break;case"dragenter":case"dragleave":ua=null;break;case"mouseover":case"mouseout":da=null;break;case"pointerover":case"pointerout":sl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":al.delete(t.pointerId)}}function rl(e,t,r,o,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:r,eventSystemFlags:o,nativeEvent:f,targetContainers:[d]},t!==null&&(t=ar(t),t!==null&&x0(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function Wy(e,t,r,o,d){switch(t){case"focusin":return ca=rl(ca,e,t,r,o,d),!0;case"dragenter":return ua=rl(ua,e,t,r,o,d),!0;case"mouseover":return da=rl(da,e,t,r,o,d),!0;case"pointerover":var f=d.pointerId;return sl.set(f,rl(sl.get(f)||null,e,t,r,o,d)),!0;case"gotpointercapture":return f=d.pointerId,al.set(f,rl(al.get(f)||null,e,t,r,o,d)),!0}return!1}function v0(e){var t=sr(e.target);if(t!==null){var r=u(t);if(r!==null){if(t=r.tag,t===13){if(t=h(r),t!==null){e.blockedOn=t,Vx(e.priority,function(){if(r.tag===13){var o=Lt();o=bo(o);var d=gr(r,o);d!==null&&Ht(d,r,o),Su(r,o)}});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ku(e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);Do=o,r.target.dispatchEvent(o),Do=null}else return t=ar(r),t!==null&&x0(t),e.blockedOn=r,!1;t.shift()}return!0}function b0(e,t,r){Hi(e)&&r.delete(t)}function ev(){Eu=!1,ca!==null&&Hi(ca)&&(ca=null),ua!==null&&Hi(ua)&&(ua=null),da!==null&&Hi(da)&&(da=null),sl.forEach(b0),al.forEach(b0)}function Bi(e,t){e.blockedOn===t&&(e.blockedOn=null,Eu||(Eu=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,ev)))}var qi=null;function w0(e){qi!==e&&(qi=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){qi===e&&(qi=null);for(var t=0;t<e.length;t+=3){var r=e[t],o=e[t+1],d=e[t+2];if(typeof o!="function"){if(Tu(o||r)===null)continue;break}var f=ar(r);f!==null&&(e.splice(t,3),t-=3,Tc(f,{pending:!0,data:d,method:r.method,action:o},o,d))}}))}function nl(e){function t(k){return Bi(k,e)}ca!==null&&Bi(ca,e),ua!==null&&Bi(ua,e),da!==null&&Bi(da,e),sl.forEach(t),al.forEach(t);for(var r=0;r<ha.length;r++){var o=ha[r];o.blockedOn===e&&(o.blockedOn=null)}for(;0<ha.length&&(r=ha[0],r.blockedOn===null);)v0(r),r.blockedOn===null&&ha.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var d=r[o],f=r[o+1],y=d[_t]||null;if(typeof f=="function")y||w0(r);else if(y){var w=null;if(f&&f.hasAttribute("formAction")){if(d=f,y=f[_t]||null)w=y.formAction;else if(Tu(d)!==null)continue}else w=y.action;typeof w=="function"?r[o+1]=w:(r.splice(o,3),o-=3),w0(r)}}}function Cu(e){this._internalRoot=e}zi.prototype.render=Cu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var r=t.current,o=Lt();m0(r,o,e,t,null,null)},zi.prototype.unmount=Cu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;m0(e.current,2,null,e,null,null),wi(),t[tr]=null}};function zi(e){this._internalRoot=e}zi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Hd();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ha.length&&t!==0&&t<ha[r].priority;r++);ha.splice(r,0,e),r===0&&v0(e)}};var j0=a.version;if(j0!=="19.1.0")throw Error(i(527,j0,"19.1.0"));I.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=m(t),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var tv={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $i=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$i.isDisabled&&$i.supportsFiber)try{be=$i.inject(tv),ce=$i}catch{}}return il.createRoot=function(e,t){if(!c(e))throw Error(i(299));var r=!1,o="",d=Bf,f=qf,y=zf,w=null;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(y=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(w=t.unstable_transitionCallbacks)),t=h0(e,1,!1,null,null,r,o,d,f,y,w,null),e[tr]=t.current,du(e),new Cu(t)},il.hydrateRoot=function(e,t,r){if(!c(e))throw Error(i(299));var o=!1,d="",f=Bf,y=qf,w=zf,k=null,q=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(y=r.onCaughtError),r.onRecoverableError!==void 0&&(w=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(k=r.unstable_transitionCallbacks),r.formState!==void 0&&(q=r.formState)),t=h0(e,1,!0,t,r??null,o,d,f,y,w,k,q),t.context=f0(null),r=t.current,o=Lt(),o=bo(o),d=Fs(o),d.callback=null,Xs(r,d,o),r=o,t.current.lanes=r,dn(t,r),gs(t),e[tr]=t.current,du(e),new zi(t)},il.version="19.1.0",il}var M0;function dv(){if(M0)return Mu.exports;M0=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(a){console.error(a)}}return l(),Mu.exports=uv(),Mu.exports}var hv=dv();/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var O0="popstate";function fv(l={}){function a(i,c){let{pathname:u,search:h,hash:g}=i.location;return Zu("",{pathname:u,search:h,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(i,c){return typeof c=="string"?c:yl(c)}return gv(a,n,null,l)}function Xe(l,a){if(l===!1||l===null||typeof l>"u")throw new Error(a)}function Wt(l,a){if(!l){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function mv(){return Math.random().toString(36).substring(2,10)}function R0(l,a){return{usr:l.state,key:l.key,idx:a}}function Zu(l,a,n=null,i){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof a=="string"?sn(a):a,state:n,key:a&&a.key||i||mv()}}function yl({pathname:l="/",search:a="",hash:n=""}){return a&&a!=="?"&&(l+=a.charAt(0)==="?"?a:"?"+a),n&&n!=="#"&&(l+=n.charAt(0)==="#"?n:"#"+n),l}function sn(l){let a={};if(l){let n=l.indexOf("#");n>=0&&(a.hash=l.substring(n),l=l.substring(0,n));let i=l.indexOf("?");i>=0&&(a.search=l.substring(i),l=l.substring(0,i)),l&&(a.pathname=l)}return a}function gv(l,a,n,i={}){let{window:c=document.defaultView,v5Compat:u=!1}=i,h=c.history,g="POP",m=null,x=p();x==null&&(x=0,h.replaceState({...h.state,idx:x},""));function p(){return(h.state||{idx:null}).idx}function v(){g="POP";let D=p(),M=D==null?null:D-x;x=D,m&&m({action:g,location:_.location,delta:M})}function j(D,M){g="PUSH";let E=Zu(_.location,D,M);x=p()+1;let C=R0(E,x),G=_.createHref(E);try{h.pushState(C,"",G)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;c.location.assign(G)}u&&m&&m({action:g,location:_.location,delta:1})}function N(D,M){g="REPLACE";let E=Zu(_.location,D,M);x=p();let C=R0(E,x),G=_.createHref(E);h.replaceState(C,"",G),u&&m&&m({action:g,location:_.location,delta:0})}function S(D){return xv(D)}let _={get action(){return g},get location(){return l(c,h)},listen(D){if(m)throw new Error("A history only accepts one active listener");return c.addEventListener(O0,v),m=D,()=>{c.removeEventListener(O0,v),m=null}},createHref(D){return a(c,D)},createURL:S,encodeLocation(D){let M=S(D);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:j,replace:N,go(D){return h.go(D)}};return _}function xv(l,a=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Xe(n,"No window.location.(origin|href) available to create URL");let i=typeof l=="string"?l:yl(l);return i=i.replace(/ $/,"%20"),!a&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function Hg(l,a,n="/"){return pv(l,a,n,!1)}function pv(l,a,n,i){let c=typeof a=="string"?sn(a):a,u=Ps(c.pathname||"/",n);if(u==null)return null;let h=Bg(l);yv(h);let g=null;for(let m=0;g==null&&m<h.length;++m){let x=Cv(u);g=Tv(h[m],x,i)}return g}function Bg(l,a=[],n=[],i=""){let c=(u,h,g)=>{let m={relativePath:g===void 0?u.path||"":g,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};m.relativePath.startsWith("/")&&(Xe(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length));let x=zs([i,m.relativePath]),p=n.concat(m);u.children&&u.children.length>0&&(Xe(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),Bg(u.children,a,p,x)),!(u.path==null&&!u.index)&&a.push({path:x,score:_v(x,u.index),routesMeta:p})};return l.forEach((u,h)=>{if(u.path===""||!u.path?.includes("?"))c(u,h);else for(let g of qg(u.path))c(u,h,g)}),a}function qg(l){let a=l.split("/");if(a.length===0)return[];let[n,...i]=a,c=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return c?[u,""]:[u];let h=qg(i.join("/")),g=[];return g.push(...h.map(m=>m===""?u:[u,m].join("/"))),c&&g.push(...h),g.map(m=>l.startsWith("/")&&m===""?"/":m)}function yv(l){l.sort((a,n)=>a.score!==n.score?n.score-a.score:kv(a.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var vv=/^:[\w-]+$/,bv=3,wv=2,jv=1,Nv=10,Sv=-2,U0=l=>l==="*";function _v(l,a){let n=l.split("/"),i=n.length;return n.some(U0)&&(i+=Sv),a&&(i+=wv),n.filter(c=>!U0(c)).reduce((c,u)=>c+(vv.test(u)?bv:u===""?jv:Nv),i)}function kv(l,a){return l.length===a.length&&l.slice(0,-1).every((i,c)=>i===a[c])?l[l.length-1]-a[a.length-1]:0}function Tv(l,a,n=!1){let{routesMeta:i}=l,c={},u="/",h=[];for(let g=0;g<i.length;++g){let m=i[g],x=g===i.length-1,p=u==="/"?a:a.slice(u.length)||"/",v=so({path:m.relativePath,caseSensitive:m.caseSensitive,end:x},p),j=m.route;if(!v&&x&&n&&!i[i.length-1].route.index&&(v=so({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},p)),!v)return null;Object.assign(c,v.params),h.push({params:c,pathname:zs([u,v.pathname]),pathnameBase:Ov(zs([u,v.pathnameBase])),route:j}),v.pathnameBase!=="/"&&(u=zs([u,v.pathnameBase]))}return h}function so(l,a){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[n,i]=Ev(l.path,l.caseSensitive,l.end),c=a.match(n);if(!c)return null;let u=c[0],h=u.replace(/(.)\/+$/,"$1"),g=c.slice(1);return{params:i.reduce((x,{paramName:p,isOptional:v},j)=>{if(p==="*"){let S=g[j]||"";h=u.slice(0,u.length-S.length).replace(/(.)\/+$/,"$1")}const N=g[j];return v&&!N?x[p]=void 0:x[p]=(N||"").replace(/%2F/g,"/"),x},{}),pathname:u,pathnameBase:h,pattern:l}}function Ev(l,a=!1,n=!0){Wt(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let i=[],c="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,g,m)=>(i.push({paramName:g,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return l.endsWith("*")?(i.push({paramName:"*"}),c+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?c+="\\/*$":l!==""&&l!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,a?void 0:"i"),i]}function Cv(l){try{return l.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Wt(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),l}}function Ps(l,a){if(a==="/")return l;if(!l.toLowerCase().startsWith(a.toLowerCase()))return null;let n=a.endsWith("/")?a.length-1:a.length,i=l.charAt(n);return i&&i!=="/"?null:l.slice(n)||"/"}function Dv(l,a="/"){let{pathname:n,search:i="",hash:c=""}=typeof l=="string"?sn(l):l;return{pathname:n?n.startsWith("/")?n:Av(n,a):a,search:Rv(i),hash:Uv(c)}}function Av(l,a){let n=a.replace(/\/+$/,"").split("/");return l.split("/").forEach(c=>{c===".."?n.length>1&&n.pop():c!=="."&&n.push(c)}),n.length>1?n.join("/"):"/"}function Lu(l,a,n,i){return`Cannot include a '${l}' character in a manually specified \`to.${a}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Mv(l){return l.filter((a,n)=>n===0||a.route.path&&a.route.path.length>0)}function md(l){let a=Mv(l);return a.map((n,i)=>i===a.length-1?n.pathname:n.pathnameBase)}function gd(l,a,n,i=!1){let c;typeof l=="string"?c=sn(l):(c={...l},Xe(!c.pathname||!c.pathname.includes("?"),Lu("?","pathname","search",c)),Xe(!c.pathname||!c.pathname.includes("#"),Lu("#","pathname","hash",c)),Xe(!c.search||!c.search.includes("#"),Lu("#","search","hash",c)));let u=l===""||c.pathname==="",h=u?"/":c.pathname,g;if(h==null)g=n;else{let v=a.length-1;if(!i&&h.startsWith("..")){let j=h.split("/");for(;j[0]==="..";)j.shift(),v-=1;c.pathname=j.join("/")}g=v>=0?a[v]:"/"}let m=Dv(c,g),x=h&&h!=="/"&&h.endsWith("/"),p=(u||h===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(x||p)&&(m.pathname+="/"),m}var zs=l=>l.join("/").replace(/\/\/+/g,"/"),Ov=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),Rv=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,Uv=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l;function Lv(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}var zg=["POST","PUT","PATCH","DELETE"];new Set(zg);var Hv=["GET",...zg];new Set(Hv);var an=b.createContext(null);an.displayName="DataRouter";var uo=b.createContext(null);uo.displayName="DataRouterState";b.createContext(!1);var $g=b.createContext({isTransitioning:!1});$g.displayName="ViewTransition";var Bv=b.createContext(new Map);Bv.displayName="Fetchers";var qv=b.createContext(null);qv.displayName="Await";var os=b.createContext(null);os.displayName="Navigation";var Sl=b.createContext(null);Sl.displayName="Location";var cs=b.createContext({outlet:null,matches:[],isDataRoute:!1});cs.displayName="Route";var xd=b.createContext(null);xd.displayName="RouteError";function zv(l,{relative:a}={}){Xe(rn(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=b.useContext(os),{hash:c,pathname:u,search:h}=_l(l,{relative:a}),g=u;return n!=="/"&&(g=u==="/"?n:zs([n,u])),i.createHref({pathname:g,search:h,hash:c})}function rn(){return b.useContext(Sl)!=null}function bs(){return Xe(rn(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(Sl).location}var Pg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Kg(l){b.useContext(os).static||b.useLayoutEffect(l)}function ws(){let{isDataRoute:l}=b.useContext(cs);return l?eb():$v()}function $v(){Xe(rn(),"useNavigate() may be used only in the context of a <Router> component.");let l=b.useContext(an),{basename:a,navigator:n}=b.useContext(os),{matches:i}=b.useContext(cs),{pathname:c}=bs(),u=JSON.stringify(md(i)),h=b.useRef(!1);return Kg(()=>{h.current=!0}),b.useCallback((m,x={})=>{if(Wt(h.current,Pg),!h.current)return;if(typeof m=="number"){n.go(m);return}let p=gd(m,JSON.parse(u),c,x.relative==="path");l==null&&a!=="/"&&(p.pathname=p.pathname==="/"?a:zs([a,p.pathname])),(x.replace?n.replace:n.push)(p,x.state,x)},[a,n,u,c,l])}b.createContext(null);function Pv(){let{matches:l}=b.useContext(cs),a=l[l.length-1];return a?a.params:{}}function _l(l,{relative:a}={}){let{matches:n}=b.useContext(cs),{pathname:i}=bs(),c=JSON.stringify(md(n));return b.useMemo(()=>gd(l,JSON.parse(c),i,a==="path"),[l,c,i,a])}function Kv(l,a){return Gg(l,a)}function Gg(l,a,n,i){Xe(rn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=b.useContext(os),{matches:u}=b.useContext(cs),h=u[u.length-1],g=h?h.params:{},m=h?h.pathname:"/",x=h?h.pathnameBase:"/",p=h&&h.route;{let M=p&&p.path||"";Ig(m,!p||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let v=bs(),j;if(a){let M=typeof a=="string"?sn(a):a;Xe(x==="/"||M.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${M.pathname}" was given in the \`location\` prop.`),j=M}else j=v;let N=j.pathname||"/",S=N;if(x!=="/"){let M=x.replace(/^\//,"").split("/");S="/"+N.replace(/^\//,"").split("/").slice(M.length).join("/")}let _=Hg(l,{pathname:S});Wt(p||_!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),Wt(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=Yv(_&&_.map(M=>Object.assign({},M,{params:Object.assign({},g,M.params),pathname:zs([x,c.encodeLocation?c.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?x:zs([x,c.encodeLocation?c.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),u,n,i);return a&&D?b.createElement(Sl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},D):D}function Gv(){let l=Wv(),a=Lv(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),n=l instanceof Error?l.stack:null,i="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",l),h=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:u},"ErrorBoundary")," or"," ",b.createElement("code",{style:u},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},a),n?b.createElement("pre",{style:c},n):null,h)}var Iv=b.createElement(Gv,null),Vv=class extends b.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,a){return a.location!==l.location||a.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:a.error,location:a.location,revalidation:l.revalidation||a.revalidation}}componentDidCatch(l,a){console.error("React Router caught the following error during render",l,a)}render(){return this.state.error!==void 0?b.createElement(cs.Provider,{value:this.props.routeContext},b.createElement(xd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Qv({routeContext:l,match:a,children:n}){let i=b.useContext(an);return i&&i.static&&i.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=a.route.id),b.createElement(cs.Provider,{value:l},n)}function Yv(l,a=[],n=null,i=null){if(l==null){if(!n)return null;if(n.errors)l=n.matches;else if(a.length===0&&!n.initialized&&n.matches.length>0)l=n.matches;else return null}let c=l,u=n?.errors;if(u!=null){let m=c.findIndex(x=>x.route.id&&u?.[x.route.id]!==void 0);Xe(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),c=c.slice(0,Math.min(c.length,m+1))}let h=!1,g=-1;if(n)for(let m=0;m<c.length;m++){let x=c[m];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(g=m),x.route.id){let{loaderData:p,errors:v}=n,j=x.route.loader&&!p.hasOwnProperty(x.route.id)&&(!v||v[x.route.id]===void 0);if(x.route.lazy||j){h=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}return c.reduceRight((m,x,p)=>{let v,j=!1,N=null,S=null;n&&(v=u&&x.route.id?u[x.route.id]:void 0,N=x.route.errorElement||Iv,h&&(g<0&&p===0?(Ig("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,S=null):g===p&&(j=!0,S=x.route.hydrateFallbackElement||null)));let _=a.concat(c.slice(0,p+1)),D=()=>{let M;return v?M=N:j?M=S:x.route.Component?M=b.createElement(x.route.Component,null):x.route.element?M=x.route.element:M=m,b.createElement(Qv,{match:x,routeContext:{outlet:m,matches:_,isDataRoute:n!=null},children:M})};return n&&(x.route.ErrorBoundary||x.route.errorElement||p===0)?b.createElement(Vv,{location:n.location,revalidation:n.revalidation,component:N,error:v,children:D(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):D()},null)}function pd(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Fv(l){let a=b.useContext(an);return Xe(a,pd(l)),a}function Xv(l){let a=b.useContext(uo);return Xe(a,pd(l)),a}function Zv(l){let a=b.useContext(cs);return Xe(a,pd(l)),a}function yd(l){let a=Zv(l),n=a.matches[a.matches.length-1];return Xe(n.route.id,`${l} can only be used on routes that contain a unique "id"`),n.route.id}function Jv(){return yd("useRouteId")}function Wv(){let l=b.useContext(xd),a=Xv("useRouteError"),n=yd("useRouteError");return l!==void 0?l:a.errors?.[n]}function eb(){let{router:l}=Fv("useNavigate"),a=yd("useNavigate"),n=b.useRef(!1);return Kg(()=>{n.current=!0}),b.useCallback(async(c,u={})=>{Wt(n.current,Pg),n.current&&(typeof c=="number"?l.navigate(c):await l.navigate(c,{fromRouteId:a,...u}))},[l,a])}var L0={};function Ig(l,a,n){!a&&!L0[l]&&(L0[l]=!0,Wt(!1,n))}b.memo(tb);function tb({routes:l,future:a,state:n}){return Gg(l,void 0,n,a)}function fl({to:l,replace:a,state:n,relative:i}){Xe(rn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=b.useContext(os);Wt(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=b.useContext(cs),{pathname:h}=bs(),g=ws(),m=gd(l,md(u),h,i==="path"),x=JSON.stringify(m);return b.useEffect(()=>{g(JSON.parse(x),{replace:a,state:n,relative:i})},[g,x,i,a,n]),null}function Nt(l){Xe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sb({basename:l="/",children:a=null,location:n,navigationType:i="POP",navigator:c,static:u=!1}){Xe(!rn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=l.replace(/^\/*/,"/"),g=b.useMemo(()=>({basename:h,navigator:c,static:u,future:{}}),[h,c,u]);typeof n=="string"&&(n=sn(n));let{pathname:m="/",search:x="",hash:p="",state:v=null,key:j="default"}=n,N=b.useMemo(()=>{let S=Ps(m,h);return S==null?null:{location:{pathname:S,search:x,hash:p,state:v,key:j},navigationType:i}},[h,m,x,p,v,j,i]);return Wt(N!=null,`<Router basename="${h}"> is not able to match the URL "${m}${x}${p}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:b.createElement(os.Provider,{value:g},b.createElement(Sl.Provider,{children:a,value:N}))}function ab({children:l,location:a}){return Kv(Ju(l),a)}function Ju(l,a=[]){let n=[];return b.Children.forEach(l,(i,c)=>{if(!b.isValidElement(i))return;let u=[...a,c];if(i.type===b.Fragment){n.push.apply(n,Ju(i.props.children,u));return}Xe(i.type===Nt,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xe(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Ju(i.props.children,u)),n.push(h)}),n}var eo="get",to="application/x-www-form-urlencoded";function ho(l){return l!=null&&typeof l.tagName=="string"}function rb(l){return ho(l)&&l.tagName.toLowerCase()==="button"}function nb(l){return ho(l)&&l.tagName.toLowerCase()==="form"}function lb(l){return ho(l)&&l.tagName.toLowerCase()==="input"}function ib(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function ob(l,a){return l.button===0&&(!a||a==="_self")&&!ib(l)}function Wu(l=""){return new URLSearchParams(typeof l=="string"||Array.isArray(l)||l instanceof URLSearchParams?l:Object.keys(l).reduce((a,n)=>{let i=l[n];return a.concat(Array.isArray(i)?i.map(c=>[n,c]):[[n,i]])},[]))}function cb(l,a){let n=Wu(l);return a&&a.forEach((i,c)=>{n.has(c)||a.getAll(c).forEach(u=>{n.append(c,u)})}),n}var Pi=null;function ub(){if(Pi===null)try{new FormData(document.createElement("form"),0),Pi=!1}catch{Pi=!0}return Pi}var db=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hu(l){return l!=null&&!db.has(l)?(Wt(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${to}"`),null):l}function hb(l,a){let n,i,c,u,h;if(nb(l)){let g=l.getAttribute("action");i=g?Ps(g,a):null,n=l.getAttribute("method")||eo,c=Hu(l.getAttribute("enctype"))||to,u=new FormData(l)}else if(rb(l)||lb(l)&&(l.type==="submit"||l.type==="image")){let g=l.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=l.getAttribute("formaction")||g.getAttribute("action");if(i=m?Ps(m,a):null,n=l.getAttribute("formmethod")||g.getAttribute("method")||eo,c=Hu(l.getAttribute("formenctype"))||Hu(g.getAttribute("enctype"))||to,u=new FormData(g,l),!ub()){let{name:x,type:p,value:v}=l;if(p==="image"){let j=x?`${x}.`:"";u.append(`${j}x`,"0"),u.append(`${j}y`,"0")}else x&&u.append(x,v)}}else{if(ho(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=eo,i=null,c=to,h=l}return u&&c==="text/plain"&&(h=u,u=void 0),{action:i,method:n.toLowerCase(),encType:c,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function vd(l,a){if(l===!1||l===null||typeof l>"u")throw new Error(a)}function fb(l,a,n){let i=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return i.pathname==="/"?i.pathname=`_root.${n}`:a&&Ps(i.pathname,a)==="/"?i.pathname=`${a.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function mb(l,a){if(l.id in a)return a[l.id];try{let n=await import(l.module);return a[l.id]=n,n}catch(n){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gb(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function xb(l,a,n){let i=await Promise.all(l.map(async c=>{let u=a.routes[c.route.id];if(u){let h=await mb(u,n);return h.links?h.links():[]}return[]}));return bb(i.flat(1).filter(gb).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function H0(l,a,n,i,c,u){let h=(m,x)=>n[x]?m.route.id!==n[x].route.id:!0,g=(m,x)=>n[x].pathname!==m.pathname||n[x].route.path?.endsWith("*")&&n[x].params["*"]!==m.params["*"];return u==="assets"?a.filter((m,x)=>h(m,x)||g(m,x)):u==="data"?a.filter((m,x)=>{let p=i.routes[m.route.id];if(!p||!p.hasLoader)return!1;if(h(m,x)||g(m,x))return!0;if(m.route.shouldRevalidate){let v=m.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(l,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function pb(l,a,{includeHydrateFallback:n}={}){return yb(l.map(i=>{let c=a.routes[i.route.id];if(!c)return[];let u=[c.module];return c.clientActionModule&&(u=u.concat(c.clientActionModule)),c.clientLoaderModule&&(u=u.concat(c.clientLoaderModule)),n&&c.hydrateFallbackModule&&(u=u.concat(c.hydrateFallbackModule)),c.imports&&(u=u.concat(c.imports)),u}).flat(1))}function yb(l){return[...new Set(l)]}function vb(l){let a={},n=Object.keys(l).sort();for(let i of n)a[i]=l[i];return a}function bb(l,a){let n=new Set;return new Set(a),l.reduce((i,c)=>{let u=JSON.stringify(vb(c));return n.has(u)||(n.add(u),i.push({key:u,link:c})),i},[])}function Vg(){let l=b.useContext(an);return vd(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function wb(){let l=b.useContext(uo);return vd(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var bd=b.createContext(void 0);bd.displayName="FrameworkContext";function Qg(){let l=b.useContext(bd);return vd(l,"You must render this element inside a <HydratedRouter> element"),l}function jb(l,a){let n=b.useContext(bd),[i,c]=b.useState(!1),[u,h]=b.useState(!1),{onFocus:g,onBlur:m,onMouseEnter:x,onMouseLeave:p,onTouchStart:v}=a,j=b.useRef(null);b.useEffect(()=>{if(l==="render"&&h(!0),l==="viewport"){let _=M=>{M.forEach(E=>{h(E.isIntersecting)})},D=new IntersectionObserver(_,{threshold:.5});return j.current&&D.observe(j.current),()=>{D.disconnect()}}},[l]),b.useEffect(()=>{if(i){let _=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(_)}}},[i]);let N=()=>{c(!0)},S=()=>{c(!1),h(!1)};return n?l!=="intent"?[u,j,{}]:[u,j,{onFocus:ol(g,N),onBlur:ol(m,S),onMouseEnter:ol(x,N),onMouseLeave:ol(p,S),onTouchStart:ol(v,N)}]:[!1,j,{}]}function ol(l,a){return n=>{l&&l(n),n.defaultPrevented||a(n)}}function Nb({page:l,...a}){let{router:n}=Vg(),i=b.useMemo(()=>Hg(n.routes,l,n.basename),[n.routes,l,n.basename]);return i?b.createElement(_b,{page:l,matches:i,...a}):null}function Sb(l){let{manifest:a,routeModules:n}=Qg(),[i,c]=b.useState([]);return b.useEffect(()=>{let u=!1;return xb(l,a,n).then(h=>{u||c(h)}),()=>{u=!0}},[l,a,n]),i}function _b({page:l,matches:a,...n}){let i=bs(),{manifest:c,routeModules:u}=Qg(),{basename:h}=Vg(),{loaderData:g,matches:m}=wb(),x=b.useMemo(()=>H0(l,a,m,c,i,"data"),[l,a,m,c,i]),p=b.useMemo(()=>H0(l,a,m,c,i,"assets"),[l,a,m,c,i]),v=b.useMemo(()=>{if(l===i.pathname+i.search+i.hash)return[];let S=new Set,_=!1;if(a.forEach(M=>{let E=c.routes[M.route.id];!E||!E.hasLoader||(!x.some(C=>C.route.id===M.route.id)&&M.route.id in g&&u[M.route.id]?.shouldRevalidate||E.hasClientLoader?_=!0:S.add(M.route.id))}),S.size===0)return[];let D=fb(l,h,"data");return _&&S.size>0&&D.searchParams.set("_routes",a.filter(M=>S.has(M.route.id)).map(M=>M.route.id).join(",")),[D.pathname+D.search]},[h,g,i,c,x,a,l,u]),j=b.useMemo(()=>pb(p,c),[p,c]),N=Sb(p);return b.createElement(b.Fragment,null,v.map(S=>b.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),j.map(S=>b.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),N.map(({key:S,link:_})=>b.createElement("link",{key:S,..._})))}function kb(...l){return a=>{l.forEach(n=>{typeof n=="function"?n(a):n!=null&&(n.current=a)})}}var Yg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Yg&&(window.__reactRouterVersion="7.7.0")}catch{}function Tb({basename:l,children:a,window:n}){let i=b.useRef();i.current==null&&(i.current=fv({window:n,v5Compat:!0}));let c=i.current,[u,h]=b.useState({action:c.action,location:c.location}),g=b.useCallback(m=>{b.startTransition(()=>h(m))},[h]);return b.useLayoutEffect(()=>c.listen(g),[c,g]),b.createElement(sb,{basename:l,children:a,location:u.location,navigationType:u.action,navigator:c})}var Fg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xg=b.forwardRef(function({onClick:a,discover:n="render",prefetch:i="none",relative:c,reloadDocument:u,replace:h,state:g,target:m,to:x,preventScrollReset:p,viewTransition:v,...j},N){let{basename:S}=b.useContext(os),_=typeof x=="string"&&Fg.test(x),D,M=!1;if(typeof x=="string"&&_&&(D=x,Yg))try{let ie=new URL(window.location.href),Q=x.startsWith("//")?new URL(ie.protocol+x):new URL(x),J=Ps(Q.pathname,S);Q.origin===ie.origin&&J!=null?x=J+Q.search+Q.hash:M=!0}catch{Wt(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=zv(x,{relative:c}),[C,G,z]=jb(i,j),H=Ab(x,{replace:h,state:g,target:m,preventScrollReset:p,relative:c,viewTransition:v});function O(ie){a&&a(ie),ie.defaultPrevented||H(ie)}let X=b.createElement("a",{...j,...z,href:D||E,onClick:M||u?a:O,ref:kb(N,G),target:m,"data-discover":!_&&n==="render"?"true":void 0});return C&&!_?b.createElement(b.Fragment,null,X,b.createElement(Nb,{page:E})):X});Xg.displayName="Link";var Eb=b.forwardRef(function({"aria-current":a="page",caseSensitive:n=!1,className:i="",end:c=!1,style:u,to:h,viewTransition:g,children:m,...x},p){let v=_l(h,{relative:x.relative}),j=bs(),N=b.useContext(uo),{navigator:S,basename:_}=b.useContext(os),D=N!=null&&Lb(v)&&g===!0,M=S.encodeLocation?S.encodeLocation(v).pathname:v.pathname,E=j.pathname,C=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;n||(E=E.toLowerCase(),C=C?C.toLowerCase():null,M=M.toLowerCase()),C&&_&&(C=Ps(C,_)||C);const G=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let z=E===M||!c&&E.startsWith(M)&&E.charAt(G)==="/",H=C!=null&&(C===M||!c&&C.startsWith(M)&&C.charAt(M.length)==="/"),O={isActive:z,isPending:H,isTransitioning:D},X=z?a:void 0,ie;typeof i=="function"?ie=i(O):ie=[i,z?"active":null,H?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let Q=typeof u=="function"?u(O):u;return b.createElement(Xg,{...x,"aria-current":X,className:ie,ref:p,style:Q,to:h,viewTransition:g},typeof m=="function"?m(O):m)});Eb.displayName="NavLink";var Cb=b.forwardRef(({discover:l="render",fetcherKey:a,navigate:n,reloadDocument:i,replace:c,state:u,method:h=eo,action:g,onSubmit:m,relative:x,preventScrollReset:p,viewTransition:v,...j},N)=>{let S=Rb(),_=Ub(g,{relative:x}),D=h.toLowerCase()==="get"?"get":"post",M=typeof g=="string"&&Fg.test(g),E=C=>{if(m&&m(C),C.defaultPrevented)return;C.preventDefault();let G=C.nativeEvent.submitter,z=G?.getAttribute("formmethod")||h;S(G||C.currentTarget,{fetcherKey:a,method:z,navigate:n,replace:c,state:u,relative:x,preventScrollReset:p,viewTransition:v})};return b.createElement("form",{ref:N,method:D,action:_,onSubmit:i?m:E,...j,"data-discover":!M&&l==="render"?"true":void 0})});Cb.displayName="Form";function Db(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Zg(l){let a=b.useContext(an);return Xe(a,Db(l)),a}function Ab(l,{target:a,replace:n,state:i,preventScrollReset:c,relative:u,viewTransition:h}={}){let g=ws(),m=bs(),x=_l(l,{relative:u});return b.useCallback(p=>{if(ob(p,a)){p.preventDefault();let v=n!==void 0?n:yl(m)===yl(x);g(l,{replace:v,state:i,preventScrollReset:c,relative:u,viewTransition:h})}},[m,g,x,n,i,a,l,c,u,h])}function fo(l){Wt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=b.useRef(Wu(l)),n=b.useRef(!1),i=bs(),c=b.useMemo(()=>cb(i.search,n.current?null:a.current),[i.search]),u=ws(),h=b.useCallback((g,m)=>{const x=Wu(typeof g=="function"?g(new URLSearchParams(c)):g);n.current=!0,u("?"+x,m)},[u,c]);return[c,h]}var Mb=0,Ob=()=>`__${String(++Mb)}__`;function Rb(){let{router:l}=Zg("useSubmit"),{basename:a}=b.useContext(os),n=Jv();return b.useCallback(async(i,c={})=>{let{action:u,method:h,encType:g,formData:m,body:x}=hb(i,a);if(c.navigate===!1){let p=c.fetcherKey||Ob();await l.fetch(p,n,c.action||u,{preventScrollReset:c.preventScrollReset,formData:m,body:x,formMethod:c.method||h,formEncType:c.encType||g,flushSync:c.flushSync})}else await l.navigate(c.action||u,{preventScrollReset:c.preventScrollReset,formData:m,body:x,formMethod:c.method||h,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:n,flushSync:c.flushSync,viewTransition:c.viewTransition})},[l,a,n])}function Ub(l,{relative:a}={}){let{basename:n}=b.useContext(os),i=b.useContext(cs);Xe(i,"useFormAction must be used inside a RouteContext");let[c]=i.matches.slice(-1),u={..._l(l||".",{relative:a})},h=bs();if(l==null){u.search=h.search;let g=new URLSearchParams(u.search),m=g.getAll("index");if(m.some(p=>p==="")){g.delete("index"),m.filter(v=>v).forEach(v=>g.append("index",v));let p=g.toString();u.search=p?`?${p}`:""}}return(!l||l===".")&&c.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:zs([n,u.pathname])),yl(u)}function Lb(l,a={}){let n=b.useContext($g);Xe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Zg("useViewTransitionState"),c=_l(l,{relative:a.relative});if(!n.isTransitioning)return!1;let u=Ps(n.currentLocation.pathname,i)||n.currentLocation.pathname,h=Ps(n.nextLocation.pathname,i)||n.nextLocation.pathname;return so(c.pathname,h)!=null||so(c.pathname,u)!=null}var kl=Lg(),mo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(l){return this.listeners.add(l),this.onSubscribe(),()=>{this.listeners.delete(l),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},go=typeof window>"u"||"Deno"in globalThis;function ns(){}function Hb(l,a){return typeof l=="function"?l(a):l}function Bb(l){return typeof l=="number"&&l>=0&&l!==1/0}function qb(l,a){return Math.max(l+(a||0)-Date.now(),0)}function ed(l,a){return typeof l=="function"?l(a):l}function zb(l,a){return typeof l=="function"?l(a):l}function B0(l,a){const{type:n="all",exact:i,fetchStatus:c,predicate:u,queryKey:h,stale:g}=l;if(h){if(i){if(a.queryHash!==wd(h,a.options))return!1}else if(!bl(a.queryKey,h))return!1}if(n!=="all"){const m=a.isActive();if(n==="active"&&!m||n==="inactive"&&m)return!1}return!(typeof g=="boolean"&&a.isStale()!==g||c&&c!==a.state.fetchStatus||u&&!u(a))}function q0(l,a){const{exact:n,status:i,predicate:c,mutationKey:u}=l;if(u){if(!a.options.mutationKey)return!1;if(n){if(vl(a.options.mutationKey)!==vl(u))return!1}else if(!bl(a.options.mutationKey,u))return!1}return!(i&&a.state.status!==i||c&&!c(a))}function wd(l,a){return(a?.queryKeyHashFn||vl)(l)}function vl(l){return JSON.stringify(l,(a,n)=>td(n)?Object.keys(n).sort().reduce((i,c)=>(i[c]=n[c],i),{}):n)}function bl(l,a){return l===a?!0:typeof l!=typeof a?!1:l&&a&&typeof l=="object"&&typeof a=="object"?Object.keys(a).every(n=>bl(l[n],a[n])):!1}function Jg(l,a){if(l===a)return l;const n=z0(l)&&z0(a);if(n||td(l)&&td(a)){const i=n?l:Object.keys(l),c=i.length,u=n?a:Object.keys(a),h=u.length,g=n?[]:{},m=new Set(i);let x=0;for(let p=0;p<h;p++){const v=n?p:u[p];(!n&&m.has(v)||n)&&l[v]===void 0&&a[v]===void 0?(g[v]=void 0,x++):(g[v]=Jg(l[v],a[v]),g[v]===l[v]&&l[v]!==void 0&&x++)}return c===h&&x===c?l:g}return a}function z0(l){return Array.isArray(l)&&l.length===Object.keys(l).length}function td(l){if(!$0(l))return!1;const a=l.constructor;if(a===void 0)return!0;const n=a.prototype;return!(!$0(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(l)!==Object.prototype)}function $0(l){return Object.prototype.toString.call(l)==="[object Object]"}function $b(l){return new Promise(a=>{setTimeout(a,l)})}function Pb(l,a,n){return typeof n.structuralSharing=="function"?n.structuralSharing(l,a):n.structuralSharing!==!1?Jg(l,a):a}function Kb(l,a,n=0){const i=[...l,a];return n&&i.length>n?i.slice(1):i}function Gb(l,a,n=0){const i=[a,...l];return n&&i.length>n?i.slice(0,-1):i}var jd=Symbol();function Wg(l,a){return!l.queryFn&&a?.initialPromise?()=>a.initialPromise:!l.queryFn||l.queryFn===jd?()=>Promise.reject(new Error(`Missing queryFn: '${l.queryHash}'`)):l.queryFn}var Ib=class extends mo{#e;#t;#s;constructor(){super(),this.#s=l=>{if(!go&&window.addEventListener){const a=()=>l();return window.addEventListener("visibilitychange",a,!1),()=>{window.removeEventListener("visibilitychange",a)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(l){this.#s=l,this.#t?.(),this.#t=l(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()})}setFocused(l){this.#e!==l&&(this.#e=l,this.onFocus())}onFocus(){const l=this.isFocused();this.listeners.forEach(a=>{a(l)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},ex=new Ib,Vb=class extends mo{#e=!0;#t;#s;constructor(){super(),this.#s=l=>{if(!go&&window.addEventListener){const a=()=>l(!0),n=()=>l(!1);return window.addEventListener("online",a,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(l){this.#s=l,this.#t?.(),this.#t=l(this.setOnline.bind(this))}setOnline(l){this.#e!==l&&(this.#e=l,this.listeners.forEach(n=>{n(l)}))}isOnline(){return this.#e}},ao=new Vb;function Qb(){let l,a;const n=new Promise((c,u)=>{l=c,a=u});n.status="pending",n.catch(()=>{});function i(c){Object.assign(n,c),delete n.resolve,delete n.reject}return n.resolve=c=>{i({status:"fulfilled",value:c}),l(c)},n.reject=c=>{i({status:"rejected",reason:c}),a(c)},n}function Yb(l){return Math.min(1e3*2**l,3e4)}function tx(l){return(l??"online")==="online"?ao.isOnline():!0}var sx=class extends Error{constructor(l){super("CancelledError"),this.revert=l?.revert,this.silent=l?.silent}};function Bu(l){return l instanceof sx}function ax(l){let a=!1,n=0,i=!1,c;const u=Qb(),h=_=>{i||(j(new sx(_)),l.abort?.())},g=()=>{a=!0},m=()=>{a=!1},x=()=>ex.isFocused()&&(l.networkMode==="always"||ao.isOnline())&&l.canRun(),p=()=>tx(l.networkMode)&&l.canRun(),v=_=>{i||(i=!0,l.onSuccess?.(_),c?.(),u.resolve(_))},j=_=>{i||(i=!0,l.onError?.(_),c?.(),u.reject(_))},N=()=>new Promise(_=>{c=D=>{(i||x())&&_(D)},l.onPause?.()}).then(()=>{c=void 0,i||l.onContinue?.()}),S=()=>{if(i)return;let _;const D=n===0?l.initialPromise:void 0;try{_=D??l.fn()}catch(M){_=Promise.reject(M)}Promise.resolve(_).then(v).catch(M=>{if(i)return;const E=l.retry??(go?0:3),C=l.retryDelay??Yb,G=typeof C=="function"?C(n,M):C,z=E===!0||typeof E=="number"&&n<E||typeof E=="function"&&E(n,M);if(a||!z){j(M);return}n++,l.onFail?.(n,M),$b(G).then(()=>x()?void 0:N()).then(()=>{a?j(M):S()})})};return{promise:u,cancel:h,continue:()=>(c?.(),u),cancelRetry:g,continueRetry:m,canStart:p,start:()=>(p()?S():N().then(S),u)}}var Fb=l=>setTimeout(l,0);function Xb(){let l=[],a=0,n=g=>{g()},i=g=>{g()},c=Fb;const u=g=>{a?l.push(g):c(()=>{n(g)})},h=()=>{const g=l;l=[],g.length&&c(()=>{i(()=>{g.forEach(m=>{n(m)})})})};return{batch:g=>{let m;a++;try{m=g()}finally{a--,a||h()}return m},batchCalls:g=>(...m)=>{u(()=>{g(...m)})},schedule:u,setNotifyFunction:g=>{n=g},setBatchNotifyFunction:g=>{i=g},setScheduler:g=>{c=g}}}var St=Xb(),rx=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Bb(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(l){this.gcTime=Math.max(this.gcTime||0,l??(go?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},Zb=class extends rx{#e;#t;#s;#r;#a;#l;#i;constructor(l){super(),this.#i=!1,this.#l=l.defaultOptions,this.setOptions(l.options),this.observers=[],this.#r=l.client,this.#s=this.#r.getQueryCache(),this.queryKey=l.queryKey,this.queryHash=l.queryHash,this.#e=Wb(this.options),this.state=l.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#a?.promise}setOptions(l){this.options={...this.#l,...l},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(l,a){const n=Pb(this.state.data,l,this.options);return this.#n({data:n,type:"success",dataUpdatedAt:a?.updatedAt,manual:a?.manual}),n}setState(l,a){this.#n({type:"setState",state:l,setStateOptions:a})}cancel(l){const a=this.#a?.promise;return this.#a?.cancel(l),a?a.then(ns).catch(ns):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(l=>zb(l.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===jd||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(l=>ed(l.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(l=>l.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(l=0){return this.state.data===void 0?!0:l==="static"?!1:this.state.isInvalidated?!0:!qb(this.state.dataUpdatedAt,l)}onFocus(){this.observers.find(a=>a.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#a?.continue()}onOnline(){this.observers.find(a=>a.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#a?.continue()}addObserver(l){this.observers.includes(l)||(this.observers.push(l),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:l}))}removeObserver(l){this.observers.includes(l)&&(this.observers=this.observers.filter(a=>a!==l),this.observers.length||(this.#a&&(this.#i?this.#a.cancel({revert:!0}):this.#a.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:l}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#n({type:"invalidate"})}fetch(l,a){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&a?.cancelRefetch)this.cancel({silent:!0});else if(this.#a)return this.#a.continueRetry(),this.#a.promise}if(l&&this.setOptions(l),!this.options.queryFn){const m=this.observers.find(x=>x.options.queryFn);m&&this.setOptions(m.options)}const n=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(this.#i=!0,n.signal)})},c=()=>{const m=Wg(this.options,a),p=(()=>{const v={client:this.#r,queryKey:this.queryKey,meta:this.meta};return i(v),v})();return this.#i=!1,this.options.persister?this.options.persister(m,p,this):m(p)},h=(()=>{const m={fetchOptions:a,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:c};return i(m),m})();this.options.behavior?.onFetch(h,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==h.fetchOptions?.meta)&&this.#n({type:"fetch",meta:h.fetchOptions?.meta});const g=m=>{Bu(m)&&m.silent||this.#n({type:"error",error:m}),Bu(m)||(this.#s.config.onError?.(m,this),this.#s.config.onSettled?.(this.state.data,m,this)),this.scheduleGc()};return this.#a=ax({initialPromise:a?.initialPromise,fn:h.fetchFn,abort:n.abort.bind(n),onSuccess:m=>{if(m===void 0){g(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(x){g(x);return}this.#s.config.onSuccess?.(m,this),this.#s.config.onSettled?.(m,this.state.error,this),this.scheduleGc()},onError:g,onFail:(m,x)=>{this.#n({type:"failed",failureCount:m,error:x})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0}),this.#a.start()}#n(l){const a=n=>{switch(l.type){case"failed":return{...n,fetchFailureCount:l.failureCount,fetchFailureReason:l.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Jb(n.data,this.options),fetchMeta:l.meta??null};case"success":return this.#t=void 0,{...n,data:l.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:l.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!l.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=l.error;return Bu(i)&&i.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...l.state}}};this.state=a(this.state),St.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:l})})}};function Jb(l,a){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:tx(a.networkMode)?"fetching":"paused",...l===void 0&&{error:null,status:"pending"}}}function Wb(l){const a=typeof l.initialData=="function"?l.initialData():l.initialData,n=a!==void 0,i=n?typeof l.initialDataUpdatedAt=="function"?l.initialDataUpdatedAt():l.initialDataUpdatedAt:0;return{data:a,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ew=class extends mo{constructor(l={}){super(),this.config=l,this.#e=new Map}#e;build(l,a,n){const i=a.queryKey,c=a.queryHash??wd(i,a);let u=this.get(c);return u||(u=new Zb({client:l,queryKey:i,queryHash:c,options:l.defaultQueryOptions(a),state:n,defaultOptions:l.getQueryDefaults(i)}),this.add(u)),u}add(l){this.#e.has(l.queryHash)||(this.#e.set(l.queryHash,l),this.notify({type:"added",query:l}))}remove(l){const a=this.#e.get(l.queryHash);a&&(l.destroy(),a===l&&this.#e.delete(l.queryHash),this.notify({type:"removed",query:l}))}clear(){St.batch(()=>{this.getAll().forEach(l=>{this.remove(l)})})}get(l){return this.#e.get(l)}getAll(){return[...this.#e.values()]}find(l){const a={exact:!0,...l};return this.getAll().find(n=>B0(a,n))}findAll(l={}){const a=this.getAll();return Object.keys(l).length>0?a.filter(n=>B0(l,n)):a}notify(l){St.batch(()=>{this.listeners.forEach(a=>{a(l)})})}onFocus(){St.batch(()=>{this.getAll().forEach(l=>{l.onFocus()})})}onOnline(){St.batch(()=>{this.getAll().forEach(l=>{l.onOnline()})})}},tw=class extends rx{#e;#t;#s;constructor(l){super(),this.mutationId=l.mutationId,this.#t=l.mutationCache,this.#e=[],this.state=l.state||sw(),this.setOptions(l.options),this.scheduleGc()}setOptions(l){this.options=l,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(l){this.#e.includes(l)||(this.#e.push(l),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:l}))}removeObserver(l){this.#e=this.#e.filter(a=>a!==l),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:l})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(l){const a=()=>{this.#r({type:"continue"})};this.#s=ax({fn:()=>this.options.mutationFn?this.options.mutationFn(l):Promise.reject(new Error("No mutationFn found")),onFail:(c,u)=>{this.#r({type:"failed",failureCount:c,error:u})},onPause:()=>{this.#r({type:"pause"})},onContinue:a,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const n=this.state.status==="pending",i=!this.#s.canStart();try{if(n)a();else{this.#r({type:"pending",variables:l,isPaused:i}),await this.#t.config.onMutate?.(l,this);const u=await this.options.onMutate?.(l);u!==this.state.context&&this.#r({type:"pending",context:u,variables:l,isPaused:i})}const c=await this.#s.start();return await this.#t.config.onSuccess?.(c,l,this.state.context,this),await this.options.onSuccess?.(c,l,this.state.context),await this.#t.config.onSettled?.(c,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(c,null,l,this.state.context),this.#r({type:"success",data:c}),c}catch(c){try{throw await this.#t.config.onError?.(c,l,this.state.context,this),await this.options.onError?.(c,l,this.state.context),await this.#t.config.onSettled?.(void 0,c,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,c,l,this.state.context),c}finally{this.#r({type:"error",error:c})}}finally{this.#t.runNext(this)}}#r(l){const a=n=>{switch(l.type){case"failed":return{...n,failureCount:l.failureCount,failureReason:l.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:l.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:l.isPaused,status:"pending",variables:l.variables,submittedAt:Date.now()};case"success":return{...n,data:l.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:l.error,failureCount:n.failureCount+1,failureReason:l.error,isPaused:!1,status:"error"}}};this.state=a(this.state),St.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(l)}),this.#t.notify({mutation:this,type:"updated",action:l})})}};function sw(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var aw=class extends mo{constructor(l={}){super(),this.config=l,this.#e=new Set,this.#t=new Map,this.#s=0}#e;#t;#s;build(l,a,n){const i=new tw({mutationCache:this,mutationId:++this.#s,options:l.defaultMutationOptions(a),state:n});return this.add(i),i}add(l){this.#e.add(l);const a=Ki(l);if(typeof a=="string"){const n=this.#t.get(a);n?n.push(l):this.#t.set(a,[l])}this.notify({type:"added",mutation:l})}remove(l){if(this.#e.delete(l)){const a=Ki(l);if(typeof a=="string"){const n=this.#t.get(a);if(n)if(n.length>1){const i=n.indexOf(l);i!==-1&&n.splice(i,1)}else n[0]===l&&this.#t.delete(a)}}this.notify({type:"removed",mutation:l})}canRun(l){const a=Ki(l);if(typeof a=="string"){const i=this.#t.get(a)?.find(c=>c.state.status==="pending");return!i||i===l}else return!0}runNext(l){const a=Ki(l);return typeof a=="string"?this.#t.get(a)?.find(i=>i!==l&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){St.batch(()=>{this.#e.forEach(l=>{this.notify({type:"removed",mutation:l})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(l){const a={exact:!0,...l};return this.getAll().find(n=>q0(a,n))}findAll(l={}){return this.getAll().filter(a=>q0(l,a))}notify(l){St.batch(()=>{this.listeners.forEach(a=>{a(l)})})}resumePausedMutations(){const l=this.getAll().filter(a=>a.state.isPaused);return St.batch(()=>Promise.all(l.map(a=>a.continue().catch(ns))))}};function Ki(l){return l.options.scope?.id}function P0(l){return{onFetch:(a,n)=>{const i=a.options,c=a.fetchOptions?.meta?.fetchMore?.direction,u=a.state.data?.pages||[],h=a.state.data?.pageParams||[];let g={pages:[],pageParams:[]},m=0;const x=async()=>{let p=!1;const v=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(a.signal.aborted?p=!0:a.signal.addEventListener("abort",()=>{p=!0}),a.signal)})},j=Wg(a.options,a.fetchOptions),N=async(S,_,D)=>{if(p)return Promise.reject();if(_==null&&S.pages.length)return Promise.resolve(S);const E=(()=>{const H={client:a.client,queryKey:a.queryKey,pageParam:_,direction:D?"backward":"forward",meta:a.options.meta};return v(H),H})(),C=await j(E),{maxPages:G}=a.options,z=D?Gb:Kb;return{pages:z(S.pages,C,G),pageParams:z(S.pageParams,_,G)}};if(c&&u.length){const S=c==="backward",_=S?rw:K0,D={pages:u,pageParams:h},M=_(i,D);g=await N(D,M,S)}else{const S=l??u.length;do{const _=m===0?h[0]??i.initialPageParam:K0(i,g);if(m>0&&_==null)break;g=await N(g,_),m++}while(m<S)}return g};a.options.persister?a.fetchFn=()=>a.options.persister?.(x,{client:a.client,queryKey:a.queryKey,meta:a.options.meta,signal:a.signal},n):a.fetchFn=x}}}function K0(l,{pages:a,pageParams:n}){const i=a.length-1;return a.length>0?l.getNextPageParam(a[i],a,n[i],n):void 0}function rw(l,{pages:a,pageParams:n}){return a.length>0?l.getPreviousPageParam?.(a[0],a,n[0],n):void 0}var nw=class{#e;#t;#s;#r;#a;#l;#i;#n;constructor(l={}){this.#e=l.queryCache||new ew,this.#t=l.mutationCache||new aw,this.#s=l.defaultOptions||{},this.#r=new Map,this.#a=new Map,this.#l=0}mount(){this.#l++,this.#l===1&&(this.#i=ex.subscribe(async l=>{l&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#n=ao.subscribe(async l=>{l&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#l--,this.#l===0&&(this.#i?.(),this.#i=void 0,this.#n?.(),this.#n=void 0)}isFetching(l){return this.#e.findAll({...l,fetchStatus:"fetching"}).length}isMutating(l){return this.#t.findAll({...l,status:"pending"}).length}getQueryData(l){const a=this.defaultQueryOptions({queryKey:l});return this.#e.get(a.queryHash)?.state.data}ensureQueryData(l){const a=this.defaultQueryOptions(l),n=this.#e.build(this,a),i=n.state.data;return i===void 0?this.fetchQuery(l):(l.revalidateIfStale&&n.isStaleByTime(ed(a.staleTime,n))&&this.prefetchQuery(a),Promise.resolve(i))}getQueriesData(l){return this.#e.findAll(l).map(({queryKey:a,state:n})=>{const i=n.data;return[a,i]})}setQueryData(l,a,n){const i=this.defaultQueryOptions({queryKey:l}),u=this.#e.get(i.queryHash)?.state.data,h=Hb(a,u);if(h!==void 0)return this.#e.build(this,i).setData(h,{...n,manual:!0})}setQueriesData(l,a,n){return St.batch(()=>this.#e.findAll(l).map(({queryKey:i})=>[i,this.setQueryData(i,a,n)]))}getQueryState(l){const a=this.defaultQueryOptions({queryKey:l});return this.#e.get(a.queryHash)?.state}removeQueries(l){const a=this.#e;St.batch(()=>{a.findAll(l).forEach(n=>{a.remove(n)})})}resetQueries(l,a){const n=this.#e;return St.batch(()=>(n.findAll(l).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...l},a)))}cancelQueries(l,a={}){const n={revert:!0,...a},i=St.batch(()=>this.#e.findAll(l).map(c=>c.cancel(n)));return Promise.all(i).then(ns).catch(ns)}invalidateQueries(l,a={}){return St.batch(()=>(this.#e.findAll(l).forEach(n=>{n.invalidate()}),l?.refetchType==="none"?Promise.resolve():this.refetchQueries({...l,type:l?.refetchType??l?.type??"active"},a)))}refetchQueries(l,a={}){const n={...a,cancelRefetch:a.cancelRefetch??!0},i=St.batch(()=>this.#e.findAll(l).filter(c=>!c.isDisabled()&&!c.isStatic()).map(c=>{let u=c.fetch(void 0,n);return n.throwOnError||(u=u.catch(ns)),c.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(i).then(ns)}fetchQuery(l){const a=this.defaultQueryOptions(l);a.retry===void 0&&(a.retry=!1);const n=this.#e.build(this,a);return n.isStaleByTime(ed(a.staleTime,n))?n.fetch(a):Promise.resolve(n.state.data)}prefetchQuery(l){return this.fetchQuery(l).then(ns).catch(ns)}fetchInfiniteQuery(l){return l.behavior=P0(l.pages),this.fetchQuery(l)}prefetchInfiniteQuery(l){return this.fetchInfiniteQuery(l).then(ns).catch(ns)}ensureInfiniteQueryData(l){return l.behavior=P0(l.pages),this.ensureQueryData(l)}resumePausedMutations(){return ao.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(l){this.#s=l}setQueryDefaults(l,a){this.#r.set(vl(l),{queryKey:l,defaultOptions:a})}getQueryDefaults(l){const a=[...this.#r.values()],n={};return a.forEach(i=>{bl(l,i.queryKey)&&Object.assign(n,i.defaultOptions)}),n}setMutationDefaults(l,a){this.#a.set(vl(l),{mutationKey:l,defaultOptions:a})}getMutationDefaults(l){const a=[...this.#a.values()],n={};return a.forEach(i=>{bl(l,i.mutationKey)&&Object.assign(n,i.defaultOptions)}),n}defaultQueryOptions(l){if(l._defaulted)return l;const a={...this.#s.queries,...this.getQueryDefaults(l.queryKey),...l,_defaulted:!0};return a.queryHash||(a.queryHash=wd(a.queryKey,a)),a.refetchOnReconnect===void 0&&(a.refetchOnReconnect=a.networkMode!=="always"),a.throwOnError===void 0&&(a.throwOnError=!!a.suspense),!a.networkMode&&a.persister&&(a.networkMode="offlineFirst"),a.queryFn===jd&&(a.enabled=!1),a}defaultMutationOptions(l){return l?._defaulted?l:{...this.#s.mutations,...l?.mutationKey&&this.getMutationDefaults(l.mutationKey),...l,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},lw=b.createContext(void 0),iw=({client:l,children:a})=>(b.useEffect(()=>(l.mount(),()=>{l.unmount()}),[l]),s.jsx(lw.Provider,{value:l,children:a}));const ow="modulepreload",cw=function(l){return"/"+l},G0={},Tl=function(a,n,i){let c=Promise.resolve();if(n&&n.length>0){let x=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(j=>({status:"fulfilled",value:j}),j=>({status:"rejected",reason:j}))))};var h=x;document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),m=g?.nonce||g?.getAttribute("nonce");c=x(n.map(p=>{if(p=cw(p),p in G0)return;G0[p]=!0;const v=p.endsWith(".css"),j=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${j}`))return;const N=document.createElement("link");if(N.rel=v?"stylesheet":ow,v||(N.as="script"),N.crossOrigin="",N.href=p,m&&N.setAttribute("nonce",m),document.head.appendChild(N),v)return new Promise((S,_)=>{N.addEventListener("load",S),N.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${p}`)))})}))}function u(g){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=g,window.dispatchEvent(m),!m.defaultPrevented)throw g}return c.then(g=>{for(const m of g||[])m.status==="rejected"&&u(m.reason);return a().catch(u)})},uw=l=>{let a;return l?a=l:typeof fetch>"u"?a=(...n)=>Tl(async()=>{const{default:i}=await Promise.resolve().then(()=>nn);return{default:i}},[]).then(({default:i})=>i(...n)):a=fetch,(...n)=>a(...n)};class Nd extends Error{constructor(a,n="FunctionsError",i){super(a),this.name=n,this.context=i}}class dw extends Nd{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class I0 extends Nd{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class V0 extends Nd{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}var sd;(function(l){l.Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2"})(sd||(sd={}));var hw=function(l,a,n,i){function c(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function g(p){try{x(i.next(p))}catch(v){h(v)}}function m(p){try{x(i.throw(p))}catch(v){h(v)}}function x(p){p.done?u(p.value):c(p.value).then(g,m)}x((i=i.apply(l,a||[])).next())})};class fw{constructor(a,{headers:n={},customFetch:i,region:c=sd.Any}={}){this.url=a,this.headers=n,this.region=c,this.fetch=uw(i)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a,n={}){var i;return hw(this,void 0,void 0,function*(){try{const{headers:c,method:u,body:h}=n;let g={},{region:m}=n;m||(m=this.region);const x=new URL(`${this.url}/${a}`);m&&m!=="any"&&(g["x-region"]=m,x.searchParams.set("forceFunctionRegion",m));let p;h&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)&&(typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",p=h):typeof h=="string"?(g["Content-Type"]="text/plain",p=h):typeof FormData<"u"&&h instanceof FormData?p=h:(g["Content-Type"]="application/json",p=JSON.stringify(h)));const v=yield this.fetch(x.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),c),body:p}).catch(_=>{throw new dw(_)}),j=v.headers.get("x-relay-error");if(j&&j==="true")throw new I0(v);if(!v.ok)throw new V0(v);let N=((i=v.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),S;return N==="application/json"?S=yield v.json():N==="application/octet-stream"?S=yield v.blob():N==="text/event-stream"?S=v:N==="multipart/form-data"?S=yield v.formData():S=yield v.text(),{data:S,error:null,response:v}}catch(c){return{data:null,error:c,response:c instanceof V0||c instanceof I0?c.context:void 0}}})}}var ht={},zr={},$r={},Pr={},Kr={},Gr={},mw=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},tn=mw();const gw=tn.fetch,nx=tn.fetch.bind(tn),lx=tn.Headers,xw=tn.Request,pw=tn.Response,nn=Object.freeze(Object.defineProperty({__proto__:null,Headers:lx,Request:xw,Response:pw,default:nx,fetch:gw},Symbol.toStringTag,{value:"Module"})),yw=av(nn);var Gi={},Q0;function ix(){if(Q0)return Gi;Q0=1,Object.defineProperty(Gi,"__esModule",{value:!0});class l extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Gi.default=l,Gi}var Y0;function ox(){if(Y0)return Gr;Y0=1;var l=Gr&&Gr.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Gr,"__esModule",{value:!0});const a=l(yw),n=l(ix());class i{constructor(u){this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=u.headers,this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=u.shouldThrowOnError,this.signal=u.signal,this.isMaybeSingle=u.isMaybeSingle,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=a.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,h){return this.headers=Object.assign({},this.headers),this.headers[u]=h,this}then(u,h){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const g=this.fetch;let m=g(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async x=>{var p,v,j;let N=null,S=null,_=null,D=x.status,M=x.statusText;if(x.ok){if(this.method!=="HEAD"){const z=await x.text();z===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?S=z:S=JSON.parse(z))}const C=(p=this.headers.Prefer)===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),G=(v=x.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");C&&G&&G.length>1&&(_=parseInt(G[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(N={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,_=null,D=406,M="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const C=await x.text();try{N=JSON.parse(C),Array.isArray(N)&&x.status===404&&(S=[],N=null,D=200,M="OK")}catch{x.status===404&&C===""?(D=204,M="No Content"):N={message:C}}if(N&&this.isMaybeSingle&&(!((j=N?.details)===null||j===void 0)&&j.includes("0 rows"))&&(N=null,D=200,M="OK"),N&&this.shouldThrowOnError)throw new n.default(N)}return{error:N,data:S,count:_,status:D,statusText:M}});return this.shouldThrowOnError||(m=m.catch(x=>{var p,v,j;return{error:{message:`${(p=x?.name)!==null&&p!==void 0?p:"FetchError"}: ${x?.message}`,details:`${(v=x?.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(j=x?.code)!==null&&j!==void 0?j:""}`},data:null,count:null,status:0,statusText:""}})),m.then(u,h)}returns(){return this}overrideTypes(){return this}}return Gr.default=i,Gr}var F0;function cx(){if(F0)return Kr;F0=1;var l=Kr&&Kr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Kr,"__esModule",{value:!0});const a=l(ox());class n extends a.default{select(c){let u=!1;const h=(c??"*").split("").map(g=>/\s/.test(g)&&!u?"":(g==='"'&&(u=!u),g)).join("");return this.url.searchParams.set("select",h),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(c,{ascending:u=!0,nullsFirst:h,foreignTable:g,referencedTable:m=g}={}){const x=m?`${m}.order`:"order",p=this.url.searchParams.get(x);return this.url.searchParams.set(x,`${p?`${p},`:""}${c}.${u?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:u,referencedTable:h=u}={}){const g=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(g,`${c}`),this}range(c,u,{foreignTable:h,referencedTable:g=h}={}){const m=typeof g>"u"?"offset":`${g}.offset`,x=typeof g>"u"?"limit":`${g}.limit`;return this.url.searchParams.set(m,`${c}`),this.url.searchParams.set(x,`${u-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:c=!1,verbose:u=!1,settings:h=!1,buffers:g=!1,wal:m=!1,format:x="text"}={}){var p;const v=[c?"analyze":null,u?"verbose":null,h?"settings":null,g?"buffers":null,m?"wal":null].filter(Boolean).join("|"),j=(p=this.headers.Accept)!==null&&p!==void 0?p:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${x}; for="${j}"; options=${v};`,x==="json"?this:this}rollback(){var c;return((c=this.headers.Prefer)!==null&&c!==void 0?c:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Kr.default=n,Kr}var X0;function Sd(){if(X0)return Pr;X0=1;var l=Pr&&Pr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Pr,"__esModule",{value:!0});const a=l(cx());class n extends a.default{eq(c,u){return this.url.searchParams.append(c,`eq.${u}`),this}neq(c,u){return this.url.searchParams.append(c,`neq.${u}`),this}gt(c,u){return this.url.searchParams.append(c,`gt.${u}`),this}gte(c,u){return this.url.searchParams.append(c,`gte.${u}`),this}lt(c,u){return this.url.searchParams.append(c,`lt.${u}`),this}lte(c,u){return this.url.searchParams.append(c,`lte.${u}`),this}like(c,u){return this.url.searchParams.append(c,`like.${u}`),this}likeAllOf(c,u){return this.url.searchParams.append(c,`like(all).{${u.join(",")}}`),this}likeAnyOf(c,u){return this.url.searchParams.append(c,`like(any).{${u.join(",")}}`),this}ilike(c,u){return this.url.searchParams.append(c,`ilike.${u}`),this}ilikeAllOf(c,u){return this.url.searchParams.append(c,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(c,u){return this.url.searchParams.append(c,`ilike(any).{${u.join(",")}}`),this}is(c,u){return this.url.searchParams.append(c,`is.${u}`),this}in(c,u){const h=Array.from(new Set(u)).map(g=>typeof g=="string"&&new RegExp("[,()]").test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(c,`in.(${h})`),this}contains(c,u){return typeof u=="string"?this.url.searchParams.append(c,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(c,`cs.{${u.join(",")}}`):this.url.searchParams.append(c,`cs.${JSON.stringify(u)}`),this}containedBy(c,u){return typeof u=="string"?this.url.searchParams.append(c,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(c,`cd.{${u.join(",")}}`):this.url.searchParams.append(c,`cd.${JSON.stringify(u)}`),this}rangeGt(c,u){return this.url.searchParams.append(c,`sr.${u}`),this}rangeGte(c,u){return this.url.searchParams.append(c,`nxl.${u}`),this}rangeLt(c,u){return this.url.searchParams.append(c,`sl.${u}`),this}rangeLte(c,u){return this.url.searchParams.append(c,`nxr.${u}`),this}rangeAdjacent(c,u){return this.url.searchParams.append(c,`adj.${u}`),this}overlaps(c,u){return typeof u=="string"?this.url.searchParams.append(c,`ov.${u}`):this.url.searchParams.append(c,`ov.{${u.join(",")}}`),this}textSearch(c,u,{config:h,type:g}={}){let m="";g==="plain"?m="pl":g==="phrase"?m="ph":g==="websearch"&&(m="w");const x=h===void 0?"":`(${h})`;return this.url.searchParams.append(c,`${m}fts${x}.${u}`),this}match(c){return Object.entries(c).forEach(([u,h])=>{this.url.searchParams.append(u,`eq.${h}`)}),this}not(c,u,h){return this.url.searchParams.append(c,`not.${u}.${h}`),this}or(c,{foreignTable:u,referencedTable:h=u}={}){const g=h?`${h}.or`:"or";return this.url.searchParams.append(g,`(${c})`),this}filter(c,u,h){return this.url.searchParams.append(c,`${u}.${h}`),this}}return Pr.default=n,Pr}var Z0;function ux(){if(Z0)return $r;Z0=1;var l=$r&&$r.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty($r,"__esModule",{value:!0});const a=l(Sd());class n{constructor(c,{headers:u={},schema:h,fetch:g}){this.url=c,this.headers=u,this.schema=h,this.fetch=g}select(c,{head:u=!1,count:h}={}){const g=u?"HEAD":"GET";let m=!1;const x=(c??"*").split("").map(p=>/\s/.test(p)&&!m?"":(p==='"'&&(m=!m),p)).join("");return this.url.searchParams.set("select",x),h&&(this.headers.Prefer=`count=${h}`),new a.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(c,{count:u,defaultToNull:h=!0}={}){const g="POST",m=[];if(this.headers.Prefer&&m.push(this.headers.Prefer),u&&m.push(`count=${u}`),h||m.push("missing=default"),this.headers.Prefer=m.join(","),Array.isArray(c)){const x=c.reduce((p,v)=>p.concat(Object.keys(v)),[]);if(x.length>0){const p=[...new Set(x)].map(v=>`"${v}"`);this.url.searchParams.set("columns",p.join(","))}}return new a.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:this.fetch,allowEmpty:!1})}upsert(c,{onConflict:u,ignoreDuplicates:h=!1,count:g,defaultToNull:m=!0}={}){const x="POST",p=[`resolution=${h?"ignore":"merge"}-duplicates`];if(u!==void 0&&this.url.searchParams.set("on_conflict",u),this.headers.Prefer&&p.push(this.headers.Prefer),g&&p.push(`count=${g}`),m||p.push("missing=default"),this.headers.Prefer=p.join(","),Array.isArray(c)){const v=c.reduce((j,N)=>j.concat(Object.keys(N)),[]);if(v.length>0){const j=[...new Set(v)].map(N=>`"${N}"`);this.url.searchParams.set("columns",j.join(","))}}return new a.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:this.fetch,allowEmpty:!1})}update(c,{count:u}={}){const h="PATCH",g=[];return this.headers.Prefer&&g.push(this.headers.Prefer),u&&g.push(`count=${u}`),this.headers.Prefer=g.join(","),new a.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:this.fetch,allowEmpty:!1})}delete({count:c}={}){const u="DELETE",h=[];return c&&h.push(`count=${c}`),this.headers.Prefer&&h.unshift(this.headers.Prefer),this.headers.Prefer=h.join(","),new a.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return $r.default=n,$r}var cl={},ul={},J0;function vw(){return J0||(J0=1,Object.defineProperty(ul,"__esModule",{value:!0}),ul.version=void 0,ul.version="0.0.0-automated"),ul}var W0;function bw(){if(W0)return cl;W0=1,Object.defineProperty(cl,"__esModule",{value:!0}),cl.DEFAULT_HEADERS=void 0;const l=vw();return cl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${l.version}`},cl}var eg;function ww(){if(eg)return zr;eg=1;var l=zr&&zr.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(zr,"__esModule",{value:!0});const a=l(ux()),n=l(Sd()),i=bw();class c{constructor(h,{headers:g={},schema:m,fetch:x}={}){this.url=h,this.headers=Object.assign(Object.assign({},i.DEFAULT_HEADERS),g),this.schemaName=m,this.fetch=x}from(h){const g=new URL(`${this.url}/${h}`);return new a.default(g,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(h){return new c(this.url,{headers:this.headers,schema:h,fetch:this.fetch})}rpc(h,g={},{head:m=!1,get:x=!1,count:p}={}){let v;const j=new URL(`${this.url}/rpc/${h}`);let N;m||x?(v=m?"HEAD":"GET",Object.entries(g).filter(([_,D])=>D!==void 0).map(([_,D])=>[_,Array.isArray(D)?`{${D.join(",")}}`:`${D}`]).forEach(([_,D])=>{j.searchParams.append(_,D)})):(v="POST",N=g);const S=Object.assign({},this.headers);return p&&(S.Prefer=`count=${p}`),new n.default({method:v,url:j,headers:S,schema:this.schemaName,body:N,fetch:this.fetch,allowEmpty:!1})}}return zr.default=c,zr}var tg;function jw(){if(tg)return ht;tg=1;var l=ht&&ht.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(ht,"__esModule",{value:!0}),ht.PostgrestError=ht.PostgrestBuilder=ht.PostgrestTransformBuilder=ht.PostgrestFilterBuilder=ht.PostgrestQueryBuilder=ht.PostgrestClient=void 0;const a=l(ww());ht.PostgrestClient=a.default;const n=l(ux());ht.PostgrestQueryBuilder=n.default;const i=l(Sd());ht.PostgrestFilterBuilder=i.default;const c=l(cx());ht.PostgrestTransformBuilder=c.default;const u=l(ox());ht.PostgrestBuilder=u.default;const h=l(ix());return ht.PostgrestError=h.default,ht.default={PostgrestClient:a.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:u.default,PostgrestError:h.default},ht}var Nw=jw();const Sw=Ug(Nw),{PostgrestClient:_w,PostgrestQueryBuilder:aS,PostgrestFilterBuilder:rS,PostgrestTransformBuilder:nS,PostgrestBuilder:lS,PostgrestError:iS}=Sw;function kw(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Tw=kw(),Ew="2.11.15",Cw=`realtime-js/${Ew}`,Dw="1.0.0",dx=1e4,Aw=1e3;var ml;(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(ml||(ml={}));var wt;(function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"})(wt||(wt={}));var ls;(function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"})(ls||(ls={}));var ad;(function(l){l.websocket="websocket"})(ad||(ad={}));var Va;(function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"})(Va||(Va={}));class Mw{constructor(){this.HEADER_LENGTH=1}decode(a,n){return a.constructor===ArrayBuffer?n(this._binaryDecode(a)):n(typeof a=="string"?JSON.parse(a):{})}_binaryDecode(a){const n=new DataView(a),i=new TextDecoder;return this._decodeBroadcast(a,n,i)}_decodeBroadcast(a,n,i){const c=n.getUint8(1),u=n.getUint8(2);let h=this.HEADER_LENGTH+2;const g=i.decode(a.slice(h,h+c));h=h+c;const m=i.decode(a.slice(h,h+u));h=h+u;const x=JSON.parse(i.decode(a.slice(h,a.byteLength)));return{ref:null,topic:g,event:m,payload:x}}}class hx{constructor(a,n){this.callback=a,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Qe;(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(Qe||(Qe={}));const sg=(l,a,n={})=>{var i;const c=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(a).reduce((u,h)=>(u[h]=Ow(h,l,a,c),u),{})},Ow=(l,a,n,i)=>{const c=a.find(g=>g.name===l),u=c?.type,h=n[l];return u&&!i.includes(u)?fx(u,h):rd(h)},fx=(l,a)=>{if(l.charAt(0)==="_"){const n=l.slice(1,l.length);return Hw(a,n)}switch(l){case Qe.bool:return Rw(a);case Qe.float4:case Qe.float8:case Qe.int2:case Qe.int4:case Qe.int8:case Qe.numeric:case Qe.oid:return Uw(a);case Qe.json:case Qe.jsonb:return Lw(a);case Qe.timestamp:return Bw(a);case Qe.abstime:case Qe.date:case Qe.daterange:case Qe.int4range:case Qe.int8range:case Qe.money:case Qe.reltime:case Qe.text:case Qe.time:case Qe.timestamptz:case Qe.timetz:case Qe.tsrange:case Qe.tstzrange:return rd(a);default:return rd(a)}},rd=l=>l,Rw=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},Uw=l=>{if(typeof l=="string"){const a=parseFloat(l);if(!Number.isNaN(a))return a}return l},Lw=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch(a){return console.log(`JSON parse error: ${a}`),l}return l},Hw=(l,a)=>{if(typeof l!="string")return l;const n=l.length-1,i=l[n];if(l[0]==="{"&&i==="}"){let u;const h=l.slice(1,n);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(g=>fx(a,g))}return l},Bw=l=>typeof l=="string"?l.replace(" ","T"):l,mx=l=>{let a=l;return a=a.replace(/^ws/i,"http"),a=a.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),a.replace(/\/+$/,"")};class qu{constructor(a,n,i={},c=dx){this.channel=a,this.event=n,this.payload=i,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,n){var i;return this._hasReceived(a)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:a,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const a=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:n}){this.recHooks.filter(i=>i.status===a).forEach(i=>i.callback(n))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}var ag;(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(ag||(ag={}));class gl{constructor(a,n){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},c=>{const{onJoin:u,onLeave:h,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gl.syncState(this.state,c,u,h),this.pendingDiffs.forEach(m=>{this.state=gl.syncDiff(this.state,m,u,h)}),this.pendingDiffs=[],g()}),this.channel._on(i.diff,{},c=>{const{onJoin:u,onLeave:h,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=gl.syncDiff(this.state,c,u,h),g())}),this.onJoin((c,u,h)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:u,newPresences:h})}),this.onLeave((c,u,h)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,n,i,c){const u=this.cloneDeep(a),h=this.transformState(n),g={},m={};return this.map(u,(x,p)=>{h[x]||(m[x]=p)}),this.map(h,(x,p)=>{const v=u[x];if(v){const j=p.map(D=>D.presence_ref),N=v.map(D=>D.presence_ref),S=p.filter(D=>N.indexOf(D.presence_ref)<0),_=v.filter(D=>j.indexOf(D.presence_ref)<0);S.length>0&&(g[x]=S),_.length>0&&(m[x]=_)}else g[x]=p}),this.syncDiff(u,{joins:g,leaves:m},i,c)}static syncDiff(a,n,i,c){const{joins:u,leaves:h}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),c||(c=()=>{}),this.map(u,(g,m)=>{var x;const p=(x=a[g])!==null&&x!==void 0?x:[];if(a[g]=this.cloneDeep(m),p.length>0){const v=a[g].map(N=>N.presence_ref),j=p.filter(N=>v.indexOf(N.presence_ref)<0);a[g].unshift(...j)}i(g,p,m)}),this.map(h,(g,m)=>{let x=a[g];if(!x)return;const p=m.map(v=>v.presence_ref);x=x.filter(v=>p.indexOf(v.presence_ref)<0),a[g]=x,c(g,x,m),x.length===0&&delete a[g]}),a}static map(a,n){return Object.getOwnPropertyNames(a).map(i=>n(i,a[i]))}static transformState(a){return a=this.cloneDeep(a),Object.getOwnPropertyNames(a).reduce((n,i)=>{const c=a[i];return"metas"in c?n[i]=c.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):n[i]=c,n},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var rg;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(rg||(rg={}));var ng;(function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system"})(ng||(ng={}));var Bs;(function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"})(Bs||(Bs={}));class _d{constructor(a,n={config:{}},i){this.topic=a,this.params=n,this.socket=i,this.bindings={},this.state=wt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new qu(this,ls.join,this.params,this.timeout),this.rejoinTimer=new hx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=wt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=wt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ls.reply,{},(c,u)=>{this._trigger(this._replyEventName(u),c)}),this.presence=new gl(this),this.broadcastEndpointURL=mx(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(a,n=this.timeout){var i,c;if(this.socket.isConnected()||this.socket.connect(),this.state==wt.closed){const{config:{broadcast:u,presence:h,private:g}}=this.params;this._onError(p=>a?.(Bs.CHANNEL_ERROR,p)),this._onClose(()=>a?.(Bs.CLOSED));const m={},x={broadcast:u,presence:h,postgres_changes:(c=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(p=>p.filter))!==null&&c!==void 0?c:[],private:g};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:x},m)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var v;if(this.socket.setAuth(),p===void 0){a?.(Bs.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,N=(v=j?.length)!==null&&v!==void 0?v:0,S=[];for(let _=0;_<N;_++){const D=j[_],{filter:{event:M,schema:E,table:C,filter:G}}=D,z=p&&p[_];if(z&&z.event===M&&z.schema===E&&z.table===C&&z.filter===G)S.push(Object.assign(Object.assign({},D),{id:z.id}));else{this.unsubscribe(),this.state=wt.errored,a?.(Bs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,a&&a(Bs.SUBSCRIBED);return}}).receive("error",p=>{this.state=wt.errored,a?.(Bs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{a?.(Bs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,n={}){return await this.send({type:"presence",event:"track",payload:a},n.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,n,i){return this._on(a,n,i)}async send(a,n={}){var i,c;if(!this._canPush()&&a.type==="broadcast"){const{event:u,payload:h}=a,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const x=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((c=x.body)===null||c===void 0?void 0:c.cancel()),x.ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,g,m;const x=this._push(a.type,a,n.timeout||this.timeout);a.type==="broadcast"&&!(!((m=(g=(h=this.params)===null||h===void 0?void 0:h.config)===null||g===void 0?void 0:g.broadcast)===null||m===void 0)&&m.ack)&&u("ok"),x.receive("ok",()=>u("ok")),x.receive("error",()=>u("error")),x.receive("timeout",()=>u("timed out"))})}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=wt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ls.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(c=>{i=new qu(this,ls.leave,{},a),i.receive("ok",()=>{n(),c("ok")}).receive("timeout",()=>{n(),c("timed out")}).receive("error",()=>{c("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(a,n,i){const c=new AbortController,u=setTimeout(()=>c.abort(),i),h=await this.socket.fetch(a,Object.assign(Object.assign({},n),{signal:c.signal}));return clearTimeout(u),h}_push(a,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new qu(this,a,n,i);return this._canPush()?c.send():(c.startTimeout(),this.pushBuffer.push(c)),c}_onMessage(a,n,i){return n}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,n,i){var c,u;const h=a.toLocaleLowerCase(),{close:g,error:m,leave:x,join:p}=ls;if(i&&[g,m,x,p].indexOf(h)>=0&&i!==this._joinRef())return;let j=this._onMessage(h,n,i);if(n&&!j)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(N=>{var S,_,D;return((S=N.filter)===null||S===void 0?void 0:S.event)==="*"||((D=(_=N.filter)===null||_===void 0?void 0:_.event)===null||D===void 0?void 0:D.toLocaleLowerCase())===h}).map(N=>N.callback(j,i)):(u=this.bindings[h])===null||u===void 0||u.filter(N=>{var S,_,D,M,E,C;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in N){const G=N.id,z=(S=N.filter)===null||S===void 0?void 0:S.event;return G&&((_=n.ids)===null||_===void 0?void 0:_.includes(G))&&(z==="*"||z?.toLocaleLowerCase()===((D=n.data)===null||D===void 0?void 0:D.type.toLocaleLowerCase()))}else{const G=(E=(M=N?.filter)===null||M===void 0?void 0:M.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return G==="*"||G===((C=n?.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return N.type.toLocaleLowerCase()===h}).map(N=>{if(typeof j=="object"&&"ids"in j){const S=j.data,{schema:_,table:D,commit_timestamp:M,type:E,errors:C}=S;j=Object.assign(Object.assign({},{schema:_,table:D,commit_timestamp:M,eventType:E,new:{},old:{},errors:C}),this._getPayloadRecords(S))}N.callback(j,i)})}_isClosed(){return this.state===wt.closed}_isJoined(){return this.state===wt.joined}_isJoining(){return this.state===wt.joining}_isLeaving(){return this.state===wt.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,n,i){const c=a.toLocaleLowerCase(),u={type:c,filter:n,callback:i};return this.bindings[c]?this.bindings[c].push(u):this.bindings[c]=[u],this}_off(a,n){const i=a.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(c=>{var u;return!(((u=c.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===i&&_d.isEqual(c.filter,n))}),this}static isEqual(a,n){if(Object.keys(a).length!==Object.keys(n).length)return!1;for(const i in a)if(a[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(ls.close,{},a)}_onError(a){this._on(ls.error,{},n=>a(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=wt.joining,this.joinPush.resend(a))}_getPayloadRecords(a){const n={new:{},old:{}};return(a.type==="INSERT"||a.type==="UPDATE")&&(n.new=sg(a.columns,a.record)),(a.type==="UPDATE"||a.type==="DELETE")&&(n.old=sg(a.columns,a.old_record)),n}}const lg=()=>{},qw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class zw{constructor(a,n){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=dx,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=lg,this.ref=0,this.logger=lg,this.conn=null,this.sendBuffer=[],this.serializer=new Mw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=u=>{let h;return u?h=u:typeof fetch>"u"?h=(...g)=>Tl(async()=>{const{default:m}=await Promise.resolve().then(()=>nn);return{default:m}},void 0).then(({default:m})=>m(...g)):h=fetch,(...g)=>h(...g)},this.endPoint=`${a}/${ad.websocket}`,this.httpEndpoint=mx(a),n?.transport?this.transport=n.transport:this.transport=null,n?.params&&(this.params=n.params),n?.timeout&&(this.timeout=n.timeout),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const c=(i=n?.params)===null||i===void 0?void 0:i.apikey;if(c&&(this.accessTokenValue=c,this.apiKey=c),this.reconnectAfterMs=n?.reconnectAfterMs?n.reconnectAfterMs:u=>[1e3,2e3,5e3,1e4][u-1]||1e4,this.encode=n?.encode?n.encode:(u,h)=>h(JSON.stringify(u)),this.decode=n?.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new hx(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n?.fetch),n?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=n?.worker||!1,this.workerUrl=n?.workerUrl}this.accessToken=n?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=Tw),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Dw}))}disconnect(a,n){this.conn&&(this.conn.onclose=function(){},a?this.conn.close(a,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(i=>i.teardown()))}getChannels(){return this.channels}async removeChannel(a){const n=await a.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const a=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,n,i){this.logger(a,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case ml.connecting:return Va.Connecting;case ml.open:return Va.Open;case ml.closing:return Va.Closing;default:return Va.Closed}}isConnected(){return this.connectionState()===Va.Open}channel(a,n={config:{}}){const i=`realtime:${a}`,c=this.getChannels().find(u=>u.topic===i);if(c)return c;{const u=new _d(`realtime:${a}`,n,this);return this.channels.push(u),u}}push(a){const{topic:n,event:i,payload:c,ref:u}=a,h=()=>{this.encode(a,g=>{var m;(m=this.conn)===null||m===void 0||m.send(g)})};this.log("push",`${n} ${i} (${u})`,c),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(a=null){let n=a||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const c={access_token:n,version:Cw};n&&i.updateJoinPayload(c),i.joinedOnce&&i._isJoined()&&i._push(ls.access_token,{access_token:n})}))}async sendHeartbeat(){var a;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(a=this.conn)===null||a===void 0||a.close(Aw,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let n=this.channels.find(i=>i.topic===a&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${a}"`),n.unsubscribe())}_remove(a){this.channels=this.channels.filter(n=>n.topic!==a.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a))}_onConnMessage(a){this.decode(a.data,n=>{let{topic:i,event:c,payload:u,ref:h}=n;i==="phoenix"&&c==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),h&&h===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${u.status||""} ${i} ${c} ${h&&"("+h+")"||""}`,u),Array.from(this.channels).filter(g=>g._isMember(i)).forEach(g=>g._trigger(c,u,h)),this.stateChangeCallbacks.message.forEach(g=>g(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(a=>a())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(a){this.log("transport","close",a),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(a))}_onConnError(a){this.log("transport",`${a}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(a))}_triggerChanError(){this.channels.forEach(a=>a._trigger(ls.error))}_appendParams(a,n){if(Object.keys(n).length===0)return a;const i=a.match(/\?/)?"&":"?",c=new URLSearchParams(n);return`${a}${i}${c}`}_workerObjectUrl(a){let n;if(a)n=a;else{const i=new Blob([qw],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}}class kd extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}}function ft(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}class $w extends kd{constructor(a,n){super(a),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class nd extends kd{constructor(a,n){super(a),this.name="StorageUnknownError",this.originalError=n}}var Pw=function(l,a,n,i){function c(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function g(p){try{x(i.next(p))}catch(v){h(v)}}function m(p){try{x(i.throw(p))}catch(v){h(v)}}function x(p){p.done?u(p.value):c(p.value).then(g,m)}x((i=i.apply(l,a||[])).next())})};const gx=l=>{let a;return l?a=l:typeof fetch>"u"?a=(...n)=>Tl(async()=>{const{default:i}=await Promise.resolve().then(()=>nn);return{default:i}},void 0).then(({default:i})=>i(...n)):a=fetch,(...n)=>a(...n)},Kw=()=>Pw(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Tl(()=>Promise.resolve().then(()=>nn),void 0)).Response:Response}),ld=l=>{if(Array.isArray(l))return l.map(n=>ld(n));if(typeof l=="function"||l!==Object(l))return l;const a={};return Object.entries(l).forEach(([n,i])=>{const c=n.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));a[c]=ld(i)}),a};var Xa=function(l,a,n,i){function c(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function g(p){try{x(i.next(p))}catch(v){h(v)}}function m(p){try{x(i.throw(p))}catch(v){h(v)}}function x(p){p.done?u(p.value):c(p.value).then(g,m)}x((i=i.apply(l,a||[])).next())})};const zu=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),Gw=(l,a,n)=>Xa(void 0,void 0,void 0,function*(){const i=yield Kw();l instanceof i&&!n?.noResolveJson?l.json().then(c=>{a(new $w(zu(c),l.status||500))}).catch(c=>{a(new nd(zu(c),c))}):a(new nd(zu(l),l))}),Iw=(l,a,n,i)=>{const c={method:l,headers:a?.headers||{}};return l==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json"},a?.headers),i&&(c.body=JSON.stringify(i)),Object.assign(Object.assign({},c),n))};function El(l,a,n,i,c,u){return Xa(this,void 0,void 0,function*(){return new Promise((h,g)=>{l(n,Iw(a,i,c,u)).then(m=>{if(!m.ok)throw m;return i?.noResolveJson?m:m.json()}).then(m=>h(m)).catch(m=>Gw(m,g,i))})})}function ro(l,a,n,i){return Xa(this,void 0,void 0,function*(){return El(l,"GET",a,n,i)})}function xa(l,a,n,i,c){return Xa(this,void 0,void 0,function*(){return El(l,"POST",a,i,c,n)})}function Vw(l,a,n,i,c){return Xa(this,void 0,void 0,function*(){return El(l,"PUT",a,i,c,n)})}function Qw(l,a,n,i){return Xa(this,void 0,void 0,function*(){return El(l,"HEAD",a,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function xx(l,a,n,i,c){return Xa(this,void 0,void 0,function*(){return El(l,"DELETE",a,i,c,n)})}var Dt=function(l,a,n,i){function c(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function g(p){try{x(i.next(p))}catch(v){h(v)}}function m(p){try{x(i.throw(p))}catch(v){h(v)}}function x(p){p.done?u(p.value):c(p.value).then(g,m)}x((i=i.apply(l,a||[])).next())})};const Yw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ig={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Fw{constructor(a,n={},i,c){this.url=a,this.headers=n,this.bucketId=i,this.fetch=gx(c)}uploadOrUpdate(a,n,i,c){return Dt(this,void 0,void 0,function*(){try{let u;const h=Object.assign(Object.assign({},ig),c);let g=Object.assign(Object.assign({},this.headers),a==="POST"&&{"x-upsert":String(h.upsert)});const m=h.metadata;typeof Blob<"u"&&i instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),m&&u.append("metadata",this.encodeMetadata(m)),u.append("",i)):typeof FormData<"u"&&i instanceof FormData?(u=i,u.append("cacheControl",h.cacheControl),m&&u.append("metadata",this.encodeMetadata(m))):(u=i,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType,m&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),c?.headers&&(g=Object.assign(Object.assign({},g),c.headers));const x=this._removeEmptyFolders(n),p=this._getFinalPath(x),v=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:a,body:u,headers:g},h?.duplex?{duplex:h.duplex}:{})),j=yield v.json();return v.ok?{data:{path:x,id:j.Id,fullPath:j.Key},error:null}:{data:null,error:j}}catch(u){if(ft(u))return{data:null,error:u};throw u}})}upload(a,n,i){return Dt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",a,n,i)})}uploadToSignedUrl(a,n,i,c){return Dt(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(a),h=this._getFinalPath(u),g=new URL(this.url+`/object/upload/sign/${h}`);g.searchParams.set("token",n);try{let m;const x=Object.assign({upsert:ig.upsert},c),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(x.upsert)});typeof Blob<"u"&&i instanceof Blob?(m=new FormData,m.append("cacheControl",x.cacheControl),m.append("",i)):typeof FormData<"u"&&i instanceof FormData?(m=i,m.append("cacheControl",x.cacheControl)):(m=i,p["cache-control"]=`max-age=${x.cacheControl}`,p["content-type"]=x.contentType);const v=yield this.fetch(g.toString(),{method:"PUT",body:m,headers:p}),j=yield v.json();return v.ok?{data:{path:u,fullPath:j.Key},error:null}:{data:null,error:j}}catch(m){if(ft(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(a,n){return Dt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(a);const c=Object.assign({},this.headers);n?.upsert&&(c["x-upsert"]="true");const u=yield xa(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:c}),h=new URL(this.url+u.url),g=h.searchParams.get("token");if(!g)throw new kd("No token returned by API");return{data:{signedUrl:h.toString(),path:a,token:g},error:null}}catch(i){if(ft(i))return{data:null,error:i};throw i}})}update(a,n,i){return Dt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",a,n,i)})}move(a,n,i){return Dt(this,void 0,void 0,function*(){try{return{data:yield xa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:a,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(ft(c))return{data:null,error:c};throw c}})}copy(a,n,i){return Dt(this,void 0,void 0,function*(){try{return{data:{path:(yield xa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:a,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(ft(c))return{data:null,error:c};throw c}})}createSignedUrl(a,n,i){return Dt(this,void 0,void 0,function*(){try{let c=this._getFinalPath(a),u=yield xa(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:n},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const h=i?.download?`&download=${i.download===!0?"":i.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(c){if(ft(c))return{data:null,error:c};throw c}})}createSignedUrls(a,n,i){return Dt(this,void 0,void 0,function*(){try{const c=yield xa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:a},{headers:this.headers}),u=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:c.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${u}`):null})),error:null}}catch(c){if(ft(c))return{data:null,error:c};throw c}})}download(a,n){return Dt(this,void 0,void 0,function*(){const c=typeof n?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(n?.transform||{}),h=u?`?${u}`:"";try{const g=this._getFinalPath(a);return{data:yield(yield ro(this.fetch,`${this.url}/${c}/${g}${h}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(g){if(ft(g))return{data:null,error:g};throw g}})}info(a){return Dt(this,void 0,void 0,function*(){const n=this._getFinalPath(a);try{const i=yield ro(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:ld(i),error:null}}catch(i){if(ft(i))return{data:null,error:i};throw i}})}exists(a){return Dt(this,void 0,void 0,function*(){const n=this._getFinalPath(a);try{return yield Qw(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(ft(i)&&i instanceof nd){const c=i.originalError;if([400,404].includes(c?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(a,n){const i=this._getFinalPath(a),c=[],u=n?.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&c.push(u);const g=typeof n?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(n?.transform||{});m!==""&&c.push(m);let x=c.join("&");return x!==""&&(x=`?${x}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${i}${x}`)}}}remove(a){return Dt(this,void 0,void 0,function*(){try{return{data:yield xx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:a},{headers:this.headers}),error:null}}catch(n){if(ft(n))return{data:null,error:n};throw n}})}list(a,n,i){return Dt(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},Yw),n),{prefix:a||""});return{data:yield xa(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},i),error:null}}catch(c){if(ft(c))return{data:null,error:c};throw c}})}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return typeof Buffer<"u"?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){const n=[];return a.width&&n.push(`width=${a.width}`),a.height&&n.push(`height=${a.height}`),a.resize&&n.push(`resize=${a.resize}`),a.format&&n.push(`format=${a.format}`),a.quality&&n.push(`quality=${a.quality}`),n.join("&")}}const Xw="2.7.1",Zw={"X-Client-Info":`storage-js/${Xw}`};var Ir=function(l,a,n,i){function c(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function g(p){try{x(i.next(p))}catch(v){h(v)}}function m(p){try{x(i.throw(p))}catch(v){h(v)}}function x(p){p.done?u(p.value):c(p.value).then(g,m)}x((i=i.apply(l,a||[])).next())})};class Jw{constructor(a,n={},i){this.url=a,this.headers=Object.assign(Object.assign({},Zw),n),this.fetch=gx(i)}listBuckets(){return Ir(this,void 0,void 0,function*(){try{return{data:yield ro(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(a){if(ft(a))return{data:null,error:a};throw a}})}getBucket(a){return Ir(this,void 0,void 0,function*(){try{return{data:yield ro(this.fetch,`${this.url}/bucket/${a}`,{headers:this.headers}),error:null}}catch(n){if(ft(n))return{data:null,error:n};throw n}})}createBucket(a,n={public:!1}){return Ir(this,void 0,void 0,function*(){try{return{data:yield xa(this.fetch,`${this.url}/bucket`,{id:a,name:a,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(ft(i))return{data:null,error:i};throw i}})}updateBucket(a,n){return Ir(this,void 0,void 0,function*(){try{return{data:yield Vw(this.fetch,`${this.url}/bucket/${a}`,{id:a,name:a,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(ft(i))return{data:null,error:i};throw i}})}emptyBucket(a){return Ir(this,void 0,void 0,function*(){try{return{data:yield xa(this.fetch,`${this.url}/bucket/${a}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ft(n))return{data:null,error:n};throw n}})}deleteBucket(a){return Ir(this,void 0,void 0,function*(){try{return{data:yield xx(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(n){if(ft(n))return{data:null,error:n};throw n}})}}class Ww extends Jw{constructor(a,n={},i){super(a,n,i)}from(a){return new Fw(this.url,this.headers,a,this.fetch)}}const ej="2.52.0";let hl="";typeof Deno<"u"?hl="deno":typeof document<"u"?hl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?hl="react-native":hl="node";const tj={"X-Client-Info":`supabase-js-${hl}/${ej}`},sj={headers:tj},aj={schema:"public"},rj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},nj={};var lj=function(l,a,n,i){function c(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function g(p){try{x(i.next(p))}catch(v){h(v)}}function m(p){try{x(i.throw(p))}catch(v){h(v)}}function x(p){p.done?u(p.value):c(p.value).then(g,m)}x((i=i.apply(l,a||[])).next())})};const ij=l=>{let a;return l?a=l:typeof fetch>"u"?a=nx:a=fetch,(...n)=>a(...n)},oj=()=>typeof Headers>"u"?lx:Headers,cj=(l,a,n)=>{const i=ij(n),c=oj();return(u,h)=>lj(void 0,void 0,void 0,function*(){var g;const m=(g=yield a())!==null&&g!==void 0?g:l;let x=new c(h?.headers);return x.has("apikey")||x.set("apikey",l),x.has("Authorization")||x.set("Authorization",`Bearer ${m}`),i(u,Object.assign(Object.assign({},h),{headers:x}))})};var uj=function(l,a,n,i){function c(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function g(p){try{x(i.next(p))}catch(v){h(v)}}function m(p){try{x(i.throw(p))}catch(v){h(v)}}function x(p){p.done?u(p.value):c(p.value).then(g,m)}x((i=i.apply(l,a||[])).next())})};function dj(l){return l.endsWith("/")?l:l+"/"}function hj(l,a){var n,i;const{db:c,auth:u,realtime:h,global:g}=l,{db:m,auth:x,realtime:p,global:v}=a,j={db:Object.assign(Object.assign({},m),c),auth:Object.assign(Object.assign({},x),u),realtime:Object.assign(Object.assign({},p),h),global:Object.assign(Object.assign(Object.assign({},v),g),{headers:Object.assign(Object.assign({},(n=v?.headers)!==null&&n!==void 0?n:{}),(i=g?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>uj(this,void 0,void 0,function*(){return""})};return l.accessToken?j.accessToken=l.accessToken:delete j.accessToken,j}const px="2.71.1",Xr=30*1e3,id=3,$u=id*Xr,fj="http://localhost:9999",mj="supabase.auth.token",gj={"X-Client-Info":`gotrue-js/${px}`},od="X-Supabase-Api-Version",yx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},xj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,pj=600*1e3;class Td extends Error{constructor(a,n,i){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function Se(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}class yj extends Td{constructor(a,n,i){super(a,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function vj(l){return Se(l)&&l.name==="AuthApiError"}class vx extends Td{constructor(a,n){super(a),this.name="AuthUnknownError",this.originalError=n}}class va extends Td{constructor(a,n,i,c){super(a,i,c),this.name=n,this.status=i}}class ga extends va{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function bj(l){return Se(l)&&l.name==="AuthSessionMissingError"}class Ii extends va{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Vi extends va{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class Qi extends va{constructor(a,n=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function wj(l){return Se(l)&&l.name==="AuthImplicitGrantRedirectError"}class og extends va{constructor(a,n=null){super(a,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cd extends va{constructor(a,n){super(a,"AuthRetryableFetchError",n,void 0)}}function Pu(l){return Se(l)&&l.name==="AuthRetryableFetchError"}class cg extends va{constructor(a,n,i){super(a,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class ud extends va{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}const no="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ug=` 	
\r=`.split(""),jj=(()=>{const l=new Array(128);for(let a=0;a<l.length;a+=1)l[a]=-1;for(let a=0;a<ug.length;a+=1)l[ug[a].charCodeAt(0)]=-2;for(let a=0;a<no.length;a+=1)l[no[a].charCodeAt(0)]=a;return l})();function dg(l,a,n){if(l!==null)for(a.queue=a.queue<<8|l,a.queuedBits+=8;a.queuedBits>=6;){const i=a.queue>>a.queuedBits-6&63;n(no[i]),a.queuedBits-=6}else if(a.queuedBits>0)for(a.queue=a.queue<<6-a.queuedBits,a.queuedBits=6;a.queuedBits>=6;){const i=a.queue>>a.queuedBits-6&63;n(no[i]),a.queuedBits-=6}}function bx(l,a,n){const i=jj[l];if(i>-1)for(a.queue=a.queue<<6|i,a.queuedBits+=6;a.queuedBits>=8;)n(a.queue>>a.queuedBits-8&255),a.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(l)}"`)}}function hg(l){const a=[],n=h=>{a.push(String.fromCodePoint(h))},i={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},u=h=>{_j(h,i,n)};for(let h=0;h<l.length;h+=1)bx(l.charCodeAt(h),c,u);return a.join("")}function Nj(l,a){if(l<=127){a(l);return}else if(l<=2047){a(192|l>>6),a(128|l&63);return}else if(l<=65535){a(224|l>>12),a(128|l>>6&63),a(128|l&63);return}else if(l<=1114111){a(240|l>>18),a(128|l>>12&63),a(128|l>>6&63),a(128|l&63);return}throw new Error(`Unrecognized Unicode codepoint: ${l.toString(16)}`)}function Sj(l,a){for(let n=0;n<l.length;n+=1){let i=l.charCodeAt(n);if(i>55295&&i<=56319){const c=(i-55296)*1024&65535;i=(l.charCodeAt(n+1)-56320&65535|c)+65536,n+=1}Nj(i,a)}}function _j(l,a,n){if(a.utf8seq===0){if(l<=127){n(l);return}for(let i=1;i<6;i+=1)if((l>>7-i&1)===0){a.utf8seq=i;break}if(a.utf8seq===2)a.codepoint=l&31;else if(a.utf8seq===3)a.codepoint=l&15;else if(a.utf8seq===4)a.codepoint=l&7;else throw new Error("Invalid UTF-8 sequence");a.utf8seq-=1}else if(a.utf8seq>0){if(l<=127)throw new Error("Invalid UTF-8 sequence");a.codepoint=a.codepoint<<6|l&63,a.utf8seq-=1,a.utf8seq===0&&n(a.codepoint)}}function kj(l){const a=[],n={queue:0,queuedBits:0},i=c=>{a.push(c)};for(let c=0;c<l.length;c+=1)bx(l.charCodeAt(c),n,i);return new Uint8Array(a)}function Tj(l){const a=[];return Sj(l,n=>a.push(n)),new Uint8Array(a)}function Ej(l){const a=[],n={queue:0,queuedBits:0},i=c=>{a.push(c)};return l.forEach(c=>dg(c,n,i)),dg(null,n,i),a.join("")}function Cj(l){return Math.round(Date.now()/1e3)+l}function Dj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){const a=Math.random()*16|0;return(l=="x"?a:a&3|8).toString(16)})}const rs=()=>typeof window<"u"&&typeof document<"u",Pa={tested:!1,writable:!1},wx=()=>{if(!rs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pa.tested)return Pa.writable;const l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),Pa.tested=!0,Pa.writable=!0}catch{Pa.tested=!0,Pa.writable=!1}return Pa.writable};function Aj(l){const a={},n=new URL(l);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((c,u)=>{a[u]=c})}catch{}return n.searchParams.forEach((i,c)=>{a[c]=i}),a}const jx=l=>{let a;return l?a=l:typeof fetch>"u"?a=(...n)=>Tl(async()=>{const{default:i}=await Promise.resolve().then(()=>nn);return{default:i}},void 0).then(({default:i})=>i(...n)):a=fetch,(...n)=>a(...n)},Mj=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",Zr=async(l,a,n)=>{await l.setItem(a,JSON.stringify(n))},Ka=async(l,a)=>{const n=await l.getItem(a);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ma=async(l,a)=>{await l.removeItem(a)};class xo{constructor(){this.promise=new xo.promiseConstructor((a,n)=>{this.resolve=a,this.reject=n})}}xo.promiseConstructor=Promise;function Ku(l){const a=l.split(".");if(a.length!==3)throw new ud("Invalid JWT structure");for(let i=0;i<a.length;i++)if(!xj.test(a[i]))throw new ud("JWT not in base64url format");return{header:JSON.parse(hg(a[0])),payload:JSON.parse(hg(a[1])),signature:kj(a[2]),raw:{header:a[0],payload:a[1]}}}async function Oj(l){return await new Promise(a=>{setTimeout(()=>a(null),l)})}function Rj(l,a){return new Promise((i,c)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await l(u);if(!a(u,null,h)){i(h);return}}catch(h){if(!a(u,h)){c(h);return}}})()})}function Uj(l){return("0"+l.toString(16)).substr(-2)}function Lj(){const a=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let c="";for(let u=0;u<56;u++)c+=n.charAt(Math.floor(Math.random()*i));return c}return crypto.getRandomValues(a),Array.from(a,Uj).join("")}async function Hj(l){const n=new TextEncoder().encode(l),i=await crypto.subtle.digest("SHA-256",n),c=new Uint8Array(i);return Array.from(c).map(u=>String.fromCharCode(u)).join("")}async function Bj(l){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;const n=await Hj(l);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vr(l,a,n=!1){const i=Lj();let c=i;n&&(c+="/PASSWORD_RECOVERY"),await Zr(l,`${a}-code-verifier`,c);const u=await Bj(i);return[u,i===u?"plain":"s256"]}const qj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function zj(l){const a=l.headers.get(od);if(!a||!a.match(qj))return null;try{return new Date(`${a}T00:00:00.0Z`)}catch{return null}}function $j(l){if(!l)throw new Error("Missing exp claim");const a=Math.floor(Date.now()/1e3);if(l<=a)throw new Error("JWT has expired")}function Pj(l){switch(l){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Kj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Qr(l){if(!Kj.test(l))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Gu(){const l={};return new Proxy(l,{get:(a,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function fg(l){return JSON.parse(JSON.stringify(l))}var Gj=function(l,a){var n={};for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&a.indexOf(i)<0&&(n[i]=l[i]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(l);c<i.length;c++)a.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(l,i[c])&&(n[i[c]]=l[i[c]]);return n};const Ia=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),Ij=[502,503,504];async function mg(l){var a;if(!Mj(l))throw new cd(Ia(l),0);if(Ij.includes(l.status))throw new cd(Ia(l),l.status);let n;try{n=await l.json()}catch(u){throw new vx(Ia(u),u)}let i;const c=zj(l);if(c&&c.getTime()>=yx["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new cg(Ia(n),l.status,((a=n.weak_password)===null||a===void 0?void 0:a.reasons)||[]);if(i==="session_not_found")throw new ga}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new cg(Ia(n),l.status,n.weak_password.reasons);throw new yj(Ia(n),l.status||500,i)}const Vj=(l,a,n,i)=>{const c={method:l,headers:a?.headers||{}};return l==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},a?.headers),c.body=JSON.stringify(i),Object.assign(Object.assign({},c),n))};async function Me(l,a,n,i){var c;const u=Object.assign({},i?.headers);u[od]||(u[od]=yx["2024-01-01"].name),i?.jwt&&(u.Authorization=`Bearer ${i.jwt}`);const h=(c=i?.query)!==null&&c!==void 0?c:{};i?.redirectTo&&(h.redirect_to=i.redirectTo);const g=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",m=await Qj(l,a,n+g,{headers:u,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(m):{data:Object.assign({},m),error:null}}async function Qj(l,a,n,i,c,u){const h=Vj(a,i,c,u);let g;try{g=await l(n,Object.assign({},h))}catch(m){throw console.error(m),new cd(Ia(m),0)}if(g.ok||await mg(g),i?.noResolveJson)return g;try{return await g.json()}catch(m){await mg(m)}}function Hs(l){var a;let n=null;Zj(l)&&(n=Object.assign({},l),l.expires_at||(n.expires_at=Cj(l.expires_in)));const i=(a=l.user)!==null&&a!==void 0?a:l;return{data:{session:n,user:i},error:null}}function gg(l){const a=Hs(l);return!a.error&&l.weak_password&&typeof l.weak_password=="object"&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.message&&typeof l.weak_password.message=="string"&&l.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(a.data.weak_password=l.weak_password),a}function ya(l){var a;return{data:{user:(a=l.user)!==null&&a!==void 0?a:l},error:null}}function Yj(l){return{data:l,error:null}}function Fj(l){const{action_link:a,email_otp:n,hashed_token:i,redirect_to:c,verification_type:u}=l,h=Gj(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:a,email_otp:n,hashed_token:i,redirect_to:c,verification_type:u},m=Object.assign({},h);return{data:{properties:g,user:m},error:null}}function Xj(l){return l}function Zj(l){return l.access_token&&l.refresh_token&&l.expires_in}const Iu=["global","local","others"];var Jj=function(l,a){var n={};for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&a.indexOf(i)<0&&(n[i]=l[i]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(l);c<i.length;c++)a.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(l,i[c])&&(n[i[c]]=l[i[c]]);return n};class Wj{constructor({url:a="",headers:n={},fetch:i}){this.url=a,this.headers=n,this.fetch=jx(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(a,n=Iu[0]){if(Iu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Iu.join(", ")}`);try{return await Me(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Se(i))return{data:null,error:i};throw i}}async inviteUserByEmail(a,n={}){try{return await Me(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ya})}catch(i){if(Se(i))return{data:{user:null},error:i};throw i}}async generateLink(a){try{const{options:n}=a,i=Jj(a,["options"]),c=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(c.new_email=i?.newEmail,delete c.newEmail),await Me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:Fj,redirectTo:n?.redirectTo})}catch(n){if(Se(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(a){try{return await Me(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:ya})}catch(n){if(Se(n))return{data:{user:null},error:n};throw n}}async listUsers(a){var n,i,c,u,h,g,m;try{const x={nextPage:null,lastPage:0,total:0},p=await Me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=a?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(u=(c=a?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:Xj});if(p.error)throw p.error;const v=await p.json(),j=(h=p.headers.get("x-total-count"))!==null&&h!==void 0?h:0,N=(m=(g=p.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&m!==void 0?m:[];return N.length>0&&(N.forEach(S=>{const _=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(S.split(";")[1].split("=")[1]);x[`${D}Page`]=_}),x.total=parseInt(j)),{data:Object.assign(Object.assign({},v),x),error:null}}catch(x){if(Se(x))return{data:{users:[]},error:x};throw x}}async getUserById(a){Qr(a);try{return await Me(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:ya})}catch(n){if(Se(n))return{data:{user:null},error:n};throw n}}async updateUserById(a,n){Qr(a);try{return await Me(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:n,headers:this.headers,xform:ya})}catch(i){if(Se(i))return{data:{user:null},error:i};throw i}}async deleteUser(a,n=!1){Qr(a);try{return await Me(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:n},xform:ya})}catch(i){if(Se(i))return{data:{user:null},error:i};throw i}}async _listFactors(a){Qr(a.userId);try{const{data:n,error:i}=await Me(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:n,error:i}}catch(n){if(Se(n))return{data:null,error:n};throw n}}async _deleteFactor(a){Qr(a.userId),Qr(a.id);try{return{data:await Me(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(n){if(Se(n))return{data:null,error:n};throw n}}}function xg(l={}){return{getItem:a=>l[a]||null,setItem:(a,n)=>{l[a]=n},removeItem:a=>{delete l[a]}}}function eN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Yr={debug:!!(globalThis&&wx()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Nx extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}class tN extends Nx{}async function sN(l,a,n){Yr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",l,a);const i=new globalThis.AbortController;return a>0&&setTimeout(()=>{i.abort(),Yr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",l)},a),await Promise.resolve().then(()=>globalThis.navigator.locks.request(l,a===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async c=>{if(c){Yr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",l,c.name);try{return await n()}finally{Yr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",l,c.name)}}else{if(a===0)throw Yr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",l),new tN(`Acquiring an exclusive Navigator LockManager lock "${l}" immediately failed`);if(Yr.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}eN();const aN={url:fj,storageKey:mj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:gj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function pg(l,a,n){return await n()}const Fr={};class wl{constructor(a){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=wl.nextInstanceID,wl.nextInstanceID+=1,this.instanceID>0&&rs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const c=Object.assign(Object.assign({},aN),a);if(this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.persistSession=c.persistSession,this.storageKey=c.storageKey,this.autoRefreshToken=c.autoRefreshToken,this.admin=new Wj({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=jx(c.fetch),this.lock=c.lock||pg,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,c.lock?this.lock=c.lock:rs()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=sN:this.lock=pg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:wx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=xg(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=xg(this.memoryStorage)),rs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}get jwks(){var a,n;return(n=(a=Fr[this.storageKey])===null||a===void 0?void 0:a.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(a){Fr[this.storageKey]=Object.assign(Object.assign({},Fr[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,n;return(n=(a=Fr[this.storageKey])===null||a===void 0?void 0:a.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){Fr[this.storageKey]=Object.assign(Object.assign({},Fr[this.storageKey]),{cachedAt:a})}_debug(...a){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${px}) ${new Date().toISOString()}`,...a),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var a;try{const n=Aj(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),rs()&&this.detectSessionInUrl&&i!=="none"){const{data:c,error:u}=await this._getSessionFromURL(n,i);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),wj(u)){const m=(a=u.details)===null||a===void 0?void 0:a.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:g}=c;return this._debug("#_initialize()","detected session in URL",h,"redirect type",g),await this._saveSession(h),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Se(n)?{error:n}:{error:new vx("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var n,i,c;try{const u=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=a?.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(c=a?.options)===null||c===void 0?void 0:c.captchaToken}},xform:Hs}),{data:h,error:g}=u;if(g||!h)return{data:{user:null,session:null},error:g};const m=h.session,x=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:x,session:m},error:null}}catch(u){if(Se(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(a){var n,i,c;try{let u;if("email"in a){const{email:p,password:v,options:j}=a;let N=null,S=null;this.flowType==="pkce"&&([N,S]=await Vr(this.storage,this.storageKey)),u=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:j?.emailRedirectTo,body:{email:p,password:v,data:(n=j?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:j?.captchaToken},code_challenge:N,code_challenge_method:S},xform:Hs})}else if("phone"in a){const{phone:p,password:v,options:j}=a;u=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:v,data:(i=j?.data)!==null&&i!==void 0?i:{},channel:(c=j?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:j?.captchaToken}},xform:Hs})}else throw new Vi("You must provide either an email or phone number and a password");const{data:h,error:g}=u;if(g||!h)return{data:{user:null,session:null},error:g};const m=h.session,x=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:x,session:m},error:null}}catch(u){if(Se(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(a){try{let n;if("email"in a){const{email:u,password:h,options:g}=a;n=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:gg})}else if("phone"in a){const{phone:u,password:h,options:g}=a;n=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:gg})}else throw new Vi("You must provide either an email or phone number and a password");const{data:i,error:c}=n;return c?{data:{user:null,session:null},error:c}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Ii}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:c})}catch(n){if(Se(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(a){var n,i,c,u;return await this._handleProviderSignIn(a.provider,{redirectTo:(n=a.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=a.options)===null||i===void 0?void 0:i.scopes,queryParams:(c=a.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(u=a.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){const{chain:n}=a;if(n==="solana")return await this.signInWithSolana(a);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(a){var n,i,c,u,h,g,m,x,p,v,j,N;let S,_;if("message"in a)S=a.message,_=a.signature;else{const{chain:D,wallet:M,statement:E,options:C}=a;let G;if(rs())if(typeof M=="object")G=M;else{const H=window;if("solana"in H&&typeof H.solana=="object"&&("signIn"in H.solana&&typeof H.solana.signIn=="function"||"signMessage"in H.solana&&typeof H.solana.signMessage=="function"))G=H.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!C?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");G=M}const z=new URL((n=C?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in G&&G.signIn){const H=await G.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C?.signInWithSolana),{version:"1",domain:z.host,uri:z.href}),E?{statement:E}:null));let O;if(Array.isArray(H)&&H[0]&&typeof H[0]=="object")O=H[0];else if(H&&typeof H=="object"&&"signedMessage"in H&&"signature"in H)O=H;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)S=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),_=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in G)||typeof G.signMessage!="function"||!("publicKey"in G)||typeof G!="object"||!G.publicKey||!("toBase58"in G.publicKey)||typeof G.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${z.host} wants you to sign in with your Solana account:`,G.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${z.href}`,`Issued At: ${(c=(i=C?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((u=C?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((h=C?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((g=C?.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((m=C?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((x=C?.signInWithSolana)===null||x===void 0)&&x.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((v=(p=C?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||v===void 0)&&v.length?["Resources",...C.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const H=await G.signMessage(new TextEncoder().encode(S),"utf8");if(!H||!(H instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=H}}try{const{data:D,error:M}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:Ej(_)},!((j=a.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(N=a.options)===null||N===void 0?void 0:N.captchaToken}}:null),xform:Hs});if(M)throw M;return!D||!D.session||!D.user?{data:{user:null,session:null},error:new Ii}:(D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("SIGNED_IN",D.session)),{data:Object.assign({},D),error:M})}catch(D){if(Se(D))return{data:{user:null,session:null},error:D};throw D}}async _exchangeCodeForSession(a){const n=await Ka(this.storage,`${this.storageKey}-code-verifier`),[i,c]=(n??"").split("/");try{const{data:u,error:h}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:i},xform:Hs});if(await ma(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new Ii}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:c??null}),error:h})}catch(u){if(Se(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(a){try{const{options:n,provider:i,token:c,access_token:u,nonce:h}=a,g=await Me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:c,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Hs}),{data:m,error:x}=g;return x?{data:{user:null,session:null},error:x}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new Ii}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:x})}catch(n){if(Se(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(a){var n,i,c,u,h;try{if("email"in a){const{email:g,options:m}=a;let x=null,p=null;this.flowType==="pkce"&&([x,p]=await Vr(this.storage,this.storageKey));const{error:v}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(n=m?.data)!==null&&n!==void 0?n:{},create_user:(i=m?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:x,code_challenge_method:p},redirectTo:m?.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in a){const{phone:g,options:m}=a,{data:x,error:p}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(c=m?.data)!==null&&c!==void 0?c:{},create_user:(u=m?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(h=m?.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:x?.message_id},error:p}}throw new Vi("You must provide either an email or phone number.")}catch(g){if(Se(g))return{data:{user:null,session:null},error:g};throw g}}async verifyOtp(a){var n,i;try{let c,u;"options"in a&&(c=(n=a.options)===null||n===void 0?void 0:n.redirectTo,u=(i=a.options)===null||i===void 0?void 0:i.captchaToken);const{data:h,error:g}=await Me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:u}}),redirectTo:c,xform:Hs});if(g)throw g;if(!h)throw new Error("An error occurred on token verification.");const m=h.session,x=h.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(a.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:x,session:m},error:null}}catch(c){if(Se(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithSSO(a){var n,i,c;try{let u=null,h=null;return this.flowType==="pkce"&&([u,h]=await Vr(this.storage,this.storageKey)),await Me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:(i=(n=a.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((c=a?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:h}),headers:this.headers,xform:Yj})}catch(u){if(Se(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{const{data:{session:n},error:i}=a;if(i)throw i;if(!n)throw new ga;const{error:c}=await Me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:c}})}catch(a){if(Se(a))return{data:{user:null,session:null},error:a};throw a}}async resend(a){try{const n=`${this.url}/resend`;if("email"in a){const{email:i,type:c,options:u}=a,{error:h}=await Me(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in a){const{phone:i,type:c,options:u}=a,{data:h,error:g}=await Me(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:h?.message_id},error:g}}throw new Vi("You must provide either an email or phone number and a type")}catch(n){if(Se(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(a,n){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await a(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let a=null;const n=await Ka(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?a=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};const i=a.expires_at?a.expires_at*1e3-Date.now()<$u:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",a.expires_at),!i){if(this.userStorage){const h=await Ka(this.userStorage,this.storageKey+"-user");h?.user?a.user=h.user:a.user=Gu()}if(this.storage.isServer&&a.user){let h=this.suppressGetSessionWarning;a=new Proxy(a,{get:(m,x,p)=>(!h&&x==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(m,x,p))})}return{data:{session:a},error:null}}const{session:c,error:u}=await this._callRefreshToken(a.refresh_token);return u?{data:{session:null},error:u}:{data:{session:c},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(a){return a?await this._getUser(a):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(a){try{return a?await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:ya}):await this._useSession(async n=>{var i,c,u;const{data:h,error:g}=n;if(g)throw g;return!(!((i=h.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ga}:await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0,xform:ya})})}catch(n){if(Se(n))return bj(n)&&(await this._removeSession(),await ma(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(a,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(a,n))}async _updateUser(a,n={}){try{return await this._useSession(async i=>{const{data:c,error:u}=i;if(u)throw u;if(!c.session)throw new ga;const h=c.session;let g=null,m=null;this.flowType==="pkce"&&a.email!=null&&([g,m]=await Vr(this.storage,this.storageKey));const{data:x,error:p}=await Me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:g,code_challenge_method:m}),jwt:h.access_token,xform:ya});if(p)throw p;return h.user=x.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(i){if(Se(i))return{data:{user:null},error:i};throw i}}async setSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new ga;const n=Date.now()/1e3;let i=n,c=!0,u=null;const{payload:h}=Ku(a.access_token);if(h.exp&&(i=h.exp,c=i<=n),c){const{session:g,error:m}=await this._callRefreshToken(a.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!g)return{data:{user:null,session:null},error:null};u=g}else{const{data:g,error:m}=await this._getUser(a.access_token);if(m)throw m;u={access_token:a.access_token,refresh_token:a.refresh_token,user:g.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(n){if(Se(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async n=>{var i;if(!a){const{data:h,error:g}=n;if(g)throw g;a=(i=h.session)!==null&&i!==void 0?i:void 0}if(!a?.refresh_token)throw new ga;const{session:c,error:u}=await this._callRefreshToken(a.refresh_token);return u?{data:{user:null,session:null},error:u}:c?{data:{user:c.user,session:c},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Se(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(a,n){try{if(!rs())throw new Qi("No browser detected.");if(a.error||a.error_description||a.error_code)throw new Qi(a.error_description||"Error in URL with unspecified error_description",{error:a.error||"unspecified_error",code:a.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new og("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Qi("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!a.code)throw new og("No code detected.");const{data:E,error:C}=await this._exchangeCodeForSession(a.code);if(C)throw C;const G=new URL(window.location.href);return G.searchParams.delete("code"),window.history.replaceState(window.history.state,"",G.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:c,access_token:u,refresh_token:h,expires_in:g,expires_at:m,token_type:x}=a;if(!u||!g||!h||!x)throw new Qi("No session defined in URL");const p=Math.round(Date.now()/1e3),v=parseInt(g);let j=p+v;m&&(j=parseInt(m));const N=j-p;N*1e3<=Xr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${N}s, should have been closer to ${v}s`);const S=j-v;p-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,j,p):p-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,j,p);const{data:_,error:D}=await this._getUser(u);if(D)throw D;const M={provider_token:i,provider_refresh_token:c,access_token:u,expires_in:v,expires_at:j,refresh_token:h,token_type:x,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:M,redirectType:a.type},error:null}}catch(i){if(Se(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(a){return!!(a.access_token||a.error_description)}async _isPKCECallback(a){const n=await Ka(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&n)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:c,error:u}=n;if(u)return{error:u};const h=(i=c.session)===null||i===void 0?void 0:i.access_token;if(h){const{error:g}=await this.admin.signOut(h,a);if(g&&!(vj(g)&&(g.status===404||g.status===401||g.status===403)))return{error:g}}return a!=="others"&&(await this._removeSession(),await ma(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(a){const n=Dj(),i={id:n,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(a){return await this._useSession(async n=>{var i,c;try{const{data:{session:u},error:h}=n;if(h)throw h;await((i=this.stateChangeEmitters.get(a))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",a,"session",u)}catch(u){await((c=this.stateChangeEmitters.get(a))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",u),console.error(u)}})}async resetPasswordForEmail(a,n={}){let i=null,c=null;this.flowType==="pkce"&&([i,c]=await Vr(this.storage,this.storageKey,!0));try{return await Me(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:i,code_challenge_method:c,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(u){if(Se(u))return{data:null,error:u};throw u}}async getUserIdentities(){var a;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(a=n.user.identities)!==null&&a!==void 0?a:[]},error:null}}catch(n){if(Se(n))return{data:null,error:n};throw n}}async linkIdentity(a){var n;try{const{data:i,error:c}=await this._useSession(async u=>{var h,g,m,x,p;const{data:v,error:j}=u;if(j)throw j;const N=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:(h=a.options)===null||h===void 0?void 0:h.redirectTo,scopes:(g=a.options)===null||g===void 0?void 0:g.scopes,queryParams:(m=a.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await Me(this.fetch,"GET",N,{headers:this.headers,jwt:(p=(x=v.session)===null||x===void 0?void 0:x.access_token)!==null&&p!==void 0?p:void 0})});if(c)throw c;return rs()&&!(!((n=a.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:a.provider,url:i?.url},error:null}}catch(i){if(Se(i))return{data:{provider:a.provider,url:null},error:i};throw i}}async unlinkIdentity(a){try{return await this._useSession(async n=>{var i,c;const{data:u,error:h}=n;if(h)throw h;return await Me(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:(c=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&c!==void 0?c:void 0})})}catch(n){if(Se(n))return{data:null,error:n};throw n}}async _refreshAccessToken(a){const n=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await Rj(async c=>(c>0&&await Oj(200*Math.pow(2,c-1)),this._debug(n,"refreshing attempt",c),await Me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:Hs})),(c,u)=>{const h=200*Math.pow(2,c);return u&&Pu(u)&&Date.now()+h-i<Xr})}catch(i){if(this._debug(n,"error",i),Se(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(a){return typeof a=="object"&&a!==null&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",n,"url",i),rs()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:a,url:i},error:null}}async _recoverAndRefresh(){var a,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const c=await Ka(this.storage,this.storageKey);if(c&&this.userStorage){let h=await Ka(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:c.user},await Zr(this.userStorage,this.storageKey+"-user",h)),c.user=(a=h?.user)!==null&&a!==void 0?a:Gu()}else if(c&&!c.user&&!c.user){const h=await Ka(this.storage,this.storageKey+"-user");h&&h?.user?(c.user=h.user,await ma(this.storage,this.storageKey+"-user"),await Zr(this.storage,this.storageKey,c)):c.user=Gu()}if(this._debug(i,"session from storage",c),!this._isValidSession(c)){this._debug(i,"session is not valid"),c!==null&&await this._removeSession();return}const u=((n=c.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<$u;if(this._debug(i,`session has${u?"":" not"} expired with margin of ${$u}s`),u){if(this.autoRefreshToken&&c.refresh_token){const{error:h}=await this._callRefreshToken(c.refresh_token);h&&(console.error(h),Pu(h)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:g}=await this._getUser(c.access_token);!g&&h?.user?(c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(i,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(i,"error",c),console.error(c);return}finally{this._debug(i,"end")}}async _callRefreshToken(a){var n,i;if(!a)throw new ga;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new xo;const{data:u,error:h}=await this._refreshAccessToken(a);if(h)throw h;if(!u.session)throw new ga;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const g={session:u.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(u){if(this._debug(c,"error",u),Se(u)){const h={session:null,error:u};return Pu(u)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(h),h}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(u),u}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(a,n,i=!0){const c=`#_notifyAllSubscribers(${a})`;this._debug(c,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:a,session:n});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(a,n)}catch(m){u.push(m)}});if(await Promise.all(h),u.length>0){for(let g=0;g<u.length;g+=1)console.error(u[g]);throw u[0]}}finally{this._debug(c,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0;const n=Object.assign({},a),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await Zr(this.userStorage,this.storageKey+"-user",{user:n.user});const c=Object.assign({},n);delete c.user;const u=fg(c);await Zr(this.storage,this.storageKey,u)}else{const c=fg(n);await Zr(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),await ma(this.storage,this.storageKey),await ma(this.storage,this.storageKey+"-code-verifier"),await ma(this.storage,this.storageKey+"-user"),this.userStorage&&await ma(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const a=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{a&&rs()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",a)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const a=setInterval(()=>this._autoRefreshTokenTick(),Xr);this.autoRefreshTicker=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const a=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((i.expires_at*1e3-a)/Xr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${Xr}ms, refresh threshold is ${id} ticks`),c<=id&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof Nx)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rs()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(a){console.error("_handleVisibilityChange",a)}}async _onVisibilityChanged(a){const n=`#_onVisibilityChanged(${a})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,n,i){const c=[`provider=${encodeURIComponent(n)}`];if(i?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&c.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[u,h]=await Vr(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});c.push(g.toString())}if(i?.queryParams){const u=new URLSearchParams(i.queryParams);c.push(u.toString())}return i?.skipBrowserRedirect&&c.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${a}?${c.join("&")}`}async _unenroll(a){try{return await this._useSession(async n=>{var i;const{data:c,error:u}=n;return u?{data:null,error:u}:await Me(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Se(n))return{data:null,error:n};throw n}}async _enroll(a){try{return await this._useSession(async n=>{var i,c;const{data:u,error:h}=n;if(h)return{data:null,error:h};const g=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},a.factorType==="phone"?{phone:a.phone}:{issuer:a.issuer}),{data:m,error:x}=await Me(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(i=u?.session)===null||i===void 0?void 0:i.access_token});return x?{data:null,error:x}:(a.factorType==="totp"&&(!((c=m?.totp)===null||c===void 0)&&c.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(n){if(Se(n))return{data:null,error:n};throw n}}async _verify(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:c,error:u}=n;if(u)return{data:null,error:u};const{data:h,error:g}=await Me(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:{code:a.code,challenge_id:a.challengeId},headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token});return g?{data:null,error:g}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),{data:h,error:g})})}catch(n){if(Se(n))return{data:null,error:n};throw n}})}async _challenge(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:c,error:u}=n;return u?{data:null,error:u}:await Me(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:{channel:a.channel},headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Se(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(a){const{data:n,error:i}=await this._challenge({factorId:a.factorId});return i?{data:null,error:i}:await this._verify({factorId:a.factorId,challengeId:n.id,code:a.code})}async _listFactors(){const{data:{user:a},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=a?.factors||[],c=i.filter(h=>h.factor_type==="totp"&&h.status==="verified"),u=i.filter(h=>h.factor_type==="phone"&&h.status==="verified");return{data:{all:i,totp:c,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async a=>{var n,i;const{data:{session:c},error:u}=a;if(u)return{data:null,error:u};if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Ku(c.access_token);let g=null;h.aal&&(g=h.aal);let m=g;((i=(n=c.user.factors)===null||n===void 0?void 0:n.filter(v=>v.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(m="aal2");const p=h.amr||[];return{data:{currentLevel:g,nextLevel:m,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(a,n={keys:[]}){let i=n.keys.find(g=>g.kid===a);if(i)return i;const c=Date.now();if(i=this.jwks.keys.find(g=>g.kid===a),i&&this.jwks_cached_at+pj>c)return i;const{data:u,error:h}=await Me(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=c,i=u.keys.find(g=>g.kid===a),!i)?null:i}async getClaims(a,n={}){try{let i=a;if(!i){const{data:N,error:S}=await this.getSession();if(S||!N.session)return{data:null,error:S};i=N.session.access_token}const{header:c,payload:u,signature:h,raw:{header:g,payload:m}}=Ku(i);n?.allowExpired||$j(u.exp);const x=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!x){const{error:N}=await this.getUser(i);if(N)throw N;return{data:{claims:u,header:c,signature:h},error:null}}const p=Pj(c.alg),v=await crypto.subtle.importKey("jwk",x,p,!0,["verify"]);if(!await crypto.subtle.verify(p,v,h,Tj(`${g}.${m}`)))throw new ud("Invalid JWT signature");return{data:{claims:u,header:c,signature:h},error:null}}catch(i){if(Se(i))return{data:null,error:i};throw i}}}wl.nextInstanceID=0;const rN=wl;class nN extends rN{constructor(a){super(a)}}var lN=function(l,a,n,i){function c(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function g(p){try{x(i.next(p))}catch(v){h(v)}}function m(p){try{x(i.throw(p))}catch(v){h(v)}}function x(p){p.done?u(p.value):c(p.value).then(g,m)}x((i=i.apply(l,a||[])).next())})};class iN{constructor(a,n,i){var c,u,h;if(this.supabaseUrl=a,this.supabaseKey=n,!a)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const g=dj(a),m=new URL(g);this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const x=`sb-${m.hostname.split(".")[0]}-auth-token`,p={db:aj,realtime:nj,auth:Object.assign(Object.assign({},rj),{storageKey:x}),global:sj},v=hj(i??{},p);this.storageKey=(c=v.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(u=v.global.headers)!==null&&u!==void 0?u:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(j,N)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(N)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=v.auth)!==null&&h!==void 0?h:{},this.headers,v.global.fetch),this.fetch=cj(n,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new _w(new URL("rest/v1",m).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),v.accessToken||this._listenForAuthEvents()}get functions(){return new fw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ww(this.storageUrl.href,this.headers,this.fetch)}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,n={},i={}){return this.rest.rpc(a,n,i)}channel(a,n={config:{}}){return this.realtime.channel(a,n)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var a,n;return lN(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(n=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:n,detectSessionInUrl:i,storage:c,storageKey:u,flowType:h,lock:g,debug:m},x,p){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new nN({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),x),storageKey:u,autoRefreshToken:a,persistSession:n,detectSessionInUrl:i,storage:c,flowType:h,lock:g,debug:m,fetch:p,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(a){return new zw(this.realtimeUrl.href,Object.assign(Object.assign({},a),{params:Object.assign({apikey:this.supabaseKey},a?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i?.access_token)})}_handleTokenChanged(a,n,i){(a==="TOKEN_REFRESHED"||a==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:a==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Sx=(l,a,n)=>new iN(l,a,n),oN="https://fnakxavwxubnbucfoujd.supabase.co",cN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZuYWt4YXZ3eHVibmJ1Y2ZvdWpkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA1ODY2NjEsImV4cCI6MjA2NjE2MjY2MX0.Gj4RYtx-fnTHHoLe71mGvhVze5NgWy25PME4OVle22M",te=Sx(oN,cN,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});class uN{constructor(){this.currentUserId=null}async setUserContext(a){try{this.currentUserId=a;const{error:n}=await te.rpc("set_user_context",{user_uuid:a});if(n)throw console.error(" Failed to set user context:",n),new Error("Failed to set user authentication context");console.log(" User context set successfully:",a)}catch(n){throw console.error(" Error setting user context:",n),n}}async clearUserContext(){try{this.currentUserId=null;const{error:a}=await te.rpc("set_user_context",{user_uuid:null});a&&console.warn(" Failed to clear user context:",a),console.log(" User context cleared")}catch(a){console.error(" Error clearing user context:",a)}}getCurrentUserId(){return this.currentUserId}async initializeFromStorage(){try{const a=localStorage.getItem("currentUserId");a&&await this.setUserContext(a)}catch(a){console.error(" Error initializing user context from storage:",a)}}async verifyUserContext(){try{const{data:a,error:n}=await te.from("tasks").select("id").limit(1);return n?(console.error(" User context verification failed:",n),!1):(console.log(" User context verified successfully"),!0)}catch(a){return console.error(" Error verifying user context:",a),!1}}getAuthenticatedClient(){if(!this.currentUserId)throw new Error("User context not set. Please login first.");return te}}const xl=new uN,dN=async l=>{if(!xl.getCurrentUserId()&&(await xl.initializeFromStorage(),!xl.getCurrentUserId()))throw new Error("User not authenticated. Please login again.");return await l()};class hN{async getUsers(){const{data:a,error:n}=await te.from("users").select("*").order("name");if(n)throw new Error(`Failed to fetch users: ${n.message}`);if(!a||a.length===0)return[];const i=[...new Set(a.map(u=>u.team_id))].filter(Boolean);let c=new Map;if(i.length>0){const{data:u}=await te.from("teams").select("id, name").in("id",i);u&&u.forEach(h=>c.set(h.id,h))}return a.map(u=>({...u,team:u.team_id&&c.get(u.team_id)||null}))}async getUsersByLocation(a){const{data:n,error:i}=await te.from("users").select(`
        *,
        team:teams(id, name)
      `).eq("location",a).order("name");if(i)throw new Error(`Failed to fetch users by location: ${i.message}`);return n||[]}async getUsersByTeamAndLocation(a,n){const{data:i,error:c}=await te.from("users").select("*").eq("team_id",a).eq("location",n).order("name");if(c)throw new Error(`Failed to fetch users by team and location: ${c.message}`);if(!i||i.length===0)return[];const{data:u,error:h}=await te.from("teams").select("id, name").eq("id",a).single();return h&&console.warn("Could not fetch team info:",h.message),i.map(g=>({...g,team:u||null}))}async getDirectors(){const{data:a,error:n}=await te.from("users").select("*").eq("role","retail_director").order("name");if(n)return console.error("Error fetching directors:",n),[];if(!a||a.length===0)return[];const i=[...new Set(a.map(u=>u.team_id))].filter(Boolean);let c=new Map;if(i.length>0){const{data:u}=await te.from("teams").select("id, name").in("id",i);u&&u.forEach(h=>c.set(h.id,h))}return a.map(u=>({...u,team:u.team_id&&c.get(u.team_id)||null}))}async getDirector(){const a=await this.getDirectors();return a.length>0?a[0]:null}async login(a){const{email:n,password:i}=a,{data:c,error:u}=await te.from("users").select("*").eq("email",n).single();if(u||!c)throw new Error("Email khng tn ti trong h thng");let h=!1;if(c.password_changed?h=i===c.password:h=i==="123456",!h)throw new Error("Mt khu khng ng");let g=null;if(c.team_id){const{data:x}=await te.from("teams").select("id, name").eq("id",c.team_id).single();g=x}await te.from("users").update({updated_at:new Date().toISOString()}).eq("id",c.id),localStorage.setItem("currentUserId",c.id),localStorage.setItem("currentUserEmail",c.email),localStorage.setItem("currentUserName",c.name),await xl.setUserContext(c.id);const m={...c,team:g};return localStorage.setItem("auth_user",JSON.stringify(m)),{...c,team:g}}async changePassword(a){const{email:n,currentPassword:i,newPassword:c}=a,{data:u,error:h}=await te.from("users").select("*").eq("email",n).single();if(h||!u)throw new Error("Ngi dng khng tn ti");let g=!1;if(u.password_changed?g=i===u.password:g=i==="123456",!g)throw new Error("Mt khu hin ti khng ng");const{error:m}=await te.from("users").update({password:c,password_changed:!0,updated_at:new Date().toISOString()}).eq("id",u.id);if(m)throw new Error(`Failed to update password: ${m.message}`)}async logout(){try{await xl.clearUserContext(),localStorage.removeItem("currentUserId"),localStorage.removeItem("currentUserEmail"),localStorage.removeItem("currentUserName"),localStorage.removeItem("auth_user"),console.log(" User logged out successfully")}catch(a){console.error(" Error during logout:",a)}}async getUserByEmail(a){const{data:n,error:i}=await te.from("users").select("*").eq("email",a).single();if(i||!n)return null;let c=null;if(n.team_id){const{data:u}=await te.from("teams").select("id, name").eq("id",n.team_id).single();c=u}return{...n,team:c}}async needsPasswordChange(a){return!(await this.getUserByEmail(a))?.password_changed||!1}async getTeams(){const{data:a,error:n}=await te.from("teams").select("*").order("name");if(n)throw new Error(`Failed to fetch teams: ${n.message}`);return a||[]}async getTeamsByLocation(a){const{data:n,error:i}=await te.from("users").select("team_id, name, role").eq("location",a);if(i)throw new Error(`Failed to fetch users by location: ${i.message}`);if(!n||n.length===0)return[];const c=[...new Set(n.map(m=>m.team_id))].filter(Boolean);if(c.length===0)return[];const{data:u,error:h}=await te.from("teams").select("id, name").in("id",c).order("name");if(h)throw new Error(`Failed to fetch teams: ${h.message}`);return u?u.map(m=>{const x=n.find(p=>p.team_id===m.id&&p.role==="team_leader");return{...m,leader_name:x?.name||null}}):[]}}const ys=new hN,fN={user:null,isAuthenticated:!1,isLoading:!0,error:null};function mN(l,a){switch(a.type){case"LOGIN_START":return{...l,isLoading:!0,error:null};case"LOGIN_SUCCESS":return{...l,user:a.payload,isAuthenticated:!0,isLoading:!1,error:null};case"LOGIN_ERROR":return{...l,user:null,isAuthenticated:!1,isLoading:!1,error:a.payload};case"LOGOUT":return{...l,user:null,isAuthenticated:!1,isLoading:!1,error:null};case"CLEAR_ERROR":return{...l,error:null};case"SET_LOADING":return{...l,isLoading:a.payload};default:return l}}const _x=b.createContext(void 0);function gN({children:l}){const[a,n]=b.useReducer(mN,fN);b.useEffect(()=>{(()=>{const v=localStorage.getItem("auth_user");if(v)try{const j=JSON.parse(v);n({type:"LOGIN_SUCCESS",payload:j});return}catch{localStorage.removeItem("auth_user")}n({type:"SET_LOADING",payload:!1})})()},[]);const x={...a,login:async(p,v)=>{n({type:"LOGIN_START"});try{const j=await ys.login({email:p,password:v});localStorage.setItem("auth_user",JSON.stringify(j)),localStorage.setItem("currentUserId",j.id),n({type:"LOGIN_SUCCESS",payload:j})}catch(j){throw n({type:"LOGIN_ERROR",payload:j instanceof Error?j.message:"ng nhp tht bi"}),j}},logout:async()=>{try{await ys.logout(),n({type:"LOGOUT"})}catch(p){console.error("Error during logout:",p),n({type:"LOGOUT"})}},clearError:()=>{n({type:"CLEAR_ERROR"})},getUsers:async()=>await ys.getUsers(),needsPasswordChange:async p=>await ys.needsPasswordChange(p),changePassword:async(p,v,j)=>{await ys.changePassword({email:p,currentPassword:v,newPassword:j})}};return s.jsx(_x.Provider,{value:x,children:l})}function ln(){const l=b.useContext(_x);if(l===void 0)throw new Error("useAuth must be used within an AuthProvider");return l}const xN=b.createContext(void 0);function pN({children:l,defaultTheme:a="system"}){const[n,i]=b.useState(a),[c,u]=b.useState("light");b.useEffect(()=>{const g=window.document.documentElement,m=()=>{if(n==="system"){const x=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";u(x),g.classList.toggle("dark",x==="dark")}else u(n),g.classList.toggle("dark",n==="dark")};if(m(),n==="system"){const x=window.matchMedia("(prefers-color-scheme: dark)");return x.addEventListener("change",m),()=>x.removeEventListener("change",m)}},[n]);const h={theme:n,setTheme:i,actualTheme:c};return s.jsx(xN.Provider,{value:h,children:l})}class yN extends b.Component{constructor(a){super(a),this.state={hasError:!1}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,n){console.error("ErrorBoundary caught an error:",a,n)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:[s.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:s.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h1",{className:"text-xl font-semibold text-gray-900 text-center mb-2",children:" xy ra li"}),s.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Xin li,  c li xy ra. Vui lng th li sau."}),!1,s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Ti li trang"}),s.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-300 transition-colors",children:"Th li"})]})]})}):this.props.children}}function xs({children:l,requireAuth:a=!0}){const{isAuthenticated:n,isLoading:i}=ln(),c=bs();if(i)return s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(a&&!n)return s.jsx(fl,{to:"/auth/login",state:{from:c},replace:!0});if(!a&&n){const u=c.state?.from?.pathname||"/dashboard";return s.jsx(fl,{to:u,replace:!0})}return s.jsx(s.Fragment,{children:l})}function vN(){const[l,a]=b.useState(""),[n,i]=b.useState(!1),[c,u]=b.useState(!1),h=ws(),[g]=fo(),m=g.get("email")||"",x=g.get("name")||"",{login:p}=ln(),v=async _=>{_.preventDefault(),u(!0);try{await p(m,l);const D=await ys.needsPasswordChange(m);h(D?`/auth/change-password?email=${encodeURIComponent(m)}&name=${encodeURIComponent(x)}`:"/dashboard")}catch(D){console.error("Li ng nhp:",D),alert("ng nhp tht bi. Vui lng th li.")}finally{u(!1)}},j=()=>{h(-1)},N=()=>{h("/auth/forgot-password")},S=()=>{alert("Cc ty chn khc s c trin khai sau")};return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[s.jsx("header",{className:"p-6"}),s.jsx("main",{className:"flex-1 flex items-center justify-center px-6",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsx("div",{className:"text-center mb-8",children:s.jsxs("h1",{className:"text-2xl font-medium text-gray-900 mb-2",children:["Cho mng tr li, ",x,"."]})}),s.jsxs("form",{onSubmit:v,className:"space-y-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:n?"text":"password",value:l,onChange:_=>a(_.target.value),placeholder:"",className:"w-full px-4 py-4 text-lg border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ease-in-out pr-12",required:!0}),s.jsx("button",{type:"button",onClick:()=>i(!n),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:n?s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):s.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("button",{type:"button",onClick:N,className:"text-sm text-gray-600 hover:text-gray-800 underline",children:"Ti qun mt khu"}),s.jsx("button",{type:"button",onClick:S,className:"block text-sm text-gray-600 hover:text-gray-800 underline",children:"Ty chn khc"})]}),s.jsxs("div",{className:"flex items-center justify-between pt-6",children:[s.jsx("button",{type:"button",onClick:j,className:"p-3 rounded-full hover:bg-gray-100 transition-colors duration-200",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsx("button",{type:"submit",disabled:!l||c,className:"bg-black text-white py-3 px-8 rounded-full font-medium hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 ease-in-out transform hover:scale-[1.02] active:scale-[0.98]",children:c?s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"ang x l..."]}):"Tip tc "})]})]})]})}),s.jsx("footer",{className:"p-6"})]})}function bN(){const[l,a]=b.useState([]),[n,i]=b.useState(!0),[c,u]=b.useState(null),[h,g]=b.useState(null),[m,x]=b.useState(!1),p=ws(),[v]=fo(),j=v.get("location")||"",N=v.get("teamId")||"";b.useEffect(()=>{j&&N&&(async()=>{try{i(!0);const H=(await ys.getUsersByTeamAndLocation(N,j)).sort((O,X)=>O.role==="team_leader"&&X.role!=="team_leader"?-1:O.role!=="team_leader"&&X.role==="team_leader"?1:O.name.localeCompare(X.name));a(H)}catch(z){u(z instanceof Error?z.message:"Khng th ti danh sch thnh vin")}finally{i(!1)}})()},[j,N]);const S=G=>{if(m)return;const z=l.find(H=>H.email===G);z&&(g(G),x(!0),setTimeout(()=>{p(`/auth/password?email=${encodeURIComponent(G)}&name=${encodeURIComponent(z.name)}`)},600))},_=()=>{p(`/auth/team-selection?location=${encodeURIComponent(j)}`)},D=G=>{switch(G){case"team_leader":return"Trng nhm";case"employee":return"Nhn vin";default:return"Nhn vin"}};if(n)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-600 border-t-transparent mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"ang ti danh sch thnh vin..."})]})});if(c)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("div",{className:"bg-red-100 rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Li kt ni"}),s.jsx("p",{className:"text-gray-600 mb-4",children:c}),s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Th li"})]})});const M=l[0]?.team?.name||"Nhm",E=l.find(G=>G.role==="team_leader"),C=E?E.name:M;return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[s.jsx("header",{className:"p-6",children:s.jsxs("button",{onClick:_,className:"inline-flex items-center text-gray-700 hover:text-gray-900 transition-colors duration-200",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Quay li"]})}),s.jsx("main",{className:"flex-1 flex items-center justify-center px-6",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-2xl font-medium text-gray-900 mb-2",children:C}),s.jsxs("p",{className:"text-gray-600",children:[j,"  Chn ti khon ca bn"]})]}),l.length>0?s.jsx("div",{className:"space-y-3",children:l.map((G,z)=>s.jsx("button",{className:`
                    w-full p-4 text-left bg-white border border-gray-200 rounded-lg
                    hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 ease-in-out
                    transform hover:scale-[1.02] active:scale-[0.98]
                    ${h===G.email?"border-blue-500 bg-blue-50 scale-[1.02]":""}
                    ${m&&h!==G.email?"opacity-50":""}
                  `,style:{animationDelay:`${z*100}ms`},onClick:()=>S(G.email),disabled:m,children:s.jsxs("div",{className:"flex items-center",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-medium text-gray-900 truncate",children:G.name}),s.jsx("p",{className:"text-sm text-gray-500 truncate",children:G.email}),s.jsx("div",{className:"flex items-center mt-1 text-xs",children:s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${G.role==="team_leader"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:D(G.role)})})]}),s.jsx("div",{className:`
                      flex-shrink-0 text-gray-400 transition-all duration-200
                      ${h===G.email?"text-blue-600 transform rotate-90":"group-hover:text-blue-600"}
                    `,children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})},G.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"text-4xl mb-4",children:""}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Khng tm thy thnh vin no"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Hin ti cha c thnh vin no trong nhm ny"})]}),m&&s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent mr-2"}),s.jsx("span",{className:"text-gray-700 text-sm",children:"ang chuyn hng..."})]})})]})}),s.jsx("footer",{className:"p-6"})]})}function wN(){const[l,a]=b.useState(null),[n,i]=b.useState(!1),c=ws(),u=[{id:"director",name:"Trng Phng",description:"Khng c Mnh"},{id:"hanoi",name:"H Ni",description:"Khu vc min Bc"},{id:"hcm",name:"H Ch Minh",description:"Khu vc min Nam"}],h=g=>{n||(a(g),i(!0),setTimeout(()=>{switch(g){case"director":c("/auth/director-login");break;case"hanoi":c("/auth/team-selection?location=H Ni");break;case"hcm":c("/auth/team-selection?location=H Ch Minh");break}},600))};return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[s.jsx("header",{className:"p-6"}),s.jsx("main",{className:"flex-1 flex items-center justify-center px-6",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8 animate-fade-in",children:[s.jsx("h1",{className:"text-2xl font-medium text-gray-900 mb-2 animate-slide-down",children:"Chn khu vc ca bn"}),s.jsx("p",{className:"text-gray-600 animate-fade-in animate-stagger-1",children:"Vui lng chn khu vc  tip tc"})]}),s.jsx("div",{className:"space-y-4",children:u.map((g,m)=>s.jsx("button",{className:`
                  w-full p-6 text-left bg-white border border-gray-200 rounded-lg
                  interactive-scale interactive-lift
                  hover:border-blue-300 hover:bg-blue-50
                  transition-all-smooth focus-ring
                  animate-slide-up
                  ${l===g.id?"border-blue-500 bg-blue-50 scale-[1.02] shadow-lg":"shadow-sm"}
                  ${n&&l!==g.id?"opacity-30 scale-95":""}
                  ${n&&l===g.id?"border-blue-600 bg-blue-100":""}
                `,style:{animationDelay:`${m*150}ms`},onClick:()=>h(g.id),disabled:n,children:s.jsxs("div",{className:"flex items-center relative",children:[s.jsxs("div",{className:"flex-1 transition-transform-smooth",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1 transition-colors-smooth",children:g.name}),s.jsx("p",{className:"text-sm text-gray-500 transition-colors-smooth",children:g.description})]}),s.jsx("div",{className:`
                    text-gray-400 transition-all-smooth
                    ${l===g.id?"text-blue-600 transform rotate-90 scale-110":"group-hover:text-blue-600 group-hover:translate-x-1"}
                  `,children:s.jsx("svg",{className:"w-5 h-5 transition-transform-smooth",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})},g.id))}),n&&s.jsx("div",{className:"mt-8 text-center animate-scale-bounce",children:s.jsxs("div",{className:"inline-flex items-center px-6 py-3 bg-white rounded-xl shadow-lg border border-gray-200",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-blue-600 border-t-transparent mr-3"}),s.jsx("span",{className:"text-gray-700 font-medium",children:"ang chuyn hng..."})]})})]})}),s.jsx("footer",{className:"p-6"})]})}function jN(){const[l,a]=b.useState(""),[n,i]=b.useState(!1),[c,u]=b.useState(!1),[h,g]=b.useState([]),[m,x]=b.useState(null),[p,v]=b.useState(!0),j=ws(),{login:N}=ln();b.useEffect(()=>{(async()=>{try{const C=await ys.getDirectors();g(C),C.length===1&&(x(C[0]),v(!1))}catch(C){console.error("Failed to load directors:",C)}})()},[]);const S=E=>{x(E),v(!1)},_=()=>{x(null),v(!0),a("")},D=async E=>{if(E.preventDefault(),!!m){u(!0);try{await N(m.email,l);const C=await ys.needsPasswordChange(m.email);j(C?`/auth/change-password?email=${encodeURIComponent(m.email)}&name=${encodeURIComponent(m.name)}`:"/dashboard")}catch(C){console.error("Login failed:",C),alert(C instanceof Error?C.message:"ng nhp tht bi")}finally{u(!1)}}},M=()=>{j("/")};return h.length===0?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-600 border-t-transparent mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"ang ti thng tin..."})]})}):p&&h.length>1?s.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[s.jsx("header",{className:"p-6",children:s.jsxs("button",{onClick:M,className:"inline-flex items-center text-gray-700 hover:text-gray-900 transition-colors duration-200",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Quay li"]})}),s.jsx("main",{className:"flex-1 flex items-center justify-center px-6",children:s.jsxs("div",{className:"w-full max-w-2xl",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-medium text-gray-900 mb-4",children:"Chn Trng Phng Kinh Doanh"}),s.jsx("p",{className:"text-gray-600",children:"Vui lng chn ti khon  ng nhp"})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:h.map(E=>s.jsx("button",{onClick:()=>S(E),className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200 hover:shadow-xl hover:border-blue-300 transition-all duration-200 text-left group",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white font-medium text-lg",children:E.name.charAt(0)}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 group-hover:text-blue-600 transition-colors",children:E.name}),s.jsx("p",{className:"text-sm text-gray-600",children:E.email}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[E.department_type,"  ",E.location]})]}),s.jsx("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-blue-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},E.id))})]})}),s.jsx("footer",{className:"p-6"})]}):s.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[s.jsx("header",{className:"p-6",children:s.jsxs("button",{onClick:h.length>1?_:M,className:"inline-flex items-center text-gray-700 hover:text-gray-900 transition-colors duration-200",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),h.length>1?"Chn li":"Quay li"]})}),s.jsx("main",{className:"flex-1 flex items-center justify-center px-6",children:s.jsx("div",{className:"w-full max-w-md",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-8 mb-8 border border-gray-200 animate-scale-in interactive-lift",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-2xl font-medium text-gray-900 mb-6 animate-fade-in",children:"Retail Director"}),s.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-6 animate-slide-up animate-stagger-1",children:[s.jsx("h2",{className:"text-xl font-medium text-gray-900 mb-2 animate-fade-in animate-stagger-2",children:m.name}),s.jsx("p",{className:"text-gray-600 text-sm animate-fade-in animate-stagger-3",children:m.email}),s.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:[m.department_type,"  ",m.location]})]})]}),s.jsxs("form",{onSubmit:D,className:"space-y-6 animate-slide-up animate-stagger-2",children:[s.jsxs("div",{className:"relative animate-fade-in animate-stagger-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mt khu"}),s.jsx("input",{type:n?"text":"password",value:l,onChange:E=>a(E.target.value),placeholder:"Nhp mt khu ca bn",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all-smooth interactive-scale pr-12",required:!0}),s.jsx("button",{type:"button",onClick:()=>i(!n),className:"absolute right-4 top-11 text-gray-500 hover:text-gray-700 transition-all-smooth interactive-scale p-1 rounded-md hover:bg-gray-100",children:n?s.jsx("svg",{className:"w-5 h-5 transition-transform-smooth",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):s.jsxs("svg",{className:"w-5 h-5 transition-transform-smooth",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),s.jsx("button",{type:"submit",disabled:!l||c,className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white py-3 px-6 rounded-lg font-medium hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all-smooth interactive-scale focus-ring animate-fade-in animate-stagger-4",children:c?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-3"}),s.jsx("span",{children:"ang xc thc..."})]}):s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("span",{children:"ng nhp"}),s.jsx("svg",{className:"w-5 h-5 ml-2 transition-transform-smooth group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]})})}),s.jsx("footer",{className:"p-6"})]})}function NN(){const[l,a]=b.useState([]),[n,i]=b.useState(!0),[c,u]=b.useState(null),[h,g]=b.useState(!1),m=ws(),[x]=fo(),p=x.get("location")||"";b.useEffect(()=>{p&&(async()=>{try{i(!0);const _=(await ys.getTeamsByLocation(p)).sort((D,M)=>{const E=z=>{const H=z.match(/\d+/);return H?parseInt(H[0]):0},C=E(D.name),G=E(M.name);return C&&G?C-G:D.name.localeCompare(M.name)});a(_)}catch(S){console.error("Failed to load teams:",S)}finally{i(!1)}})()},[p]);const v=N=>{h||(u(N),g(!0),setTimeout(()=>{m(`/auth/user-selection?location=${encodeURIComponent(p)}&teamId=${N}`)},600))},j=()=>{m("/")};return n?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-600 border-t-transparent mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"ang ti danh sch nhm..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[s.jsx("header",{className:"p-6",children:s.jsxs("button",{onClick:j,className:"inline-flex items-center text-gray-700 hover:text-gray-900 transition-colors duration-200",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Quay li"]})}),s.jsx("main",{className:"flex-1 flex items-center justify-center px-6",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8 animate-fade-in",children:[s.jsxs("h1",{className:"text-2xl font-medium text-gray-900 mb-2 animate-slide-down",children:["Khu vc ",p]}),s.jsx("p",{className:"text-gray-600 animate-fade-in animate-stagger-1",children:"Chn nhm ca bn"})]}),l.length>0?s.jsx("div",{className:"space-y-4",children:l.map((N,S)=>s.jsx("button",{className:`
                    w-full p-6 text-left bg-white border border-gray-200 rounded-lg
                    interactive-scale interactive-lift
                    hover:border-blue-300 hover:bg-blue-50
                    transition-all-smooth focus-ring
                    animate-slide-up
                    ${c===N.id?"border-blue-500 bg-blue-50 scale-[1.02] shadow-lg":"shadow-sm"}
                    ${h&&c!==N.id?"opacity-30 scale-95":""}
                    ${h&&c===N.id?"border-blue-600 bg-blue-100":""}
                  `,style:{animationDelay:`${S*150}ms`},onClick:()=>v(N.id),disabled:h,children:s.jsxs("div",{className:"flex items-center relative",children:[s.jsxs("div",{className:"flex-1 transition-transform-smooth",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1 transition-colors-smooth",children:N.name}),s.jsx("p",{className:"text-sm text-gray-500 transition-colors-smooth",children:p})]}),s.jsx("div",{className:`
                      text-gray-400 transition-all-smooth
                      ${c===N.id?"text-blue-600 transform rotate-90 scale-110":"group-hover:text-blue-600 group-hover:translate-x-1"}
                    `,children:s.jsx("svg",{className:"w-5 h-5 transition-transform-smooth",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})},N.id))}):s.jsxs("div",{className:"text-center py-12 animate-fade-in",children:[s.jsx("div",{className:"text-gray-400 mb-4 animate-float",children:s.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Khng tm thy nhm no"}),s.jsxs("p",{className:"text-gray-600 text-sm",children:["Hin ti cha c nhm no ti khu vc ",p]})]}),h&&s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent mr-2"}),s.jsx("span",{className:"text-gray-700 text-sm",children:"ang chuyn hng..."})]})})]})}),s.jsx("footer",{className:"p-6"})]})}function SN(){const[l,a]=b.useState(""),[n,i]=b.useState(""),[c,u]=b.useState(""),[h,g]=b.useState(!1),[m,x]=b.useState(!1),p=ws(),[v]=fo(),j=v.get("email")||"",N=v.get("name")||"",{changePassword:S}=ln(),_=async D=>{if(D.preventDefault(),n!==c){alert("Mt khu mi v xc nhn mt khu khng khp");return}if(n.length<6){alert("Mt khu mi phi c t nht 6 k t");return}x(!0);try{await S(j,l,n),alert("i mt khu thnh cng!"),p("/dashboard")}catch(M){console.error("Change password failed:",M),alert(M instanceof Error?M.message:"i mt khu tht bi")}finally{x(!1)}};return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[s.jsx("header",{className:"p-6"}),s.jsx("main",{className:"flex-1 flex items-center justify-center px-6",children:s.jsx("div",{className:"w-full max-w-md",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 border border-gray-200",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-2xl font-medium text-gray-900 mb-2",children:"i mt khu ln u"}),s.jsxs("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:["Cho ",N,"!"]}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Vui lng i mt khu  bo mt ti khon"})]}),s.jsxs("form",{onSubmit:_,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mt khu hin ti"}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:h?"text":"password",value:l,onChange:D=>a(D.target.value),placeholder:"Nhp mt khu hin ti",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mt khu mi"}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:h?"text":"password",value:n,onChange:D=>i(D.target.value),placeholder:"Nhp mt khu mi (ti thiu 6 k t)",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0,minLength:6})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Xc nhn mt khu mi"}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:h?"text":"password",value:c,onChange:D=>u(D.target.value),placeholder:"Nhp li mt khu mi",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0})})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"showPasswords",checked:h,onChange:D=>g(D.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"showPasswords",className:"ml-2 block text-sm text-gray-700",children:"Hin th mt khu"})]}),n&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm text-gray-600",children:" mnh mt khu:"}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("div",{className:`h-2 w-1/4 rounded ${n.length>=6?"bg-blue-500":"bg-gray-200"}`}),s.jsx("div",{className:`h-2 w-1/4 rounded ${n.length>=8?"bg-blue-500":"bg-gray-200"}`}),s.jsx("div",{className:`h-2 w-1/4 rounded ${/[A-Z]/.test(n)?"bg-blue-500":"bg-gray-200"}`}),s.jsx("div",{className:`h-2 w-1/4 rounded ${/[0-9]/.test(n)?"bg-blue-500":"bg-gray-200"}`})]}),s.jsx("div",{className:"text-xs text-gray-500",children:"Gi : S dng t nht 8 k t, bao gm ch hoa v s"})]}),s.jsx("button",{type:"submit",disabled:!l||!n||!c||n!==c||m,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",children:m?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"ang cp nht..."]}):s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Cp nht mt khu"]})})]}),s.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("svg",{className:"w-5 h-5 text-gray-600 mt-0.5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("div",{className:"text-sm text-gray-700",children:[s.jsx("p",{className:"font-medium mb-1",children:"Lu  quan trng:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[s.jsx("li",{children:"Mt khu mi s c s dng cho cc ln ng nhp tip theo"}),s.jsx("li",{children:"Hy ghi nh mt khu mi ca bn"})]})]})]})})]})})}),s.jsx("footer",{className:"p-6"})]})}const _N=({title:l,newCount:a,oldCount:n,total:i,color:c})=>s.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-300 uppercase tracking-wider",children:l}),s.jsx("div",{className:`w-2 h-2 ${c} rounded-full`})]}),s.jsxs("div",{className:"flex items-baseline space-x-2 mb-2",children:[s.jsx("span",{className:"text-3xl font-bold text-white",children:i}),s.jsx("span",{className:"text-sm text-gray-400",children:"Tng"})]}),s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsxs("span",{className:"text-xs text-green-400",children:[i>0?"":""," ",i>0?"100%":"0%"]}),s.jsx("span",{className:"text-xs text-gray-400",children:"hot ng"})]}),s.jsxs("div",{className:"h-8 flex items-end space-x-1",children:[s.jsx("div",{className:`w-2 ${c} h-4 rounded-sm`}),s.jsx("div",{className:`w-2 ${c} h-5 rounded-sm`}),s.jsx("div",{className:`w-2 ${c} h-6 rounded-sm`}),s.jsx("div",{className:`w-2 ${c} h-7 rounded-sm`}),s.jsx("div",{className:`w-2 ${c} h-8 rounded-sm`})]}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[s.jsxs("span",{children:["Mi: ",a]}),s.jsxs("span",{children:["C: ",n]})]})]}),kN=()=>s.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"h-4 bg-gray-600 rounded w-24"}),s.jsx("div",{className:"w-2 h-2 bg-gray-600 rounded-full"})]}),s.jsxs("div",{className:"flex items-baseline space-x-2 mb-2",children:[s.jsx("div",{className:"h-8 bg-gray-600 rounded w-16"}),s.jsx("div",{className:"h-4 bg-gray-600 rounded w-8"})]}),s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx("div",{className:"h-3 bg-gray-600 rounded w-12"}),s.jsx("div",{className:"h-3 bg-gray-600 rounded w-16"})]}),s.jsxs("div",{className:"h-8 flex items-end space-x-1",children:[s.jsx("div",{className:"w-2 bg-gray-600 h-4 rounded-sm"}),s.jsx("div",{className:"w-2 bg-gray-600 h-5 rounded-sm"}),s.jsx("div",{className:"w-2 bg-gray-600 h-6 rounded-sm"}),s.jsx("div",{className:"w-2 bg-gray-600 h-7 rounded-sm"}),s.jsx("div",{className:"w-2 bg-gray-600 h-8 rounded-sm"})]}),s.jsxs("div",{className:"flex justify-between text-xs mt-2",children:[s.jsx("div",{className:"h-3 bg-gray-600 rounded w-12"}),s.jsx("div",{className:"h-3 bg-gray-600 rounded w-12"})]})]}),Vu=({stats:l,title:a,isLoading:n=!1})=>{if(n)return s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:a}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((c,u)=>s.jsx(kN,{},u))})]});const i=[{title:"KTS C NHN",newCount:l.ktsNew,oldCount:l.ktsOld,total:l.ktsNew+l.ktsOld,color:"bg-blue-400",icon:""},{title:"I TC C NHN",newCount:l.partnerNew,oldCount:l.partnerOld,total:l.partnerNew+l.partnerOld,color:"bg-green-400",icon:""},{title:"KHCH HNG C NHN",newCount:l.customerNew,oldCount:l.customerOld,total:l.customerNew+l.customerOld,color:"bg-orange-400",icon:""},{title:"SBG C NHN",newCount:l.sbgNew,oldCount:l.sbgOld,total:l.sbgNew+l.sbgOld,color:"bg-purple-400",icon:""},{title:"CNG VIC KHC",newCount:Math.floor(l.other*.3),oldCount:Math.ceil(l.other*.7),total:l.other,color:"bg-gray-400",icon:""}];return s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:a}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map((c,u)=>s.jsx(_N,{...c},u))})]})},TN={personal:{label:"C nhn",icon:"",description:"Thng k cng vic c nhn"},team:{label:"Nhm",icon:"",description:"Thng k nhm ca bn"},department:{label:"Ton phng",icon:"",description:"Thng k ton b phng ban"},locations:{label:"Theo khu vc",icon:"",description:"Thng k theo H Ni/HCM"}},EN=({activeTab:l,onTabChange:a,availableTabs:n,className:i=""})=>n.length<=1?null:s.jsx("div",{className:`border-b border-gray-700 ${i}`,children:s.jsx("nav",{className:"flex space-x-8","aria-label":"Dashboard tabs",children:n.map(c=>{const u=TN[c],h=l===c;return s.jsxs("button",{onClick:()=>a(c),className:`group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm transition-colors ${h?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300"}`,"aria-current":h?"page":void 0,children:[s.jsx("span",{className:"text-base mr-2",children:u.icon}),s.jsx("span",{children:u.label}),h&&s.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-500/20 text-blue-300",children:"ang xem"})]},c)})})}),CN={"H Ni":"","H Ch Minh":"",hanoi:"",hcm:"",HN:"",HCM:""},yg=l=>CN[l]||"",DN={hanoi:{label:"H Ni",icon:yg("hanoi"),description:"Thng k vn phng H Ni"},hcm:{label:"H Ch Minh",icon:yg("hcm"),description:"Thng k vn phng H Ch Minh"}},AN=({activeLocation:l,onLocationChange:a,className:n=""})=>s.jsx("div",{className:`border-b border-gray-700 ${n}`,children:s.jsx("nav",{className:"flex space-x-8","aria-label":"Location tabs",children:Object.entries(DN).map(([i,c])=>{const u=l===i,h=i;return s.jsxs("button",{onClick:()=>a(h),className:`group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm transition-colors ${u?"text-blue-400 border-blue-500":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300"}`,"aria-current":u?"page":void 0,children:[s.jsx("span",{className:"text-base mr-2",children:c.icon}),s.jsx("span",{children:c.label}),u&&s.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-500/20 text-blue-300",children:"ang xem"})]},i)})})}),MN=({member:l,onClick:a})=>{const n=Object.values(l.stats).reduce((c,u)=>c+u,0),i=[{label:"KTS",count:l.stats.ktsNew+l.stats.ktsOld,color:"bg-blue-400"},{label:"i tc",count:l.stats.partnerNew+l.stats.partnerOld,color:"bg-green-400"},{label:"KH",count:l.stats.customerNew+l.stats.customerOld,color:"bg-orange-400"},{label:"SBG",count:l.stats.sbgNew+l.stats.sbgOld,color:"bg-purple-400"}].sort((c,u)=>u.count-c.count).slice(0,3);return s.jsxs("div",{className:`bg-gray-800 rounded-xl p-4 border border-gray-700 transition-all duration-200 ${a?"cursor-pointer hover:border-gray-600 hover:bg-gray-750":""}`,onClick:a,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-sm mr-3",children:l.userName.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-white font-medium text-sm",children:l.userName}),s.jsx("p",{className:"text-gray-400 text-xs",children:"Thnh vin"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-lg font-bold text-white",children:n}),s.jsx("div",{className:"text-xs text-gray-400",children:"Tng CV"})]})]}),s.jsxs("div",{className:"space-y-2",children:[i.map((c,u)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-2 h-2 ${c.color} rounded-full mr-2`}),s.jsx("span",{className:"text-xs text-gray-300",children:c.label})]}),s.jsx("span",{className:"text-xs text-white font-medium",children:c.count})]},c.label)),l.stats.other>0&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full mr-2"}),s.jsx("span",{className:"text-xs text-gray-300",children:"Khc"})]}),s.jsx("span",{className:"text-xs text-white font-medium",children:l.stats.other})]})]}),s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700",children:[s.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[s.jsx("span",{children:"Hot ng"}),s.jsx("span",{children:n>0?"100%":"0%"})]}),s.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1.5",children:s.jsx("div",{className:`h-1.5 rounded-full ${n>0?"bg-blue-400":"bg-gray-600"}`,style:{width:n>0?"100%":"0%"}})})]})]})},ON=()=>s.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 border border-gray-700 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-full mr-3"}),s.jsxs("div",{children:[s.jsx("div",{className:"h-4 bg-gray-600 rounded w-20 mb-1"}),s.jsx("div",{className:"h-3 bg-gray-600 rounded w-16"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"h-5 bg-gray-600 rounded w-8 mb-1"}),s.jsx("div",{className:"h-3 bg-gray-600 rounded w-12"})]})]}),s.jsx("div",{className:"space-y-2",children:Array.from({length:3}).map((l,a)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"h-3 bg-gray-600 rounded w-16"}),s.jsx("div",{className:"h-3 bg-gray-600 rounded w-6"})]},a))})]}),vg=({members:l,teamName:a,isLoading:n=!1,onMemberClick:i})=>n?s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["Thng k thnh vin - ",a]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Array.from({length:6}).map((c,u)=>s.jsx(ON,{},u))})]}):l.length===0?s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["Thng k thnh vin - ",a]}),s.jsxs("div",{className:"text-center py-8 text-gray-400",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsx("p",{children:"Nhm ny cha c thnh vin no"})]})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Thng k thnh vin - ",a]}),s.jsxs("div",{className:"text-sm text-gray-400",children:[l.length," thnh vin"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:l.map(c=>s.jsx(MN,{member:c,onClick:i?()=>i(c.userId,c.userName):void 0},c.userId))})]});class RN{async getAllTeams(){try{const{data:a,error:n}=await te.from("teams").select(`
          id,
          name,
          location,
          leader_id,
          leader:users!teams_leader_id_fkey(id, name)
        `).order("location",{ascending:!0}).order("name",{ascending:!0});return n?(console.error(" Error fetching teams:",n),[]):a?.map(c=>({...c,leader:Array.isArray(c.leader)?c.leader[0]:c.leader}))||[]}catch(a){return console.error(" Error in getAllTeams:",a),[]}}async getTeamsByLocation(a){try{const{data:n,error:i}=await te.from("teams").select(`
          id,
          name,
          location,
          leader_id,
          leader:users!teams_leader_id_fkey(id, name)
        `).eq("location",a).order("name",{ascending:!0});return i?(console.error(" Error fetching teams by location:",i),[]):n?.map(u=>({...u,leader:Array.isArray(u.leader)?u.leader[0]:u.leader}))||[]}catch(n){return console.error(" Error in getTeamsByLocation:",n),[]}}async getTeamMembers(a){try{const{data:n,error:i}=await te.from("users").select(`
          id,
          name,
          email,
          role,
          team_id,
          location
        `).eq("team_id",a).order("role",{ascending:!1}).order("name",{ascending:!0});return i?(console.error(" Error fetching team members:",i),[]):n||[]}catch(n){return console.error(" Error in getTeamMembers:",n),[]}}async getTeamById(a){try{const{data:n,error:i}=await te.from("teams").select(`
          id,
          name,
          location,
          leader_id,
          leader:users!teams_leader_id_fkey(id, name)
        `).eq("id",a).single();return i||!n?(console.error(" Error fetching team by ID:",i),null):{...n,leader:Array.isArray(n.leader)?n.leader[0]:n.leader}}catch(n){return console.error(" Error in getTeamById:",n),null}}async isTeamLeader(a,n){try{const{data:i,error:c}=await te.from("teams").select("leader_id").eq("id",n).single();return c||!i?!1:i.leader_id===a}catch(i){return console.error(" Error in isTeamLeader:",i),!1}}async getTeamsLedByUser(a){try{const{data:n,error:i}=await te.from("teams").select(`
          id,
          name,
          location,
          leader_id,
          leader:users!teams_leader_id_fkey(id, name)
        `).eq("leader_id",a).order("location",{ascending:!0}).order("name",{ascending:!0});return i?(console.error(" Error fetching teams led by user:",i),[]):n?.map(u=>({...u,leader:Array.isArray(u.leader)?u.leader[0]:u.leader}))||[]}catch(n){return console.error(" Error in getTeamsLedByUser:",n),[]}}}const kx=new RN,UN=({location:l,selectedTeamId:a,onTeamSelect:n,className:i=""})=>{const[c,u]=b.useState([]),[h,g]=b.useState(!1);b.useEffect(()=>{m()},[l]);const m=async()=>{g(!0);try{const x=await kx.getTeamsByLocation(l);u(x)}catch(x){console.error(" Error loading teams:",x)}finally{g(!1)}};return h?s.jsx("div",{className:`${i}`,children:s.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:4}).map((x,p)=>s.jsx("div",{className:"px-4 py-2 bg-gray-700 rounded-lg animate-pulse",children:s.jsx("div",{className:"h-4 bg-gray-600 rounded w-20"})},p))})}):c.length===0?s.jsx("div",{className:`${i}`,children:s.jsxs("div",{className:"text-center py-8 text-gray-400",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("p",{children:["Khng c nhm no ti ",l]})]})}):s.jsxs("div",{className:`${i}`,children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-white mb-2",children:["Chn nhm ti ",l]}),s.jsx("p",{className:"text-sm text-gray-400",children:"Click vo nhm  xem thng k chi tit ca cc thnh vin"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:c.map(x=>{const p=a===x.id;return s.jsxs("button",{onClick:()=>n(x.id,x.name),className:`p-4 rounded-xl border-2 transition-all duration-200 text-left ${p?"border-blue-500 bg-blue-500/10 shadow-lg":"border-gray-600 bg-gray-800 hover:border-gray-500 hover:bg-gray-700"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${p?"bg-blue-400":"bg-gray-500"}`}),s.jsx("span",{className:`font-medium ${p?"text-blue-300":"text-white"}`,children:x.name})]}),p&&s.jsx("span",{className:"text-blue-400",children:""})]}),s.jsx("div",{className:"text-xs text-gray-400",children:x.leader?.name?s.jsxs("span",{children:["Trng nhm: ",x.leader.name]}):s.jsx("span",{children:"Cha c trng nhm"})}),s.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[" ",x.location]})]},x.id)})})]})};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HN=l=>l.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,n,i)=>i?i.toUpperCase():n.toLowerCase()),bg=l=>{const a=HN(l);return a.charAt(0).toUpperCase()+a.slice(1)},Tx=(...l)=>l.filter((a,n,i)=>!!a&&a.trim()!==""&&i.indexOf(a)===n).join(" ").trim(),BN=l=>{for(const a in l)if(a.startsWith("aria-")||a==="role"||a==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=b.forwardRef(({color:l="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:c="",children:u,iconNode:h,...g},m)=>b.createElement("svg",{ref:m,...qN,width:a,height:a,stroke:l,strokeWidth:i?Number(n)*24/Number(a):n,className:Tx("lucide",c),...!u&&!BN(g)&&{"aria-hidden":"true"},...g},[...h.map(([x,p])=>b.createElement(x,p)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(l,a)=>{const n=b.forwardRef(({className:i,...c},u)=>b.createElement(zN,{ref:u,iconNode:a,className:Tx(`lucide-${LN(bg(l))}`,`lucide-${l}`,i),...c}));return n.displayName=bg(l),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],PN=we("arrow-right",$N);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Ex=we("briefcase",KN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],qs=we("building",GN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],wg=we("calendar-days",IN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Bt=we("calendar",VN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Qa=we("camera",QN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],jl=we("check",YN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ks=we("chevron-down",FN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ZN=we("chevron-left",XN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Jr=we("chevron-right",JN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],dd=we("chevron-up",WN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],on=we("circle-check-big",e2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Cl=we("clock",t2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],a2=we("download",s2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],n2=we("ellipsis-vertical",r2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],i2=we("eye-off",l2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ed=we("eye",o2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],u2=we("file-text",c2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],h2=we("funnel",d2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Cx=we("globe",f2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],g2=we("grid-3x3",m2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],p2=we("grip-vertical",x2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Dx=we("house",y2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],b2=we("image",v2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],j2=we("info",w2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Dl=we("lock",N2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ax=we("log-out",S2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Cd=we("mail",_2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],T2=we("menu",k2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],Qu=we("paperclip",E2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],en=we("pen-line",C2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ya=we("plus",D2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Mx=we("rotate-ccw",A2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Nl=we("save",M2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ox=we("search",O2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],U2=we("settings",R2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Yu=we("square-check-big",L2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],B2=we("square-pen",H2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],jg=we("square",q2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],vs=we("target",z2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Fa=we("trash-2",$2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],cn=we("triangle-alert",P2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Rx=we("upload",K2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],I2=we("user-check",G2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],$s=we("user",V2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],qt=we("users",Q2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],et=we("x",Y2),Ng=[{value:"today",label:"Hm nay",icon:""},{value:"week",label:"Tun ny",icon:""},{value:"month",label:"Thng ny",icon:""},{value:"all",label:"Tt c",icon:""}],Sg=({value:l,onChange:a,className:n=""})=>{const[i,c]=b.useState(!1),u=b.useRef(null);b.useEffect(()=>{const m=x=>{u.current&&!u.current.contains(x.target)&&c(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]);const h=Ng.find(m=>m.value===l.period),g=m=>{a({period:m}),c(!1)};return s.jsxs("div",{className:`relative ${n}`,ref:u,children:[s.jsxs("button",{type:"button",onClick:()=>c(!i),className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 border border-gray-600 rounded-lg text-white text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx(Bt,{className:"w-4 h-4"}),s.jsx("span",{children:h?.label||"Chn thi gian"}),s.jsx(Ks,{className:`w-4 h-4 transition-transform ${i?"rotate-180":""}`})]}),i&&s.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-gray-800 border border-gray-600 rounded-xl shadow-2xl z-50",children:s.jsx("div",{className:"py-2",children:Ng.map(m=>s.jsxs("button",{type:"button",onClick:()=>g(m.value),className:`w-full px-4 py-2.5 text-left text-sm transition-colors flex items-center gap-3 ${l.period===m.value?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:[s.jsx("span",{className:"text-base",children:m.icon}),s.jsx("span",{children:m.label}),l.period===m.value&&s.jsx("span",{className:"ml-auto text-blue-300",children:""})]},m.value))})})]})},Ye={managerStats:{totalTasks:0,completedTasks:0,completionRate:0,hanoiRevenue:0,hcmRevenue:0},teamStats:{totalMembers:12},categoryStats:{architects:{new:0,existing:0,total:0},partners:{new:0,existing:0,total:0},customers:{new:0,existing:0,total:0},quotes:{new:0,existing:0,total:0},otherTasks:0}},_g=l=>`${l.toLocaleString("vi-VN")} VN`,F2=l=>`${l.toFixed(1)}%`,X2={other:"Cng vic khc","sbg-new":"SBG mi","sbg-old":"SBG c","partner-new":"i tc mi","partner-old":"i tc c","kts-new":"KTS mi","kts-old":"KTS c","customer-new":"Khch hng mi","customer-old":"Khch hng c"};class Z2{async moveScheduledTasksToToday(){try{console.log(" Auto-move: Checking for scheduled tasks to move...");const a=new Date().toISOString().split("T")[0],{data:n,error:i}=await te.from("tasks").select("*").eq("scheduled_date",a).eq("source","manual").not("scheduled_date","is",null);if(i)return console.error("Auto-move fetch error:",i),{success:!1,movedCount:0,error:i.message};if(!n||n.length===0)return console.log(" Auto-move: No tasks to move today"),{success:!0,movedCount:0};console.log(` Auto-move: Found ${n.length} tasks to move`);const{error:c}=await te.from("tasks").update({source:"scheduled",updated_at:new Date().toISOString()}).in("id",n.map(u=>u.id));return c?(console.error("Auto-move update error:",c),{success:!1,movedCount:0,error:c.message}):(console.log(` Auto-move: Successfully moved ${n.length} tasks`),{success:!0,movedCount:n.length})}catch(a){return console.error("Auto-move service error:",a),{success:!1,movedCount:0,error:a instanceof Error?a.message:"Unknown error"}}}async moveOverdueScheduledTasks(){try{console.log(" Auto-move: Checking for overdue scheduled tasks...");const a=new Date().toISOString().split("T")[0],{data:n,error:i}=await te.from("tasks").select("*").lt("scheduled_date",a).eq("source","manual").not("scheduled_date","is",null);if(i)return console.error("Auto-move overdue fetch error:",i),{success:!1,movedCount:0,error:i.message};if(!n||n.length===0)return console.log(" Auto-move: No overdue tasks to move"),{success:!0,movedCount:0};console.log(` Auto-move: Found ${n.length} overdue tasks to move`);const{error:c}=await te.from("tasks").update({source:"scheduled",status:"overdue",updated_at:new Date().toISOString()}).in("id",n.map(u=>u.id));return c?(console.error("Auto-move overdue update error:",c),{success:!1,movedCount:0,error:c.message}):(console.log(` Auto-move: Successfully moved ${n.length} overdue tasks`),{success:!0,movedCount:n.length})}catch(a){return console.error("Auto-move overdue service error:",a),{success:!1,movedCount:0,error:a instanceof Error?a.message:"Unknown error"}}}async runAutoMove(){console.log(" Starting auto-move process...");const a=await this.moveScheduledTasksToToday(),n=await this.moveOverdueScheduledTasks(),i=a.movedCount+n.movedCount;return i>0?console.log(` Auto-move completed: ${i} tasks moved`):console.log(" Auto-move completed: No tasks to move"),{today:a,overdue:n}}startAutoMoveScheduler(a=60){console.log(` Starting auto-move scheduler (every ${a} minutes)`),this.runAutoMove(),setInterval(()=>{this.runAutoMove()},a*60*1e3)}async triggerManualAutoMove(){const a=await this.runAutoMove(),n=a.today.movedCount,i=a.overdue.movedCount,c=n+i;if(c===0)return"Khng c cng vic no cn chuyn.";let u=` chuyn ${c} cng vic:`;return n>0&&(u+=`
- ${n} cng vic hm nay`),i>0&&(u+=`
- ${i} cng vic qu hn`),u}}const J2=new Z2,kg=[],Ux=l=>{console.log(" getUserById:",{id:l,mockUsersLength:kg.length});const a=kg.find(n=>n.id===l);return console.log(" getUserById result:",a?.name||"NOT FOUND"),a},W2=l=>{const a=Ux(l)||Ge(),n=a?.name==="Khng c Mnh",i=a?.role==="retail_director",c=n&&i;return console.log(" isDirector check:",{userId:l,user:a?.name,role:a?.role,isDirectorByName:n,isDirectorByRole:i,isDirector:c}),c},Ge=()=>{try{const l=localStorage.getItem("auth_user");if(l){const a=JSON.parse(l);if(!a.id||!a.name||!a.email)throw console.error(" Missing required user fields:",a),new Error("Invalid user data");const n={id:a.id,name:a.name,email:a.email,team_id:a.team_id||"director-team",location:a.location,role:a.role,team:a.team?{id:a.team.id,name:a.team.name,location:a.location==="H Ni"?"HN":"HCM"}:{id:"director-team",name:"Ban Gim c",location:a.location==="H Ni"?"HN":"HCM"}};return console.log(" getCurrentUser success:",n.name),n}}catch(l){console.error(" Error in getCurrentUser:",l)}throw new Error("No authenticated user found")},e1={"kts-new":"ktsNew","kts-old":"ktsOld","partner-new":"partnerNew","partner-old":"partnerOld","customer-new":"customerNew","customer-old":"customerOld","sbg-new":"sbgNew","sbg-old":"sbgOld",other:"other"};function Dd(l){const a=new Date;let n,i=a;switch(l.period){case"today":n=new Date(a.getFullYear(),a.getMonth(),a.getDate());break;case"week":const c=a.getDay(),u=c===0?6:c-1;n=new Date(a),n.setDate(a.getDate()-u),n.setHours(0,0,0,0);break;case"month":n=new Date(a.getFullYear(),a.getMonth(),1);break;case"all":default:n=new Date(2020,0,1);break}return l.startDate&&l.endDate&&(n=new Date(l.startDate),i=new Date(l.endDate)),{startDate:n.toISOString(),endDate:i.toISOString()}}async function Lx(l,a={period:"all"}){try{const{startDate:n,endDate:i}=Dd(a),{data:c,error:u}=await te.from("tasks").select("work_type").eq("created_by_id",l).gte("created_at",n).lte("created_at",i);return u?(console.error(" Error fetching personal stats:",u),Jt()):Ad(c||[])}catch(n){return console.error(" Error in getPersonalStats:",n),Jt()}}async function t1(l,a={period:"all"}){try{const{startDate:n,endDate:i}=Dd(a),{data:c,error:u}=await te.from("users").select("id").eq("team_id",l);if(u)return console.error(" Error fetching team members:",u),Jt();if(!c||c.length===0)return Jt();const h=c.map(x=>x.id),{data:g,error:m}=await te.from("tasks").select("work_type").in("created_by_id",h).gte("created_at",n).lte("created_at",i);return m?(console.error(" Error fetching team stats:",m),Jt()):Ad(g||[])}catch(n){return console.error(" Error in getTeamStats:",n),Jt()}}async function Tg(l,a={period:"all"}){try{const{startDate:n,endDate:i}=Dd(a),{data:c,error:u}=await te.from("users").select("id").eq("location",l);if(u)return console.error(" Error fetching users by location:",u),Jt();if(!c||c.length===0)return Jt();const h=c.map(x=>x.id),{data:g,error:m}=await te.from("tasks").select("work_type").in("created_by_id",h).gte("created_at",n).lte("created_at",i);return m?(console.error(" Error fetching location stats:",m),Jt()):Ad(g||[])}catch(n){return console.error(" Error in getLocationStats:",n),Jt()}}async function s1(l,a={period:"all"}){try{const n=await kx.getTeamMembers(l);return!n||n.length===0?[]:await Promise.all(n.map(async c=>{const u=await Lx(c.id,a);return{userId:c.id,userName:c.name,stats:u}}))}catch(n){return console.error(" Error in getTeamMembersStats:",n),[]}}function Ad(l){const a=Jt();return l.forEach(n=>{const i=e1[n.work_type];i&&a[i]++}),a}function Jt(){return{ktsNew:0,ktsOld:0,partnerNew:0,partnerOld:0,customerNew:0,customerOld:0,sbgNew:0,sbgOld:0,other:0}}async function a1(l={period:"all"}){const a=Ge();if(!a)return{personal:Jt()};const n=await Lx(a.id,l);if(a.name==="Khng c Mnh"||a.role==="retail_director"){const[i,c]=await Promise.all([Tg("H Ni",l),Tg("H Ch Minh",l)]);return{personal:n,hanoi:i,hcm:c}}if(a.role==="team_leader"&&a.team_id){const[i,c]=await Promise.all([t1(a.team_id,l),s1(a.team_id,l)]);return{personal:n,team:i,teamMembers:c}}return{personal:n}}const r1=({isOpen:l,onClose:a,plan:n,onEdit:i,onDelete:c,onUpdate:u})=>{const[h,g]=b.useState(!1),[m,x]=b.useState(!1),[p,v]=b.useState({name:"",description:"",priority:"normal",scheduled_time:""});if(Wr.useEffect(()=>{n&&v({name:n.name||"",description:n.description||"",priority:n.priority||"normal",scheduled_time:n.scheduled_time||""})},[n]),console.log(" PlanDetailModal render:",{isOpen:l,plan:n?.name||"null"}),!l||!n)return console.log(" PlanDetailModal not rendering:",{isOpen:l,hasPlan:!!n}),null;const j=E=>E?E.slice(0,5):"",N=E=>E?new Date(E).toLocaleDateString("vi-VN",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"",_=(E=>{switch(E){case"high":return{color:"text-red-400",bgColor:"bg-red-500/10",borderColor:"border-red-500/20",label:"u tin cao"};case"normal":return{color:"text-blue-400",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20",label:"u tin bnh thng"};case"low":return{color:"text-gray-400",bgColor:"bg-gray-500/10",borderColor:"border-gray-500/20",label:"u tin thp"};default:return{color:"text-blue-400",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20",label:"u tin bnh thng"}}})(n.priority||"normal"),D=async()=>{if(!p.name.trim()){alert("Vui lng nhp tn k hoch");return}x(!0);try{u&&await u({id:n.id,...p}),g(!1)}catch(E){console.error("Li khi lu k hoch:",E),alert("Khng th lu k hoch. Vui lng th li.")}finally{x(!1)}},M=()=>{v({name:n.name||"",description:n.description||"",priority:n.priority||"normal",scheduled_time:n.scheduled_time||""}),g(!1)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg w-full max-w-2xl max-h-[95vh] sm:max-h-[90vh] overflow-hidden shadow-2xl border border-gray-700 mx-2 sm:mx-0",children:[s.jsx("div",{className:`p-3 sm:p-4 border-b border-gray-700 ${h?"bg-gradient-to-r from-orange-600/20 to-yellow-600/20":"bg-gradient-to-r from-blue-600/10 to-purple-600/10"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-blue-500/20 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(vs,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-400"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h2",{className:"text-base sm:text-lg font-semibold text-white truncate",children:h?"Chnh sa k hoch":"Chi tit k hoch"}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-400 truncate",children:N(n.scheduled_date)})]})]}),s.jsx("button",{onClick:a,className:"p-1.5 sm:p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors flex-shrink-0",children:s.jsx(et,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})}),s.jsx("div",{className:"p-3 sm:p-4 overflow-y-auto max-h-[calc(95vh-180px)] sm:max-h-[calc(90vh-200px)]",children:h?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tn k hoch"}),s.jsx("input",{type:"text",value:p.name,onChange:E=>v({...p,name:E.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none",placeholder:"Nhp tn k hoch..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"M t"}),s.jsx("textarea",{value:p.description,onChange:E=>v({...p,description:E.target.value}),rows:3,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none resize-none",placeholder:"Nhp m t chi tit..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Thi gian"}),s.jsx("input",{type:"time",value:p.scheduled_time,onChange:E=>v({...p,scheduled_time:E.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Mc  u tin"}),s.jsxs("select",{value:p.priority,onChange:E=>v({...p,priority:E.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none",children:[s.jsx("option",{value:"low",children:"u tin thp"}),s.jsx("option",{value:"normal",children:"u tin bnh thng"}),s.jsx("option",{value:"high",children:"u tin cao"})]})]})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:n.name}),n.description&&s.jsx("p",{className:"text-gray-300 leading-relaxed",children:n.description})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[n.scheduled_time&&s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 p-2 sm:p-3 bg-gray-700/30 rounded-lg",children:[s.jsx(Cl,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-400 flex-shrink-0"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:"Thi gian"}),s.jsx("p",{className:"text-sm sm:text-base text-white font-medium",children:j(n.scheduled_time)})]})]}),s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 p-2 sm:p-3 bg-gray-700/30 rounded-lg",children:[s.jsx(cn,{className:`w-4 h-4 sm:w-5 sm:h-5 ${_.color} flex-shrink-0`}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:"Mc  u tin"}),s.jsx("p",{className:`text-sm sm:text-base font-medium ${_.color}`,children:_.label})]})]}),n.createdBy&&s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 p-2 sm:p-3 bg-gray-700/30 rounded-lg",children:[s.jsx($s,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-400 flex-shrink-0"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:"Ngi to"}),s.jsx("p",{className:"text-sm sm:text-base text-white font-medium truncate",children:n.createdBy})]})]}),s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 p-2 sm:p-3 bg-gray-700/30 rounded-lg",children:[s.jsx(Bt,{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-400 flex-shrink-0"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:"Ngy ln lch"}),s.jsx("p",{className:"text-sm sm:text-base text-white font-medium",children:N(n.scheduled_date)})]})]})]})]})}),s.jsx("div",{className:"p-3 sm:p-4 border-t border-gray-700 bg-gray-800/50",children:h?s.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-end gap-2 sm:gap-3",children:[s.jsx("button",{onClick:M,disabled:m,className:"px-3 sm:px-4 py-2 text-gray-400 hover:text-white transition-colors disabled:opacity-50 text-sm sm:text-base",children:"Hy"}),s.jsx("button",{onClick:D,disabled:m||!p.name.trim(),className:"px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm sm:text-base",children:m?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"ang lu..."]}):"Lu thay i"})]}):s.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-2 sm:gap-0",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("button",{onClick:()=>g(!0),className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm sm:text-base",children:[s.jsx(B2,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Chnh sa"]})}),s.jsxs("button",{onClick:c,className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm sm:text-base",children:[s.jsx(Fa,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Xa"]})]})})]})})};class n1{async scheduleTask(a){try{if(!Ge())return{success:!1,error:"User not authenticated"};const i=new Date(a.scheduledDate);if(isNaN(i.getTime()))return{success:!1,error:"Invalid scheduled date"};const c=new Date,u=new Date(c.getFullYear(),c.getMonth(),c.getDate());if(new Date(i.getFullYear(),i.getMonth(),i.getDate())<u)return{success:!1,error:"Scheduled date cannot be in the past"};if(a.scheduledTime&&!/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(a.scheduledTime))return{success:!1,error:"Invalid time format. Use HH:MM"};const{data:g,error:m}=await te.from("tasks").select("*").eq("id",a.taskId).single();if(m||!g)return{success:!1,error:"Task not found"};const x={scheduled_date:a.scheduledDate,source:"manual"};a.scheduledTime&&(x.scheduled_time=a.scheduledTime);const{data:p,error:v}=await te.from("tasks").update(x).eq("id",a.taskId).select().single();return v?(console.error("Error scheduling task:",v),{success:!1,error:"Failed to schedule task"}):{success:!0,task:p}}catch(n){return console.error("Schedule task error:",n),{success:!1,error:"Unexpected error during scheduling"}}}async unscheduleTask(a){try{const n=Ge();if(!n)return{success:!1,error:"User not authenticated"};const{data:i,error:c}=await te.from("tasks").select("*").eq("id",a).single();if(c||!i)return{success:!1,error:"Task not found"};if(i.created_by_id!==n.id&&i.assigned_to_id!==n.id)return{success:!1,error:"Not authorized to modify this task"};const{data:u,error:h}=await te.from("tasks").update({scheduled_date:null,scheduled_time:null,source:"manual"}).eq("id",a).select().single();return h?(console.error("Error unscheduling task:",h),{success:!1,error:"Failed to unschedule task"}):{success:!0,task:u}}catch(n){return console.error("Unschedule task error:",n),{success:!1,error:"Unexpected error during unscheduling"}}}async getScheduledTasks(a,n){try{const i=Ge();if(!i)throw new Error("User not authenticated");const c=i.name==="Khng c Mnh"||i.email==="manh.khong@company.com",u=n||i.id;if(!c&&u!==i.id)throw new Error("Permission denied: Cannot view other users schedules");const h=new Date(a).toISOString().split("T")[0];console.log(" Getting scheduled tasks for date:",{targetDate:h,userId:u,requestedBy:i.id,isAdmin:c});let g=te.from("tasks").select("*").not("scheduled_date","is",null).eq("scheduled_date",h);n?g=g.or(`created_by_id.eq.${n},assigned_to_id.eq.${n}`):c||(g=g.or(`created_by_id.eq.${i.id},assigned_to_id.eq.${i.id}`));const{data:m,error:x}=await g.order("scheduled_time",{ascending:!0});if(x)throw console.error("Error fetching scheduled tasks:",x),new Error("Failed to fetch scheduled tasks");return m||[]}catch(i){throw console.error("Get scheduled tasks error:",i),i}}async getMyScheduledTasks(){try{const a=Ge();if(!a)throw new Error("User not authenticated");const{data:n,error:i}=await te.from("tasks").select("*").not("scheduled_date","is",null).or(`created_by_id.eq.${a.id},assigned_to_id.eq.${a.id}`).order("scheduled_date",{ascending:!0}).order("scheduled_time",{ascending:!0});if(i)throw console.error("Error fetching my scheduled tasks:",i),new Error("Failed to fetch scheduled tasks");return n||[]}catch(a){throw console.error("Get my scheduled tasks error:",a),a}}async moveScheduledTasksToToday(){try{const a=new Date().toISOString().split("T")[0],{data:n,error:i}=await te.from("tasks").select("*").eq("scheduled_date",a).eq("source","manual").not("scheduled_date","is",null);if(i)throw console.error("Error fetching tasks to move:",i),new Error("Failed to fetch tasks to move");if(!n||n.length===0)return{movedCount:0,tasks:[]};const c=n.map(g=>g.id),{data:u,error:h}=await te.from("tasks").update({source:"scheduled"}).in("id",c).select();if(h)throw console.error("Error moving scheduled tasks:",h),new Error("Failed to move scheduled tasks");return{movedCount:u?.length||0,tasks:u||[]}}catch(a){throw console.error("Move scheduled tasks error:",a),a}}isTaskScheduled(a){return a.scheduled_date!==null&&a.scheduled_date!==void 0}isTaskFromSchedule(a){return a.source==="scheduled"}formatScheduledDate(a,n){const c=new Date(a).toLocaleDateString("vi-VN",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return n?`${c} lc ${n}`:c}async getUpcomingScheduledTasks(){try{const a=Ge();if(!a)throw new Error("User not authenticated");const n=new Date,i=new Date(n.getTime()+10080*60*1e3),{data:c,error:u}=await te.from("tasks").select("*").not("scheduled_date","is",null).gte("scheduled_date",n.toISOString().split("T")[0]).lte("scheduled_date",i.toISOString().split("T")[0]).or(`created_by.eq.${a.id},assigned_to.eq.${a.id}`).order("scheduled_date",{ascending:!0}).order("scheduled_time",{ascending:!0});if(u)throw console.error("Error fetching upcoming scheduled tasks:",u),new Error("Failed to fetch upcoming scheduled tasks");return c||[]}catch(a){throw console.error("Get upcoming scheduled tasks error:",a),a}}async getScheduledTasksByUser(a){try{const n=Ge();if(!n)throw new Error("User not authenticated");if(!(n.name==="Khng c Mnh"||n.email==="manh.khong@company.com")&&a!==n.id)throw new Error("Permission denied: Cannot view other users schedules");console.log(" Getting scheduled tasks for user:",{userId:a,requestedBy:n.id});const{data:c,error:u}=await te.from("tasks").select("*").or(`created_by_id.eq.${a},assigned_to_id.eq.${a}`).not("scheduled_date","is",null).order("scheduled_date",{ascending:!0}).order("scheduled_time",{ascending:!0});if(u)throw console.error(" Supabase error in getScheduledTasksByUser:",u),new Error(`Failed to fetch user scheduled tasks: ${u.message}`);return console.log(` Scheduled tasks for user ${a}:`,c?.length||0),this.processScheduledTasks(c||[])}catch(n){throw console.error(" Error in getScheduledTasksByUser:",n),n}}async getScheduledTasksInRange(a,n,i){try{const c=Ge();if(!c)throw new Error("User not authenticated");const u=c.name==="Khng c Mnh"||c.email==="manh.khong@company.com",h=i||c.id;if(!u&&h!==c.id)throw new Error("Permission denied: Cannot view other users schedules");console.log(" Getting scheduled tasks in range:",{startDate:a,endDate:n,userId:h,requestedBy:c.id,isAdmin:u});let g=te.from("tasks").select("*").not("scheduled_date","is",null).gte("scheduled_date",a).lte("scheduled_date",n);i?g=g.or(`created_by_id.eq.${i},assigned_to_id.eq.${i}`):u||(g=g.or(`created_by_id.eq.${c.id},assigned_to_id.eq.${c.id}`));const{data:m,error:x}=await g.order("scheduled_date",{ascending:!0}).order("scheduled_time",{ascending:!0});if(x)throw console.error(" Supabase error in getScheduledTasksInRange:",x),new Error(`Failed to fetch scheduled tasks: ${x.message}`);return console.log(" Raw scheduled tasks from database:",m?.length||0),this.processScheduledTasks(m||[])}catch(c){throw console.error(" Error in getScheduledTasksInRange:",c),c}}processScheduledTasks(a){return!a||a.length===0?[]:(console.log(" Processing scheduled tasks:",a.map(n=>({name:n.name,date:n.scheduled_date,time:n.scheduled_time,dateOnly:n.scheduled_date?.split("T")[0]}))),a.map(n=>({...n,source:"scheduled"})))}}const dl=new n1,Fu=(l,a)=>{const n=a==="H Ni"?"HN":"HCM";switch(l){case"retail_director":return{canViewAllTeams:!0,canViewCrossLocation:!0,canCreateTasks:!0,canEditAllTasks:!0,canDeleteAllTasks:!0,allowedTaskScopes:["my-tasks","team-tasks","department-tasks"],defaultLocation:n};case"team_leader":return{canViewAllTeams:!1,canViewCrossLocation:!1,canCreateTasks:!0,canEditAllTasks:!1,canDeleteAllTasks:!1,allowedTaskScopes:["my-tasks","team-tasks","department-tasks"],defaultLocation:n};case"employee":return{canViewAllTeams:!1,canViewCrossLocation:!1,canCreateTasks:!0,canEditAllTasks:!1,canDeleteAllTasks:!1,allowedTaskScopes:["my-tasks","team-tasks","department-tasks"],defaultLocation:n};default:return{canViewAllTeams:!1,canViewCrossLocation:!1,canCreateTasks:!1,canEditAllTasks:!1,canDeleteAllTasks:!1,allowedTaskScopes:["my-tasks"],defaultLocation:n}}},Hx=()=>{try{const l=localStorage.getItem("auth_user");if(l){const n=JSON.parse(l);return Fu(n.role,n.location)}const a=Ge();return Fu(a.role,a.location)}catch(l){return console.error("Error getting current user permissions:",l),Fu("employee","H Ni")}},l1=l=>l.location==="H Ni"?"hanoi":"hcm",i1=l=>l==="retail_director",Yi=l=>l==="retail_director";class o1{filterScheduledTasks(a){const n=new Date().toISOString().split("T")[0];return a.filter(i=>{if(i.scheduled_date){const c=i.scheduled_date.split("T")[0];if(i.source==="checklist_item"||i.source==="manual"||i.source==="scheduled")return c<=n}return!0})}cleanDateFields(a){const n={...a};return["start_date","end_date","due_date","scheduled_date","created_at","updated_at"].forEach(c=>{if(c in n){const u=n[c];if(u==="")n[c]=null;else if(u&&typeof u=="string"){const h=/^(\d{2})\/(\d{2})\/(\d{4})$/,g=u.match(h);if(g){const[,m,x,p]=g,v=`${p}-${x}-${m}`;console.log(` Converting date format: ${u}  ${v}`),n[c]=v}else u.includes("-")||u.includes("T")?n[c]=u:console.warn(`  Unknown date format for ${c}:`,u)}}}),n}async getUserInfo(a){if(!a)return null;try{const{data:n,error:i}=await te.from("users").select("id, name, email, team_id, location, role").eq("id",a).single();return i?(console.warn("Error fetching user info:",i),null):n}catch(n){return console.error("Error in getUserInfo:",n),null}}async createTask(a,n){try{const i=await this.getUserInfo(n);if(!i)throw new Error("Khng tm thy thng tin ngi dng");const c={name:a.name,description:a.description||"",work_type:Array.isArray(a.workTypes)&&a.workTypes.length>0?a.workTypes:a.workType?[a.workType]:["other"],priority:a.priority||"normal",status:"new-requests",campaign_type:a.campaignType||"",platform:a.platform||[],start_date:a.startDate||new Date().toISOString(),end_date:a.endDate||null,due_date:a.dueDate||null,created_by_id:n,assigned_to_id:a.assignedToId||n,team_id:i.team_id||null,department:a.department||(i.location==="H Ni"?"HN":"HCM"),share_scope:a.shareScope||"team"},{data:u,error:h}=await te.from("tasks").insert(c).select().single();if(h)throw console.error("Supabase error:",h),new Error("Khng th to cng vic mi");const[g,m]=await Promise.all([this.getUserInfo(u.created_by_id),this.getUserInfo(u.assigned_to_id)]);return this.mapDbTaskToTask(u,g,m)}catch(i){throw console.error("Error creating task:",i),new Error("Khng th to cng vic mi")}}async getTasks(){return await dN(async()=>{try{console.log(" About to query Supabase tasks table...");const{data:a,error:n}=await te.from("tasks").select("*").order("created_at",{ascending:!1});if(console.log(" Supabase response:",{data:a,error:n,dataLength:a?.length||0}),n)return console.error(" Error fetching tasks:",n),console.error(" Error details:",JSON.stringify(n,null,2)),[];if(console.log(" Raw tasks from database:",a?.length||0),console.log(" Sample tasks:",a?.slice(0,3)),!a||a.length===0)return console.log(" No tasks found in database"),[];const i=a;console.log(" Task filtering in getTasks:",{totalTasks:a.length,filteredTasks:i.length,today:new Date().toISOString().split("T")[0],hiddenScheduledTasks:a.length-i.length});const c=new Set;i.forEach(g=>{g.created_by_id&&c.add(g.created_by_id),g.assigned_to_id&&c.add(g.assigned_to_id)});const{data:u}=await te.from("users").select("id, name, email, team_id, location").in("id",Array.from(c)),h=new Map;return u?.forEach(g=>h.set(g.id,g)),i.map(g=>this.mapDbTaskToTask(g,h.get(g.created_by_id),h.get(g.assigned_to_id)))}catch(a){return console.error("Error fetching tasks:",a),[]}})}async getTasksByUser(a){try{const{data:n,error:i}=await te.from("tasks").select("*").or(`created_by_id.eq.${a},assigned_to_id.eq.${a}`).order("created_at",{ascending:!1});if(i)return console.error("Error fetching user tasks:",i),[];if(!n||n.length===0)return[];const c=new Set;n.forEach(g=>{g.created_by_id&&c.add(g.created_by_id),g.assigned_to_id&&c.add(g.assigned_to_id)});const{data:u}=await te.from("users").select("id, name, email, team_id, location").in("id",Array.from(c)),h=new Map;return u?.forEach(g=>h.set(g.id,g)),n.map(g=>this.mapDbTaskToTask(g,h.get(g.created_by_id),h.get(g.assigned_to_id)))}catch(n){return console.error("Error fetching user tasks:",n),[]}}async updateTask(a){try{console.log(" TaskService.updateTask called with:",a);const n={};a.name!==void 0&&(n.name=a.name),a.description!==void 0&&(n.description=a.description),a.priority!==void 0&&(n.priority=a.priority),a.status!==void 0&&(n.status=a.status),a.workTypes!==void 0?n.work_type=a.workTypes:a.workType!==void 0&&(n.work_type=[a.workType]),a.campaignType!==void 0&&(n.campaign_type=a.campaignType),a.platform!==void 0&&(n.platform=a.platform),a.startDate!==void 0&&(n.start_date=a.startDate===""?null:a.startDate),a.endDate!==void 0&&(n.end_date=a.endDate===""?null:a.endDate),a.dueDate!==void 0&&(n.due_date=a.dueDate===""?null:a.dueDate),a.assignedToId!==void 0&&(n.assigned_to_id=a.assignedToId),a.department!==void 0&&(n.department=a.department),a.shareScope!==void 0&&(n.share_scope=a.shareScope),"scheduledDate"in a&&a.scheduledDate!==void 0&&(n.scheduled_date=a.scheduledDate===""?null:a.scheduledDate),"scheduledTime"in a&&a.scheduledTime!==void 0&&(n.scheduled_time=a.scheduledTime===""?null:a.scheduledTime);const i=this.cleanDateFields(n);console.log(" Mapped update data for database:",i);const{data:c,error:u}=await te.from("tasks").update(i).eq("id",a.id).select().single();if(u)throw console.error(" Supabase update error:",u),console.error(" Failed update data:",i),console.error(" Task ID:",a.id),new Error(`Khng th cp nht cng vic: ${u.message}`);console.log(" Task updated successfully in database:",c.id);const[h,g]=await Promise.all([this.getUserInfo(c.created_by_id),this.getUserInfo(c.assigned_to_id)]);return this.mapDbTaskToTask(c,h,g)}catch(n){throw console.error("Error updating task:",n),new Error("Khng th cp nht cng vic")}}async deleteTask(a){try{console.log(" TaskService: Deleting task with ID:",a);const{error:n}=await te.from("tasks").delete().eq("id",a);if(n)throw console.error(" Supabase delete error:",n),new Error(`Khng th xa cng vic: ${n.message}`);console.log(" TaskService: Task deleted successfully from database")}catch(n){throw console.error(" TaskService: Error deleting task:",n),n}}async getTaskById(a){try{const{data:n,error:i}=await te.from("tasks").select("*").eq("id",a).single();if(i){if(i.code==="PGRST116")return null;throw i}const[c,u]=await Promise.all([this.getUserInfo(n.created_by_id),this.getUserInfo(n.assigned_to_id)]);return this.mapDbTaskToTask(n,c,u)}catch(n){throw console.error("Error fetching task by ID:",n),new Error("Khng th ti thng tin cng vic")}}filterTasksByScope(a,n,i){const c=Ux(n)||Ge(),u=W2(n),h=c?.team_id,g=c?.location==="H Ni"?"HN":"HCM";console.log(" filterTasksByScope debug:",{scope:i,currentUserId:n,currentUser:c?.name,currentUserRole:c?.role,isUserDirector:u,userTeamId:h,userDepartment:g,totalTasks:a.length}),console.log(u?" User IS director, using simplified logic":" User is NOT director, using regular filter logic");const m=x=>x.shareScope?(console.log(` Task ${x.id} has shareScope: ${x.shareScope}`),x.shareScope):x.createdBy?.id===n||x.assignedTo?.id===n?(console.log(` Task ${x.id} fallback to private (own task)`),"private"):(console.log(` Task ${x.id} fallback to team (default)`),"team");return a.filter(x=>{const p=m(x),v=(()=>{switch(i){case"my-tasks":const j=x.createdBy?.id===n,N=x.assignedTo?.id===n,S=x.createdBy?.name===c?.name,_=x.assignedTo?.name===c?.name;console.log(` my-tasks filter for "${x.name}":`,{currentUserId:n,currentUserName:c?.name,taskCreatedById:x.createdBy?.id,taskCreatedByName:x.createdBy?.name,taskAssignedToId:x.assignedTo?.id,taskAssignedToName:x.assignedTo?.name,createdByMatch:j,assignedToMatch:N,createdByNameMatch:S,assignedToNameMatch:_,effectiveShareScope:p,isUserDirector:u});const D=j||N||S||_;return console.log(` my-tasks result (${u?"Director":"Regular"}): ${D?"INCLUDED":"EXCLUDED"}`),D;case"team-tasks":return u?(console.log(` Director sees all tasks: ${x.name}`),!0):p==="team"&&(x.createdBy?.team_id===h||x.assignedTo?.team_id===h)&&x.department===g;case"department-tasks":return u?(console.log(` Director sees all department tasks: ${x.name}`),!0):p==="public"&&x.department===g;default:return!1}})();return(i==="my-tasks"||i==="team-tasks"||i==="department-tasks")&&console.log(` Task "${x.name}" (shareScope: ${x.shareScope}) - ${i}: ${v?"INCLUDED":"EXCLUDED"}`),v})}async getFilteredTasks(a,n){try{const i=await this.getTasks(),c=n||Ge().id;return this.filterTasksByScope(i,c,a)}catch(i){return console.error("Error fetching filtered tasks:",i),[]}}mapDbTaskToTask(a,n,i){console.log(" mapDbTaskToTask - dbTask.work_type:",a.work_type,"Type:",typeof a.work_type,"IsArray:",Array.isArray(a.work_type));const c=g=>g.replace(/_/g,"-"),h=(g=>{if(!g)return["other"];if(Array.isArray(g))return g.map(c);if(typeof g=="string"&&g.startsWith("[")&&g.endsWith("]"))try{const m=JSON.parse(g);if(Array.isArray(m))return m.map(c)}catch(m){console.warn("Failed to parse work_type JSON:",g,m)}return typeof g=="string"?[c(g)]:["other"]})(a.work_type);return console.log(" Normalized workTypes:",h),{id:a.id,name:a.name||"",description:a.description||"",workType:h[0],workTypes:h,priority:a.priority,status:a.status,campaignType:a.campaign_type||"",platform:a.platform||[],startDate:a.start_date?new Date(a.start_date).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}):a.created_at?new Date(a.created_at).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}):new Date().toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}),endDate:a.end_date?new Date(a.end_date).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}):"",dueDate:a.due_date?new Date(a.due_date).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}):"",createdAt:a.created_at||new Date().toISOString(),department:a.department||"HN",group:"",shareScope:a.share_scope||"team",createdBy:n?{id:n.id,name:n.name,email:n.email,team_id:n.team_id,location:n.location}:null,assignedTo:i?{id:i.id,name:i.name,email:i.email,team_id:i.team_id,location:i.location}:null}}async getMyTasks(a){try{const n=a?await this.getUserInfo(a):Ge();if(!n)throw new Error("User not found");const i=await this.getTasks();console.log(" getMyTasks - Filtering tasks for user:",{totalTasks:i.length,userId:n.id,userName:n.name,userRole:n.role});const c=this.filterTasksByScope(i,n.id,"my-tasks");return console.log(" ShareScope filtering in getMyTasks:",{totalTasks:i.length,filteredTasks:c.length,userId:n.id,scope:"my-tasks"}),c}catch(n){throw console.error("Error in getMyTasks:",n),n}}async getTeamTasks(a,n){try{const i=Ge(),c=await this.getTasks(),u=this.filterTasksByScope(c,i.id,"team-tasks");return console.log(" ShareScope filtering in getTeamTasks:",{totalTasks:c.length,filteredTasks:u.length,userId:i.id,scope:"team-tasks"}),u}catch(i){throw console.error("Error in getTeamTasks:",i),i}}async getDepartmentTasks(a){try{const n=Ge(),i=await this.getTasks(),c=this.filterTasksByScope(i,n.id,"department-tasks");return console.log(" ShareScope filtering in getDepartmentTasks:",{totalTasks:i.length,filteredTasks:c.length,userId:n.id,scope:"department-tasks"}),c}catch(n){throw console.error("Error in getDepartmentTasks:",n),n}}async getAvailableTeams(){try{const a=Ge();if(Hx().canViewAllTeams){const{data:i,error:c}=await te.from("teams").select("*").order("name");return c?(console.error("Error fetching all teams:",c),[]):i||[]}else{const{data:i,error:c}=await te.from("teams").select("*").eq("id",a.team_id).single();return c?(console.error("Error fetching user team:",c),[]):i?[i]:[]}}catch(a){return console.error("Error in getAvailableTeams:",a),[]}}async mapDbTasksToTasks(a){return!a||a.length===0?[]:await Promise.all(a.map(async i=>{const[c,u]=await Promise.all([this.getUserInfo(i.created_by_id),this.getUserInfo(i.assigned_to_id)]);return this.mapDbTaskToTask(i,c,u)}))}async createScheduledChecklistItem(a){try{const n=localStorage.getItem("currentUserId"),i=localStorage.getItem("currentUserEmail"),c=localStorage.getItem("currentUserName");if(!n||!i)throw new Error("Ngi dng cha ng nhp");console.log(" Current user for checklist scheduling:",{id:n,email:i,name:c});const{data:u,error:h}=await te.from("users").select("team_id, location, department_type").eq("id",n).single();h&&console.warn("  Could not get user details:",h.message),console.log(" User details from database:",u);const{data:g,error:m}=await te.from("tasks").select("name").eq("id",a.parentTaskId).single();m&&console.warn("  Could not get parent task name:",m.message);const x=g?.name||"Unknown Task";console.log(" Parent task name:",x),console.log(" Creating scheduled task for checklist item:",a);const p={name:a.itemTitle,description:`T: ${x}`,scheduled_date:a.scheduledDate,scheduled_time:a.scheduledTime||null,source:"checklist_item",priority:"medium",status:"new-requests",work_type:"other",created_by_id:n,assigned_to_id:n,team_id:u?.team_id||null,department:u?.location||"unknown"};console.log(" Task data before cleaning:",p);const v=this.cleanDateFields(p),{data:j,error:N}=await te.from("tasks").insert([v]).select("*").single();if(N)throw console.error(" Supabase error creating scheduled checklist item:",N),console.error(" Error details:",{code:N.code,message:N.message,details:N.details,hint:N.hint}),new Error(`Khng th to lch: ${N.message}`);return console.log(" Scheduled checklist item created:",j),j}catch(n){throw console.error(" Error creating scheduled checklist item:",n),n}}}const is=new o1;function c1({onClose:l}){const[a,n]=b.useState([]),[i,c]=b.useState([]),[u,h]=b.useState(new Date),[g,m]=b.useState(!1),[x,p]=b.useState(null),[v,j]=b.useState(!1),N=Ge(),S=N?.name==="Khng c Mnh"||N?.email==="manh.khong@company.com",_=[{id:"8h-17h30",label:"8h-17h30",type:"day"},{id:"17h30-10h",label:"17h30-10h",type:"night"},{id:"8h30-18h",label:"8h30-18h",type:"day"},{id:"9h-17h30",label:"9h-17h30",type:"day"}],D=[{key:"monday",label:"Th 2",short:"T2"},{key:"tuesday",label:"Th 3",short:"T3"},{key:"wednesday",label:"Th 4",short:"T4"},{key:"thursday",label:"Th 5",short:"T5"},{key:"friday",label:"Th 6",short:"T6"},{key:"saturday",label:"Th 7",short:"T7"},{key:"sunday",label:"Ch nht",short:"CN"}];b.useEffect(()=>{S&&(M(),E())},[S,u]);const M=async()=>{try{const{data:se,error:oe}=await te.from("users").select("id, name, email, role, location").order("name");if(oe)throw oe;n(se||[]),console.log(" Loaded employees:",se?.length||0)}catch(se){console.error("Error loading employees:",se)}},E=async()=>{try{m(!0);const se=C(u),oe=G(u),{data:L,error:I}=await te.from("schedule_assignments").select("*").gte("date",se.toISOString().split("T")[0]).lte("date",oe.toISOString().split("T")[0]);if(I)throw I;const ae=(L||[]).map(ve=>({id:ve.id,employeeId:ve.employee_id,employeeName:ve.employee_name,date:ve.date,timeSlot:ve.time_slot,location:ve.location}));c(ae),console.log(" Loaded weekly assignments:",ae.length)}catch(se){console.error("Error loading weekly assignments:",se)}finally{m(!1)}},C=se=>{const oe=new Date(se),L=oe.getDay(),I=oe.getDate()-L+(L===0?-6:1);return oe.setDate(I),oe},G=se=>{const oe=C(se);return oe.setDate(oe.getDate()+6),oe},z=se=>{const oe=C(u),L=new Date(oe);return L.setDate(L.getDate()+se),L},H=(se,oe)=>{p(oe),se.dataTransfer.effectAllowed="move",se.dataTransfer.setData("text/plain",oe.id);const L=se.currentTarget.cloneNode(!0);L.style.opacity="0.8",L.style.transform="rotate(5deg)",se.dataTransfer.setDragImage(L,0,0)},O=se=>{se.preventDefault(),se.dataTransfer.dropEffect="move"},X=se=>{se.preventDefault(),se.currentTarget.classList.add("border-blue-400","bg-blue-500/10")},ie=se=>{se.preventDefault(),se.currentTarget.classList.remove("border-blue-400","bg-blue-500/10")},Q=(se,oe,L)=>{if(se.preventDefault(),se.currentTarget.classList.remove("border-blue-400","bg-blue-500/10"),!x)return;const ae=z(oe).toISOString().split("T")[0];if(i.find(W=>W.employeeId===x.id&&W.date===ae&&W.timeSlot===L)){alert("Nhn vin  c phn cng vo ca ny!"),p(null);return}const T=i.find(W=>W.employeeId===x.id&&W.date===ae&&W.timeSlot!==L);if(T)if(window.confirm(`${x.name}  c phn cng ca ${T.timeSlot} trong ngy ny. Bn c mun thay i khng?`))c(re=>re.filter(ue=>ue.id!==T.id));else{p(null);return}const R={id:`temp-${Date.now()}`,employeeId:x.id,employeeName:x.name,date:ae,timeSlot:L,location:x.location};c(W=>[...W,R]),j(!0),p(null),console.log(` Assigned ${x.name} to ${L} on ${ae}`)},J=se=>{c(oe=>oe.filter(L=>L.id!==se)),j(!0)},ne=async()=>{try{m(!0);const se=C(u),oe=G(u);console.log(" Deleting existing assignments for week:",{start:se.toISOString().split("T")[0],end:oe.toISOString().split("T")[0]});const{error:L}=await te.from("schedule_assignments").delete().gte("date",se.toISOString().split("T")[0]).lte("date",oe.toISOString().split("T")[0]);if(L)throw L;const I=i.filter(ae=>!ae.id.startsWith("temp-")).concat(i.filter(ae=>ae.id.startsWith("temp-"))).map(ae=>({employee_id:ae.employeeId,employee_name:ae.employeeName,date:ae.date,time_slot:ae.timeSlot,location:ae.location,created_by:N?.id||"admin"}));if(console.log(" Saving assignments:",I.length),I.length>0){const{data:ae,error:ve}=await te.from("schedule_assignments").insert(I).select();if(ve)throw ve;if(ae){const T=ae.map(R=>({id:R.id,employeeId:R.employee_id,employeeName:R.employee_name,date:R.date,timeSlot:R.time_slot,location:R.location}));c(T)}}else c([]);j(!1),alert(" Lu lch thnh cng!"),console.log(" Schedule saved successfully")}catch(se){console.error(" Error saving schedule:",se),alert(" Li khi lu lch: "+se.message)}finally{m(!1)}},je=()=>{E(),j(!1)};return S?s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg w-full max-w-7xl h-full max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Bt,{className:"w-6 h-6 text-blue-400"}),s.jsx("h2",{className:"text-xl font-semibold text-white",children:"Qun L Lch Showroom"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[v&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:je,className:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:[s.jsx(Mx,{className:"w-4 h-4 inline mr-1"}),"Reset"]}),s.jsxs("button",{onClick:ne,disabled:g,className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700 disabled:opacity-50",children:[s.jsx(Nl,{className:"w-4 h-4 inline mr-1"}),"Lu Lch"]})]}),s.jsx("button",{onClick:l,className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"ng"})]})]}),s.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center justify-center gap-4",children:[s.jsx("button",{onClick:()=>{const se=new Date(u);se.setDate(se.getDate()-7),h(se)},className:"px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700",children:" Tun trc"}),s.jsxs("div",{className:"text-white font-medium",children:["Tun ",C(u).toLocaleDateString("vi-VN")," - ",G(u).toLocaleDateString("vi-VN")]}),s.jsx("button",{onClick:()=>{const se=new Date(u);se.setDate(se.getDate()+7),h(se)},className:"px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Tun sau "})]}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxs("div",{className:"w-64 border-r border-gray-700 p-4",children:[s.jsxs("h3",{className:"text-white font-medium mb-3 flex items-center gap-2",children:[s.jsx(qt,{className:"w-4 h-4"}),"Nhn Vin (",a.length,")"]}),s.jsxs("div",{className:"space-y-2 max-h-full overflow-y-auto",children:[a.map(se=>{const oe=C(u),L=G(u),I=i.filter(ae=>ae.employeeId===se.id&&new Date(ae.date)>=oe&&new Date(ae.date)<=L).length;return s.jsxs("div",{draggable:!0,onDragStart:ae=>H(ae,se),className:"p-2 bg-gray-700 rounded cursor-move hover:bg-gray-600 transition-colors border-l-4 border-blue-500 relative",children:[s.jsx("div",{className:"text-white text-sm font-medium",children:se.name}),s.jsx("div",{className:"text-gray-400 text-xs",children:se.location}),I>0&&s.jsx("div",{className:"absolute top-1 right-1 bg-blue-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:I})]},se.id)}),a.length===0&&s.jsx("div",{className:"text-gray-400 text-sm text-center py-4",children:"ang ti danh sch nhn vin..."})]})]}),s.jsx("div",{className:"flex-1 p-4 overflow-auto",children:s.jsxs("div",{className:"grid grid-cols-8 gap-2 min-w-max",children:[s.jsx("div",{className:"text-gray-400 text-sm font-medium p-2",children:"Ca lm vic"}),D.map((se,oe)=>{const L=z(oe);return s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-white font-medium",children:se.short}),s.jsxs("div",{className:"text-gray-400 text-xs",children:[L.getDate(),"/",L.getMonth()+1]})]},se.key)}),_.map(se=>s.jsxs(Wr.Fragment,{children:[s.jsxs("div",{className:"p-2 bg-gray-700 rounded text-white text-sm font-medium flex items-center",children:[s.jsx(Cl,{className:"w-3 h-3 mr-1"}),se.label]}),D.map((oe,L)=>{const ae=z(L).toISOString().split("T")[0],ve=i.filter(T=>T.date===ae&&T.timeSlot===se.id);return s.jsxs("div",{onDragOver:O,onDragEnter:X,onDragLeave:ie,onDrop:T=>Q(T,L,se.id),className:"min-h-[80px] border-2 border-dashed border-gray-600 rounded p-1 hover:border-blue-400 transition-all duration-200 relative",children:[ve.map(T=>s.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white text-xs p-2 rounded mb-1 relative group shadow-sm hover:shadow-md transition-all",children:[s.jsx("div",{className:"font-medium",children:T.employeeName}),s.jsx("div",{className:"text-blue-200 text-xs",children:T.location}),s.jsx("button",{onClick:()=>J(T.id),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600 flex items-center justify-center",title:"Xa phn cng",children:""})]},T.id)),ve.length===0&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500 text-xs pointer-events-none",children:"Ko nhn vin vo y"})]},`${oe.key}-${se.id}`)})]},se.id))]})})]})]})}):s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ed,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Khng c quyn truy cp"}),s.jsx("p",{className:"text-gray-400 mb-4",children:"Ch Khng c Mnh mi c th qun l lch lm vic."}),s.jsx("button",{onClick:l,className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"ng"})]})})})}function u1(){const[l,a]=b.useState(new Date),[n,i]=b.useState([]),[c,u]=b.useState([]),[h,g]=b.useState(!1),[m,x]=b.useState(new Date),[p,v]=b.useState(null),[j,N]=b.useState(null),S=Ge(),[_,D]=b.useState(null),[M,E]=b.useState([]),C=S?.name==="Khng c Mnh"||S?.email==="manh.khong@company.com",[G,z]=b.useState(!1),[H,O]=b.useState(!1),[X,ie]=b.useState({name:"",description:"",scheduledDate:"",scheduledTime:"",priority:"normal"}),[Q,J]=b.useState(!1),[ne,je]=b.useState(null),[se,oe]=b.useState(!1);console.log(" PlanningTab: Initial state:",{selectedDate:l.toISOString().split("T")[0],currentMonth:m.toISOString().split("T")[0],scheduledTasksCount:n.length}),b.useEffect(()=>{C&&L()},[C]),b.useEffect(()=>{console.log(" PlanningTab: Loading tasks for month:",m.toISOString().split("T")[0]),I()},[m,_]),b.useEffect(()=>{ae()},[l,_]);const L=async()=>{try{const{data:F,error:de}=await te.from("users").select("id, name, email, role, location").order("name");if(de)throw de;E(F||[]),console.log(" Loaded users for admin view:",F?.length||0)}catch(F){console.error("Error loading users:",F)}},I=async()=>{try{g(!0);const F=new Date(m.getFullYear(),m.getMonth(),1),de=new Date(m.getFullYear(),m.getMonth()+1,0),Ee=F.toISOString().split("T")[0],Ce=de.toISOString().split("T")[0];console.log(" PlanningTab: Loading monthly tasks for range:",{month:m.toLocaleDateString("vi-VN",{month:"long",year:"numeric"}),startDate:Ee,endDate:Ce});let Re;C&&_?(Re=await dl.getScheduledTasksInRange(Ee,Ce,_),console.log(` PlanningTab: Loaded tasks for user ${_}:`,Re?.length||0)):C&&!_?(Re=await dl.getScheduledTasksInRange(Ee,Ce),console.log(" PlanningTab: Loaded all tasks for admin:",Re?.length||0)):(Re=await dl.getScheduledTasksInRange(Ee,Ce),console.log(" PlanningTab: Loaded current user tasks:",Re?.length||0)),console.log(" PlanningTab: Loaded monthly tasks:",Re?.length||0),Re&&Re.length>0?console.log(" Monthly tasks:",Re.map(tt=>({name:tt.name,date:tt.scheduled_date,time:tt.scheduled_time}))):console.log(" No monthly tasks found for range:",Ee,"to",Ce),i(Re)}catch(F){console.error(" Error loading monthly tasks:",F),F.message?.includes("Failed to fetch")?(console.error(" Network error - check internet connection"),alert(" Li mng: Khng th ti d liu. Vui lng kim tra kt ni internet v th li.")):(console.error(" API error:",F.message),alert(" Li: "+(F.message||"Khng th ti d liu k hoch"))),i([])}finally{g(!1)}},ae=async()=>{try{const F=l.getFullYear()+"-"+String(l.getMonth()+1).padStart(2,"0")+"-"+String(l.getDate()).padStart(2,"0");console.log(" PlanningTab: Loading daily tasks for local date:",{selectedDate:l.toLocaleDateString("vi-VN"),localDateStr:F,isoWouldBe:l.toISOString().split("T")[0]});const de=await dl.getScheduledTasks(F,_||void 0);console.log(" PlanningTab: Loaded daily tasks for",F,":",de?.length||0),de&&de.length>0&&console.log(" Daily tasks:",de.map(Ee=>({name:Ee.name,time:Ee.scheduled_time,scheduled_date:Ee.scheduled_date}))),u(de)}catch(F){console.error("Error loading daily tasks:",F)}},ve=F=>{const de=F.getFullYear()+"-"+String(F.getMonth()+1).padStart(2,"0")+"-"+String(F.getDate()).padStart(2,"0");console.log(" PlanningTab: Getting tasks for date:",{inputDate:F.toLocaleDateString("vi-VN"),localString:de,tasksToCheck:n.map(Ce=>({name:Ce.name,scheduled_date:Ce.scheduled_date,dateOnly:Ce.scheduled_date?.split("T")[0]}))});const Ee=n.filter(Ce=>{if(!Ce.scheduled_date)return!1;const Re=Ce.scheduled_date.split("T")[0],tt=Re===de;return tt&&console.log(" Task matches date:",{taskName:Ce.name,taskDate:Re,searchDate:de}),tt});return console.log(" Found matching tasks:",Ee.length),Ee},T=F=>{console.log(" handlePlanClick called with plan:",F),je(F),J(!0),v(null),console.log(" Modal state updated - showPlanDetailModal: true")},R=()=>{J(!1),je(null)},W=async F=>{try{const{error:de}=await te.from("scheduled_tasks").update({name:F.name,description:F.description,priority:F.priority,scheduled_time:F.scheduled_time}).eq("id",F.id);if(de)throw de;i(Ee=>Ee.map(Ce=>Ce.id===F.id?{...Ce,...F}:Ce)),u(Ee=>Ee.map(Ce=>Ce.id===F.id?{...Ce,...F}:Ce)),ne&&ne.id===F.id&&je({...ne,...F}),console.log(" K hoch  c cp nht thnh cng")}catch(de){console.error(" Li khi cp nht k hoch:",de),alert("Khng th cp nht k hoch. Vui lng th li.")}},re=async()=>{ne&&confirm(`Bn c chc chn mun xa k hoch "${ne.name}"?`)&&(await Be(ne.id),R())},ue=F=>F?F.slice(0,5):"",me=F=>{const de=new Date;return F.toDateString()===de.toDateString()},pe=F=>{const de=new Date;return de.setHours(0,0,0,0),F<de},mt=async F=>{try{await is.updateTask({id:F,source:"scheduled"}),await I(),await ae(),alert(" Cng vic  c chuyn v danh sch cng vic hm nay!")}catch(de){console.error("Error moving task:",de),alert(" Khng th chuyn cng vic. Vui lng th li.")}},Be=async F=>{if(confirm(" Bn c chc chn mun xa cng vic ny?"))try{N(F),await is.deleteTask(F),await I(),await ae(),v(null),alert(" Cng vic  c xa thnh cng!")}catch(de){console.error(" Error deleting task:",de),alert(" Khng th xa cng vic. Vui lng th li.")}finally{N(null)}},zt=(F,de)=>{de.stopPropagation(),v(p===F?null:F)};b.useEffect(()=>{const F=()=>v(null);return document.addEventListener("click",F),()=>document.removeEventListener("click",F)},[]);const Ja=async()=>{if(!X.name.trim()){alert(" Vui lng nhp tn k hoch!");return}if(!X.scheduledDate){alert(" Vui lng chn ngy thc hin!");return}const F=new Date(X.scheduledDate),de=new Date;if(de.setHours(0,0,0,0),F.setHours(0,0,0,0),F<de){alert(" Khng th to k hoch cho ngy trong qu kh!");return}try{oe(!0);const Ee={name:X.name,description:X.description,priority:X.priority,startDate:X.scheduledDate,dueDate:X.scheduledDate,workType:"other"},Ce=await is.createTask(Ee,S?.id||""),Re=await dl.scheduleTask({taskId:Ce.id,scheduledDate:X.scheduledDate,scheduledTime:X.scheduledTime||void 0});if(Re.success)ie({name:"",description:"",scheduledDate:"",scheduledTime:"",priority:"normal"}),O(!1),await I(),await ae(),alert(` K hoch "${X.name}"  c to thnh cng!`);else throw new Error(Re.error||"Khng th ln lch cho k hoch")}catch(Ee){console.error("Error creating plan:",Ee);const Ce=Ee.message;Ce.includes("Scheduled date cannot be in the past")?alert(" Khng th to k hoch cho ngy trong qu kh. Vui lng chn ngy hm nay hoc ngy trong tng lai."):alert(" Khng th to k hoch: "+Ce)}finally{oe(!1)}},us=()=>{const de=new Date().toISOString().split("T")[0],Ee=l.toISOString().split("T")[0],Ce=Ee!==de;ie(Re=>({...Re,scheduledDate:Ce?Ee:de})),O(!0)};return s.jsxs("div",{className:"h-full bg-gray-900 text-white",children:[s.jsx("div",{className:"p-3 sm:p-6 border-b border-gray-700",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-500/20 rounded-full flex items-center justify-center",children:s.jsx(wg,{className:"w-4 h-4 text-blue-400"})}),s.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-white",children:"K Hoch"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4",children:[C&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qt,{className:"w-4 h-4 text-purple-400"}),s.jsxs("select",{value:_||"",onChange:F=>D(F.target.value||null),className:"bg-gray-800 border border-gray-600 rounded px-2 py-1 text-xs text-white focus:border-purple-400 focus:outline-none",children:[s.jsx("option",{value:"",children:"Tt c nhn vin"}),M.map(F=>s.jsxs("option",{value:F.id,children:[F.name," (",F.location,")"]},F.id))]})]}),s.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[s.jsxs("div",{className:"text-xs sm:text-sm text-gray-400",children:[s.jsxs("span",{className:"hidden sm:inline",children:[n.length," cng vic  ln lch",C&&_&&s.jsxs("span",{className:"text-purple-400 ml-1",children:["(",M.find(F=>F.id===_)?.name,")"]})]}),s.jsxs("span",{className:"sm:hidden",children:[n.length," vic"]})]}),C&&s.jsxs("button",{onClick:()=>z(!0),className:"px-2 sm:px-3 py-1 bg-green-500/20 text-green-400 rounded text-xs hover:bg-green-500/30 transition-colors flex items-center gap-1",children:[s.jsx(g2,{className:"w-3 h-3"}),s.jsx("span",{className:"hidden sm:inline",children:"Lch Showroom"}),s.jsx("span",{className:"sm:hidden",children:"Lch"})]}),s.jsxs("button",{onClick:us,className:"px-2 sm:px-3 py-1 bg-green-500/20 text-green-400 rounded text-xs hover:bg-green-500/30 transition-colors flex items-center gap-1",children:[s.jsx(Ya,{className:"w-3 h-3"}),s.jsx("span",{className:"hidden sm:inline",children:"Thm K Hoch"}),s.jsx("span",{className:"sm:hidden",children:"Thm"})]}),s.jsxs("button",{onClick:()=>{console.log(" Manual refresh triggered"),I(),ae()},className:"px-2 sm:px-3 py-1 bg-blue-500/20 text-blue-400 rounded text-xs hover:bg-blue-500/30 transition-colors",children:[s.jsx("span",{className:"hidden sm:inline",children:" Refresh"}),s.jsx("span",{className:"sm:hidden",children:""})]})]})]})]})}),s.jsxs("div",{className:"flex flex-col lg:flex-row h-full",children:[s.jsx("div",{className:"w-full lg:w-1/2 p-3 sm:p-6 lg:border-r border-gray-700",children:s.jsxs("div",{className:"bg-gray-800/50 rounded-xl sm:rounded-2xl p-3 sm:p-6",children:[s.jsxs("h2",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[s.jsx(Bt,{className:"w-4 sm:w-5 h-4 sm:h-5 text-blue-400"}),s.jsx("span",{className:"hidden sm:inline",children:"Lch Thng"}),s.jsx("span",{className:"sm:hidden",children:"Lch"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:()=>x(new Date(m.getFullYear(),m.getMonth()-1)),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:""}),s.jsx("h3",{className:"text-lg font-medium",children:m.toLocaleDateString("vi-VN",{month:"long",year:"numeric"})}),s.jsx("button",{onClick:()=>x(new Date(m.getFullYear(),m.getMonth()+1)),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:""})]}),s.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["CN","T2","T3","T4","T5","T6","T7"].map(F=>s.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-400",children:F},F)),Array.from({length:42},(F,de)=>{const Ee=new Date(m.getFullYear(),m.getMonth(),1),Ce=new Date(Ee);Ce.setDate(Ce.getDate()-Ee.getDay());const Re=new Date(Ce);Re.setDate(Re.getDate()+de);const tt=Re.getMonth()===m.getMonth(),Wa=Re.toDateString()===l.toDateString(),ba=ve(Re),er=me(Re);return s.jsxs("button",{onClick:()=>a(Re),className:`
                        p-2 text-sm rounded-lg transition-all relative
                        ${Wa?"bg-blue-500 text-white":""}
                        ${er&&!Wa?"bg-green-500/20 text-green-400":""}
                        ${tt?"text-gray-300 hover:bg-gray-700":"text-gray-600"}
                        ${ba.length>0?"font-medium":""}
                      `,children:[Re.getDate(),ba.length>0&&s.jsx("div",{className:"absolute bottom-0 right-0 w-2 h-2 bg-blue-400 rounded-full"})]},de)})]})]})]})}),s.jsx("div",{className:"w-full lg:w-1/2 p-3 sm:p-6",children:s.jsxs("div",{className:"bg-gray-800/50 rounded-xl sm:rounded-2xl p-3 sm:p-6 h-full",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 mb-3 sm:mb-4",children:[s.jsxs("h2",{className:"text-base sm:text-lg font-semibold flex items-center gap-2",children:[s.jsx(vs,{className:"w-4 sm:w-5 h-4 sm:h-5 text-green-400"}),s.jsxs("span",{className:"hidden sm:inline",children:["Cng vic ngy ",l.toLocaleDateString("vi-VN")]}),s.jsx("span",{className:"sm:hidden",children:l.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[me(l)&&s.jsx("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 text-xs rounded-full",children:"Hm nay"}),c.length>0&&s.jsxs("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-full",children:[c.length," vic"]})]})]}),s.jsx("div",{className:"space-y-2 sm:space-y-3 max-h-[400px] sm:max-h-[600px] overflow-y-auto",children:c.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(wg,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-400 mb-2",children:"Khng c cng vic no"}),s.jsx("p",{className:"text-sm text-gray-500",children:me(l)?"Hm nay bn khng c cng vic no c ln lch":"Ngy ny cha c cng vic no c ln lch"})]}):c.map(F=>s.jsx("div",{className:`
                      relative p-3 sm:p-4 rounded-xl border transition-all group cursor-pointer
                      ${pe(l)?"bg-gray-800/40 border-gray-600/50 hover:bg-gray-800/60":"bg-white/5 border-gray-700/50 hover:bg-white/10 hover:border-gray-600"}
                    `,onClick:()=>T(F),children:s.jsx("div",{className:"flex items-start justify-between gap-3",children:s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsx("h3",{className:"font-medium text-white text-sm sm:text-base leading-tight",children:F.name}),s.jsxs("div",{className:"relative flex-shrink-0",children:[s.jsx("button",{onClick:de=>zt(F.id,de),className:"p-1.5 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-lg transition-colors",title:"Ty chn",children:s.jsx(n2,{className:"w-4 h-4"})}),p===F.id&&s.jsxs("div",{className:"absolute right-0 top-8 z-10 w-48 bg-gray-800 border border-gray-700 rounded-lg shadow-xl py-1",onClick:de=>de.stopPropagation(),children:[s.jsxs("button",{onClick:de=>{de.stopPropagation(),T(F)},className:"w-full px-3 py-2 text-left text-sm text-blue-400 hover:bg-gray-700/50 flex items-center gap-2",children:[s.jsx(vs,{className:"w-4 h-4"}),"Xem chi tit"]}),me(l)&&F.source!=="scheduled"&&s.jsxs("button",{onClick:de=>{de.stopPropagation(),mt(F.id)},className:"w-full px-3 py-2 text-left text-sm text-green-400 hover:bg-gray-700/50 flex items-center gap-2",children:[s.jsx(PN,{className:"w-4 h-4"}),"Chuyn v hm nay"]}),s.jsxs("button",{onClick:de=>{de.stopPropagation(),Be(F.id)},disabled:j===F.id,className:"w-full px-3 py-2 text-left text-sm text-red-400 hover:bg-gray-700/50 flex items-center gap-2 disabled:opacity-50",children:[s.jsx(Fa,{className:"w-4 h-4"}),j===F.id?"ang xa...":"Xa k hoch"]})]})]})]}),F.description&&s.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mb-3 line-clamp-2",children:F.description}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[F.scheduled_time&&s.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-700/50 rounded-full",children:[s.jsx(Cl,{className:"w-3 h-3"}),s.jsx("span",{className:"hidden sm:inline",children:ue(F.scheduled_time)}),s.jsxs("span",{className:"sm:hidden",children:[ue(F.scheduled_time).split(":")[0],":",ue(F.scheduled_time).split(":")[1]]})]}),s.jsx("div",{className:`px-2 py-1 rounded-full text-xs ${F.priority==="high"?"bg-red-500/20 text-red-400":F.priority==="normal"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:F.priority==="high"?"Cao":F.priority==="normal"?"TB":"Thp"}),F.source==="scheduled"&&s.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-green-500/20 text-green-400 rounded-full",children:[s.jsx(on,{className:"w-3 h-3"}),s.jsx("span",{className:"hidden sm:inline",children:" chuyn"}),s.jsx("span",{className:"sm:hidden",children:""})]}),F.source==="recurring"&&s.jsxs("div",{className:"px-2 py-1 bg-purple-500/20 text-purple-400 rounded-full",children:[s.jsx("span",{className:"hidden sm:inline",children:"Checklist"}),s.jsx("span",{className:"sm:hidden",children:""})]})]})]})})},F.id))}),c.length>0&&s.jsx("div",{className:"mt-6 pt-4 border-t border-gray-700",children:s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold text-blue-400",children:c.length}),s.jsx("div",{className:"text-xs text-gray-500",children:"Tng s"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold text-green-400",children:c.filter(F=>F.source==="scheduled").length}),s.jsx("div",{className:"text-xs text-gray-500",children:" chuyn"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold text-yellow-400",children:c.filter(F=>F.priority==="high").length}),s.jsx("div",{className:"text-xs text-gray-500",children:"u tin cao"})]})]})})]})})]}),!!H&&s.jsx(Wr.Fragment,{children:s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-gray-800 rounded-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[s.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[s.jsx(Ya,{className:"w-5 h-5 text-green-400"}),"Thm K Hoch Mi"]}),s.jsx("button",{onClick:()=>O(!1),className:"p-1 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(et,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tn k hoch *"}),s.jsx("input",{type:"text",value:X.name,onChange:F=>ie(de=>({...de,name:F.target.value})),placeholder:"Nhp tn k hoch...",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-green-400 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"M t"}),s.jsx("textarea",{value:X.description,onChange:F=>ie(de=>({...de,description:F.target.value})),placeholder:"M t chi tit k hoch...",rows:3,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-green-400 focus:outline-none resize-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ngy thc hin *"}),s.jsx("input",{type:"date",value:X.scheduledDate,onChange:F=>ie(de=>({...de,scheduledDate:F.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-green-400 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Thi gian (ty chn)"}),s.jsx("input",{type:"time",value:X.scheduledTime,onChange:F=>ie(de=>({...de,scheduledTime:F.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-green-400 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Mc  u tin"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:X.priority,onChange:F=>ie(de=>({...de,priority:F.target.value})),className:"w-full pl-10 pr-10 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-green-400 focus:outline-none appearance-none cursor-pointer",children:[s.jsx("option",{value:"low",className:"bg-gray-700 text-green-400",children:" Thp"}),s.jsx("option",{value:"normal",className:"bg-gray-700 text-blue-400",children:" Bnh thng"}),s.jsx("option",{value:"high",className:"bg-gray-700 text-red-400",children:" Cao"})]}),s.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:s.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),s.jsxs("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:[X.priority==="high"&&s.jsx("span",{className:"text-red-400",children:""}),X.priority==="normal"&&s.jsx("span",{className:"text-blue-400",children:""}),X.priority==="low"&&s.jsx("span",{className:"text-green-400",children:""})]})]})]})]}),s.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-gray-700",children:[s.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",children:"Hy"}),s.jsx("button",{onClick:()=>Ja(),disabled:se||!X.name.trim()||!X.scheduledDate,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:se?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"ang to..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ya,{className:"w-4 h-4"}),"To K Hoch"]})})]})]})})}),G&&s.jsx(c1,{onClose:()=>z(!1)}),s.jsx(r1,{isOpen:Q,onClose:R,plan:ne,onUpdate:W,onDelete:re})]})}const d1=({onSetupComplete:l})=>{const[a,n]=b.useState(!1),[i,c]=b.useState(null),u=async()=>{n(!0),c(null);try{console.log(" Bt u to NHM 5...");const{data:g,error:m}=await te.from("teams").upsert([{name:"NHM 5 - Mai Tin t",description:"Nhm kinh doanh H Ni 5"}],{onConflict:"name"}).select().single();if(m)throw new Error(`Li to team: ${m.message}`);const{data:x,error:p}=await te.from("users").upsert([{name:"Mai Tin t",email:"dat.mai@company.com",password:"123456",password_changed:!1,team_id:g.id,location:"H Ni",role:"team_leader",department_type:"Kinh doanh"}],{onConflict:"email"}).select().single();if(p)throw new Error(`Li to user: ${p.message}`);c(` Thnh cng!  to ${g.name} vi trng nhm ${x.name}`),l&&setTimeout(l,1e3)}catch(g){console.error("Error:",g),c(` Li: ${g.message}`)}finally{n(!1)}},h=`-- Script to NHM 5 v Mai Tin t
-- Copy v paste vo Supabase SQL Editor

-- 1. To NHM 5
INSERT INTO teams (name, description, created_at, updated_at)
VALUES (
  'NHM 5 - Mai Tin t',
  'Nhm kinh doanh H Ni 5',
  NOW(),
  NOW()
) ON CONFLICT (name) DO UPDATE SET
  description = EXCLUDED.description,
  updated_at = NOW();

-- 2. Thm Mai Tin t lm trng nhm
INSERT INTO users (
  name, email, password, password_changed,
  team_id, location, role, department_type,
  created_at, updated_at
) VALUES (
  'Mai Tin t',
  'dat.mai@company.com',
  '123456',
  false,
  (SELECT id FROM teams WHERE name = 'NHM 5 - Mai Tin t' LIMIT 1),
  'H Ni',
  'team_leader',
  'Kinh doanh',
  NOW(),
  NOW()
) ON CONFLICT (email) DO UPDATE SET
  name = EXCLUDED.name,
  team_id = EXCLUDED.team_id,
  role = EXCLUDED.role,
  updated_at = NOW();

-- 3. Kim tra kt qu
SELECT t.name as team_name, u.name as leader_name, u.role
FROM teams t
LEFT JOIN users u ON t.id = u.team_id
WHERE t.name = 'NHM 5 - Mai Tin t';`;return s.jsx("div",{className:"bg-yellow-900/20 border border-yellow-600 rounded-lg p-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"w-6 h-6 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-yellow-400 mb-2",children:"Thit lp NHM 5 - Mai Tin t"}),s.jsx("p",{className:"text-yellow-200 mb-4",children:"NHM 5 cha c to trong database. Bn c th to t ng hoc th cng."}),s.jsxs("div",{className:"mb-6",children:[s.jsx("button",{onClick:u,disabled:a,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:a?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"ang to..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),s.jsx("span",{children:"To t ng"})]})}),i&&s.jsx("div",{className:`mt-3 p-3 rounded-lg ${i.includes("")?"bg-green-900/20 border border-green-600 text-green-200":"bg-red-900/20 border border-red-600 text-red-200"}`,children:i})]}),s.jsxs("div",{className:"border-t border-yellow-600 pt-4",children:[s.jsx("h4",{className:"font-semibold text-yellow-300 mb-3",children:"Hoc to th cng:"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-yellow-200 mb-2",children:" Cch 1: Supabase Dashboard"}),s.jsxs("ol",{className:"list-decimal list-inside text-sm text-yellow-100 space-y-1 ml-4",children:[s.jsx("li",{children:"Truy cp Supabase Dashboard ca d n"}),s.jsx("li",{children:"Vo SQL Editor"}),s.jsx("li",{children:"Copy script SQL bn di v chy"}),s.jsx("li",{children:"Refresh trang ny  thy NHM 5"})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-yellow-200 mb-2",children:" Cch 2: Local Database"}),s.jsxs("ol",{className:"list-decimal list-inside text-sm text-yellow-100 space-y-1 ml-4",children:[s.jsx("li",{children:"Khi ng Docker Desktop"}),s.jsxs("li",{children:["Chy: ",s.jsx("code",{className:"bg-gray-800 px-2 py-1 rounded",children:"npm run db:start"})]}),s.jsxs("li",{children:["Chy:"," ",s.jsx("code",{className:"bg-gray-800 px-2 py-1 rounded",children:"node scripts/auto-create-team5.js"})]})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-yellow-200 mb-2",children:" Script SQL:"}),s.jsx("div",{className:"bg-gray-900 rounded-lg p-4 overflow-x-auto",children:s.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:h})}),s.jsx("button",{onClick:()=>navigator.clipboard.writeText(h),className:"mt-2 text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded hover:bg-gray-600 transition-colors",children:" Copy SQL"})]})]})]}),s.jsxs("div",{className:"border-t border-yellow-600 pt-4 mt-4",children:[s.jsx("h4",{className:"font-semibold text-yellow-300 mb-2",children:" Kt qu mong i:"}),s.jsxs("div",{className:"text-sm text-yellow-100 space-y-1",children:[s.jsxs("p",{children:[" ",s.jsx("strong",{children:"NHM 5 - Mai Tin t"})," s xut hin trong danh sch nhm"]}),s.jsx("p",{children:" Mai Tin t c th ng nhp vi:"}),s.jsxs("div",{className:"ml-4 bg-gray-800 p-2 rounded text-gray-300",children:[s.jsx("p",{children:"Email: dat.mai@company.com"}),s.jsx("p",{children:"Mt khu: 123456"})]}),s.jsx("p",{children:' Bn c th qun l nhn vin qua tab "Qun l"'})]})]})]})]})})},h1=({currentUser:l})=>{const[a,n]=b.useState([]),[i,c]=b.useState([]),[u,h]=b.useState(!0),[g,m]=b.useState(!1),[x,p]=b.useState(!1),[v,j]=b.useState({name:"",email:"",role:"employee",team_id:"",location:"H Ni",department_type:"Kinh doanh",password:"123456"}),[N,S]=b.useState({name:"",location:"HN",description:""});b.useEffect(()=>{_()},[]);const _=async()=>{try{h(!0);const[H,O]=await Promise.all([te.from("users").select("*").order("name"),te.from("teams").select("*").order("name")]);if(H.error)throw H.error;if(O.error)throw O.error;n(H.data||[]),c(O.data||[])}catch(H){console.error("Error loading data:",H)}finally{h(!1)}},D=async H=>{H.preventDefault();try{const{error:O}=await te.from("users").insert([{name:v.name,email:v.email,password:v.password,password_changed:!1,role:v.role,team_id:v.team_id||null,location:v.location,department_type:v.department_type}]);if(O)throw O;m(!1),j({name:"",email:"",role:"employee",team_id:"",location:"H Ni",department_type:"Kinh doanh",password:"123456"}),_()}catch(O){console.error("Error adding employee:",O),alert("Li thm nhn vin: "+(O instanceof Error?O.message:"Unknown error"))}},M=async H=>{H.preventDefault();try{const{error:O}=await te.from("teams").insert([{name:N.name,description:N.description}]);if(O)throw O;p(!1),S({name:"",location:"HN",description:""}),_()}catch(O){console.error("Error adding team:",O),alert("Li thm nhm: "+(O instanceof Error?O.message:"Unknown error"))}},E=async H=>{if(confirm("Bn c chc chn mun xa nhn vin ny?"))try{const{error:O}=await te.from("users").delete().eq("id",H);if(O)throw O;_()}catch(O){console.error("Error deleting employee:",O),alert("Li xa nhn vin: "+(O instanceof Error?O.message:"Unknown error"))}},C=async H=>{if(confirm("Bn c chc chn mun xa nhm ny? Cc thnh vin s khng cn nhm."))try{await te.from("users").update({team_id:null}).eq("team_id",H);const{error:O}=await te.from("teams").delete().eq("id",H);if(O)throw O;_()}catch(O){console.error("Error deleting team:",O),alert("Li xa nhm: "+(O instanceof Error?O.message:"Unknown error"))}},G=H=>H?i.find(X=>X.id===H)?.name||"Khng xc nh":"Cha c nhm",z=H=>{switch(H){case"retail_director":return"Gim c";case"team_leader":return"Trng nhm";case"employee":return"Nhn vin";default:return H}};return l?.role!=="retail_director"?s.jsx("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-6",children:s.jsxs("div",{className:"text-center text-gray-400",children:[s.jsx("p",{children:"Bn khng c quyn qun l nhn vin."}),s.jsx("p",{className:"text-sm mt-2",children:"Ch Gim c mi c th thm/xa nhn vin v nhm."})]})}):u?s.jsx("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-6",children:s.jsx("div",{className:"text-center text-gray-400",children:"ang ti..."})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-white",children:"Qun l Nhn vin & Nhm"}),s.jsx("p",{className:"text-gray-400 mt-1",children:"Thm, sa, xa nhn vin v nhm trong h thng"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>p(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:"+ Thm Nhm"}),s.jsx("button",{onClick:()=>m(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"+ Thm Nhn vin"})]})]})}),g&&s.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Thm Nhn vin Mi"}),s.jsxs("form",{onSubmit:D,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tn"}),s.jsx("input",{type:"text",value:v.name,onChange:H=>j({...v,name:H.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:v.email,onChange:H=>j({...v,email:H.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Vai tr"}),s.jsxs("select",{value:v.role,onChange:H=>j({...v,role:H.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[s.jsx("option",{value:"employee",children:"Nhn vin"}),s.jsx("option",{value:"team_leader",children:"Trng nhm"}),s.jsx("option",{value:"retail_director",children:"Gim c"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nhm"}),s.jsxs("select",{value:v.team_id,onChange:H=>j({...v,team_id:H.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[s.jsx("option",{value:"",children:"Cha c nhm"}),i.map(H=>s.jsx("option",{value:H.id,children:H.name},H.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Khu vc"}),s.jsxs("select",{value:v.location,onChange:H=>j({...v,location:H.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[s.jsx("option",{value:"H Ni",children:"H Ni"}),s.jsx("option",{value:"H Ch Minh",children:"H Ch Minh"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Phng ban"}),s.jsx("input",{type:"text",value:v.department_type,onChange:H=>j({...v,department_type:H.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",required:!0})]}),s.jsxs("div",{className:"md:col-span-2 flex space-x-3",children:[s.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Thm Nhn vin"}),s.jsx("button",{type:"button",onClick:()=>m(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Hy"})]})]})]}),x&&s.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Thm Nhm Mi"}),s.jsxs("form",{onSubmit:M,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tn nhm"}),s.jsx("input",{type:"text",value:N.name,onChange:H=>S({...N,name:H.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",placeholder:"VD: NHM 5 - Mai Tin t",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Khu vc"}),s.jsx("div",{className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-gray-400",children:"H Ni (mc nh)"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"M t"}),s.jsx("input",{type:"text",value:N.description,onChange:H=>S({...N,description:H.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",placeholder:"VD: Nhm kinh doanh H Ni 5"})]}),s.jsxs("div",{className:"md:col-span-2 flex space-x-3",children:[s.jsx("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Thm Nhm"}),s.jsx("button",{type:"button",onClick:()=>p(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Hy"})]})]})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[s.jsx("div",{className:"bg-gray-900 px-6 py-4 border-b border-gray-700",children:s.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Danh sch Nhm (",i.length,")"]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-900",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Tn nhm"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Khu vc"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"M t"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Thnh vin"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Thao tc"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-700",children:i.map(H=>{const O=a.filter(X=>X.team_id===H.id);return s.jsxs("tr",{className:"hover:bg-gray-700",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",children:H.name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:"H Ni"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:H.description||"-"}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:[O.length," ngi"]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsx("button",{onClick:()=>C(H.id),className:"text-red-400 hover:text-red-300 transition-colors",children:"Xa"})})]},H.id)})})]})})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[s.jsx("div",{className:"bg-gray-900 px-6 py-4 border-b border-gray-700",children:s.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Danh sch Nhn vin (",a.length,")"]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-900",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Tn"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Vai tr"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Nhm"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Khu vc"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Thao tc"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-700",children:a.map(H=>s.jsxs("tr",{className:"hover:bg-gray-700",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",children:H.name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:H.email}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:z(H.role)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:G(H.team_id)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:H.location}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsx("button",{onClick:()=>E(H.id),className:"text-red-400 hover:text-red-300 transition-colors",disabled:H.id===l?.id,children:H.id===l?.id?"Bn thn":"Xa"})})]},H.id))})]})})]})]})},f1={blue:{bg:"bg-blue-500/20",icon:"text-blue-400",button:"bg-blue-600 hover:bg-blue-700"},green:{bg:"bg-green-500/20",icon:"text-green-400",button:"bg-green-600 hover:bg-green-700"},yellow:{bg:"bg-yellow-500/20",icon:"text-yellow-400",button:"bg-yellow-600 hover:bg-yellow-700"},purple:{bg:"bg-purple-500/20",icon:"text-purple-400",button:"bg-purple-600 hover:bg-purple-700"},indigo:{bg:"bg-indigo-500/20",icon:"text-indigo-400",button:"bg-indigo-600 hover:bg-indigo-700"},red:{bg:"bg-red-500/20",icon:"text-red-400",button:"bg-red-600 hover:bg-red-700"}};function Zt({icon:l,title:a,description:n,buttonText:i,buttonColor:c,onClick:u,fullWidth:h=!1,children:g}){const m=f1[c];return s.jsxs("div",{className:`bg-gray-800 rounded-lg border ${c==="red"?"border-red-700":"border-gray-700"} p-4 md:p-6 hover:bg-gray-700 transition-all ${h?"md:col-span-2":""}`,children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:`w-10 h-10 ${m.bg} rounded-lg flex items-center justify-center mr-3`,children:s.jsx("div",{className:m.icon,children:l})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-lg font-semibold text-white",children:a}),!g&&s.jsx("p",{className:"text-gray-400 text-sm",children:n})]}),g]}),!g&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-gray-400 text-sm mb-4",children:n}),s.jsx("button",{onClick:u,className:`w-full ${m.button} text-white py-2 px-4 rounded-lg transition-colors text-sm font-medium`,children:i})]})]})}function Bx(){const{user:l}=ln(),[a,n]=b.useState([]),[i,c]=b.useState(!0),[,u]=b.useState([]),[h,g]=b.useState("overview"),[m,x]=b.useState(!1);b.useEffect(()=>{p()},[]);const p=async()=>{try{c(!0);const[C,G]=await Promise.all([te.from("users").select("*").order("name"),te.from("teams").select("*").order("id")]);if(C.error)throw C.error;if(G.error)throw G.error;const z=C.data||[],H=G.data||[];u(H);const O=H.some(Q=>Q.name&&Q.name.includes("NHM 5"));x(O);const X=new Map;H.forEach(Q=>{X.set(Q.id.toString(),Q.name)});const ie=z.map(Q=>{const J=se=>{switch(se){case"retail_director":return"Retail Director";case"team_leader":return"Trng nhm";case"employee":return"Nhn vin";default:return se}},ne=se=>se==="0"?"PHNG KINH DOANH":X.get(se)||`Nhm ${se}`,je=(se,oe)=>oe==="0"?"Ton quc":`${ne(oe)} - ${se}`;return{id:Q.id,name:Q.name,email:Q.email,role:J(Q.role),department:je(Q.location,Q.team_id),status:"ang lm vic",joinDate:new Date(Q.created_at).toLocaleDateString("vi-VN"),team_name:ne(Q.team_id)}});n(ie)}catch(C){console.error("Error fetching employees:",C)}finally{c(!1)}},v=()=>{console.log("Thm nhn vin mi")},j=()=>{console.log("Qun l vai tr")},N=()=>{console.log("Qun l phng ban")},S=()=>{console.log("Xem bo co nhn s")},_=()=>{console.log("Qun l ngh php")},D=()=>{console.log("Qun l lng")},M=C=>{switch(C){case"ang lm vic":return"bg-green-500/20 text-green-400";case"Ngh php":return"bg-yellow-500/20 text-yellow-400";case"Ngh vic":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}};if(i)return s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),s.jsx("span",{className:"ml-3 text-gray-400",children:"ang ti d liu nhn s..."})]});const E={total:a.length,directors:a.filter(C=>C.role==="Retail Director").length,teamLeaders:a.filter(C=>C.role==="Trng nhm").length,employees:a.filter(C=>C.role==="Nhn vin").length,hanoi:a.filter(C=>C.department.includes("H Ni")).length,hcm:a.filter(C=>C.department.includes("H Ch Minh")).length};return s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-white",children:"Qun l Nhn s"}),s.jsx("p",{className:"text-gray-400 mt-1",children:"Qun l thng tin nhn vin, vai tr v phng ban"})]}),l?.role==="retail_director"&&s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>g("overview"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${h==="overview"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Tng quan"}),s.jsx("button",{onClick:()=>g("management"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${h==="management"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Qun l"})]})]})}),!m&&l?.role==="retail_director"&&s.jsx(d1,{onSetupComplete:p}),h==="management"&&l?.role==="retail_director"?s.jsx(h1,{currentUser:l}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[s.jsx("div",{className:"text-2xl font-bold text-white",children:E.total}),s.jsx("div",{className:"text-sm text-gray-400",children:"Tng nhn vin"})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-400",children:E.directors}),s.jsx("div",{className:"text-sm text-gray-400",children:"Retail Director"})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[s.jsx("div",{className:"text-2xl font-bold text-green-400",children:E.teamLeaders}),s.jsx("div",{className:"text-sm text-gray-400",children:"Trng nhm"})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-400",children:E.employees}),s.jsx("div",{className:"text-sm text-gray-400",children:"Nhn vin"})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-400",children:E.hanoi}),s.jsx("div",{className:"text-sm text-gray-400",children:"H Ni"})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[s.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:E.hcm}),s.jsx("div",{className:"text-sm text-gray-400",children:"H Ch Minh"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(Zt,{icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),title:"Thm nhn vin",description:"Thm nhn vin mi vo h thng",buttonText:"Thm mi",buttonColor:"blue",onClick:v}),s.jsx(Zt,{icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})}),title:"Qun l vai tr",description:"Phn quyn v qun l vai tr nhn vin",buttonText:"Qun l",buttonColor:"green",onClick:j}),s.jsx(Zt,{icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H3m2 0h3M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),title:"Qun l phng ban",description:"T chc v qun l cc phng ban",buttonText:"Qun l",buttonColor:"purple",onClick:N}),s.jsx(Zt,{icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),title:"Bo co nhn s",description:"Xem bo co v thng k nhn s",buttonText:"Xem bo co",buttonColor:"indigo",onClick:S}),s.jsx(Zt,{icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),title:"Qun l ngh php",description:"Duyt v qun l n ngh php",buttonText:"Qun l",buttonColor:"yellow",onClick:_}),s.jsx(Zt,{icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),title:"Qun l lng",description:"Tnh lng v qun l bng lng",buttonText:"Qun l",buttonColor:"green",onClick:D})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[s.jsx("div",{className:"bg-gray-900 px-6 py-4 border-b border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Danh sch nhn vin"}),s.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Tng cng: ",a.length," nhn vin"]})]}),s.jsxs("button",{onClick:v,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),s.jsx("span",{children:"Thm nhn vin"})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-900",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Tn"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Vai tr"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Phng ban"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Trng thi"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Ngy vo"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Thao tc"})]})}),s.jsx("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:a.map(C=>s.jsxs("tr",{className:"hover:bg-gray-700 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:C.name.split(" ").map(G=>G.charAt(0)).join("").slice(0,2)}),s.jsx("div",{className:"ml-4",children:s.jsx("div",{className:"text-sm font-medium text-white",children:C.name})})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:C.email}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:C.role}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:C.department}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${M(C.status)}`,children:C.status})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:C.joinDate}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[s.jsx("button",{className:"text-blue-400 hover:text-blue-300 mr-3",children:"Sa"}),s.jsx("button",{className:"text-red-400 hover:text-red-300",children:"Xa"})]})]},C.id))})]})})]})]})]})}const qx=({isOpen:l,onClose:a,onSuccess:n})=>{const[i,c]=b.useState(null),[u,h]=b.useState(""),[g,m]=b.useState(!1),[x,p]=b.useState([]),[v,j]=b.useState(!1),N=b.useRef(null);if(!l)return null;const _=(()=>{try{const Q=localStorage.getItem("auth_user");if(Q)return JSON.parse(Q).avatar||null}catch(Q){console.error("Error getting current avatar:",Q)}return null})(),D=()=>{try{const Q=localStorage.getItem("auth_user");if(Q)return JSON.parse(Q).name?.split(" ").map(ne=>ne[0]).join("").toUpperCase().slice(0,2)||"U"}catch(Q){console.error("Error getting user name:",Q)}return"U"},M=Q=>{const J=[];["image/jpeg","image/jpg","image/png","image/gif"].includes(Q.type)||J.push("Ch h tr file JPG, PNG, GIF");const je=5*1024*1024;return Q.size>je&&J.push("Kch thc file khng c vt qu 5MB"),J},E=Q=>{const J=M(Q);if(J.length>0){p(J);return}p([]),c(Q);const ne=new FileReader;ne.onload=je=>{je.target?.result&&h(je.target.result)},ne.readAsDataURL(Q)},C=Q=>{const J=Q.target.files?.[0];J&&E(J)},G=Q=>{Q.preventDefault(),j(!0)},z=Q=>{Q.preventDefault(),j(!1)},H=Q=>{Q.preventDefault(),j(!1);const J=Q.dataTransfer.files[0];J&&E(J)},O=async()=>{if(!i){p(["Vui lng chn nh  upload"]);return}m(!0),p([]);try{await new Promise(Q=>setTimeout(Q,2e3));try{const Q=localStorage.getItem("auth_user");if(Q){const J=JSON.parse(Q);J.avatar=u,localStorage.setItem("auth_user",JSON.stringify(J))}}catch(Q){console.error("Error updating localStorage:",Q)}alert(` i avatar thnh cng!

 Avatar mi  c cp nht v s hin th trn ton b h thng.`),n(),a(),c(null),h("")}catch(Q){console.error("Error uploading avatar:",Q),p(["C li xy ra khi upload avatar. Vui lng th li."])}finally{m(!1)}},X=()=>{c(null),h(""),p([]),N.current&&(N.current.value="")},ie=Q=>{if(Q===0)return"0 Bytes";const J=1024,ne=["Bytes","KB","MB","GB"],je=Math.floor(Math.log(Q)/Math.log(J));return parseFloat((Q/Math.pow(J,je)).toFixed(2))+" "+ne[je]};return kl.createPortal(s.jsx("div",{className:"fixed inset-0 modal-backdrop-enhanced modal-container-responsive",style:{zIndex:1e6},children:s.jsxs("div",{className:"create-task-modal bg-[#1a1f2e] rounded-2xl w-full max-w-md overflow-hidden shadow-2xl border border-gray-700/50 modal-animate-in",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-lg flex items-center justify-center",children:s.jsx(Qa,{className:"w-4 h-4 text-white"})}),s.jsx("h2",{className:"text-xl font-semibold text-white",children:"i avatar"})]}),s.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-colors",children:s.jsx(et,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"create-task-modal-content overflow-y-auto modal-scrollbar",children:s.jsxs("div",{className:"p-6 space-y-6",children:[x.length>0&&s.jsx("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(cn,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-red-400 font-medium mb-2",children:"C li xy ra:"}),s.jsx("ul",{className:"text-red-300 text-sm space-y-1",children:x.map((Q,J)=>s.jsxs("li",{children:[" ",Q]},J))})]})]})}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Avatar hin ti:"}),s.jsx("div",{className:"w-20 h-20 mx-auto mb-4",children:_?s.jsx("img",{src:_,alt:"Current avatar",className:"w-full h-full rounded-full object-cover border-2 border-gray-600"}):s.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-lg font-bold",children:D()})})]}),s.jsx("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${v?"border-blue-500 bg-blue-500/10":"border-gray-600 hover:border-gray-500"}`,onDragOver:G,onDragLeave:z,onDrop:H,children:u?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"w-32 h-32 mx-auto",children:s.jsx("img",{src:u,alt:"Preview",className:"w-full h-full rounded-full object-cover border-2 border-blue-500"})}),i&&s.jsxs("div",{className:"text-gray-400 text-sm",children:[s.jsx("p",{className:"font-medium",children:i.name}),s.jsx("p",{children:ie(i.size)})]}),s.jsxs("button",{type:"button",onClick:X,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:[s.jsx(Mx,{className:"w-4 h-4"}),"Chn nh khc"]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"w-16 h-16 mx-auto bg-gray-700 rounded-full flex items-center justify-center",children:s.jsx(Rx,{className:"w-8 h-8 text-gray-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-medium mb-2",children:"Ko th nh vo y hoc"}),s.jsxs("button",{type:"button",onClick:()=>N.current?.click(),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[s.jsx(Qa,{className:"w-4 h-4"}),"Chn nh"]})]}),s.jsxs("div",{className:"text-gray-400 text-sm",children:[s.jsx("p",{children:"H tr: JPG, PNG, GIF"}),s.jsx("p",{children:"Kch thc ti a: 5MB"}),s.jsx("p",{children:"Khuyn ngh: 200x200px"})]})]})}),s.jsx("input",{ref:N,type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif",onChange:C,className:"hidden"}),s.jsx("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Qa,{className:"w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-blue-300 text-sm",children:[s.jsx("p",{className:"font-medium mb-1",children:"Mo chn nh p:"}),s.jsxs("ul",{className:"space-y-1",children:[s.jsx("li",{children:" Chn nh c khun mt r nt, khng b m"}),s.jsx("li",{children:" nh vung (1:1) s hin th p nht"}),s.jsx("li",{children:" Trnh nh qu ti hoc qu sng"}),s.jsx("li",{children:" Avatar s hin th trn ton b h thng"})]})]})]})}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",disabled:g,children:"Hy"}),s.jsx("button",{type:"button",onClick:O,disabled:g||!i,className:"flex-1 px-4 py-3 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-800 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:g?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"ang upload..."]}):s.jsxs(s.Fragment,{children:[s.jsx(jl,{className:"w-4 h-4"}),"Cp nht avatar"]})})]})]})})]})}),document.body)},zx=({isOpen:l,onClose:a,onSuccess:n})=>{const[i,c]=b.useState(""),[u,h]=b.useState(!1),[g,m]=b.useState([]);if(!l)return null;const p=(()=>{try{const N=localStorage.getItem("auth_user");if(N)return JSON.parse(N).email||"user@example.com"}catch(N){console.error("Error getting current email:",N)}return"user@example.com"})(),v=N=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(N),j=async N=>{if(N.preventDefault(),m([]),!i.trim()){m(["Vui lng nhp email mi"]);return}if(!v(i)){m(["Email khng hp l"]);return}if(i===p){m(["Email mi phi khc email hin ti"]);return}h(!0);try{await new Promise(_=>setTimeout(_,1e3));const S=localStorage.getItem("auth_user");if(S){const _=JSON.parse(S);_.email=i,localStorage.setItem("auth_user",JSON.stringify(_))}alert(` i email thnh cng!

 Email  c cp nht t:
${p}

Thnh:
${i}`),console.log("Email changed successfully"),n(),a()}catch(S){console.error("Error changing email:",S),m(["C li xy ra khi i email. Vui lng th li."])}finally{h(!1)}};return kl.createPortal(s.jsx("div",{className:"fixed inset-0 modal-backdrop-enhanced modal-container-responsive",style:{zIndex:1e6},children:s.jsxs("div",{className:"create-task-modal bg-[#1a1f2e] rounded-2xl w-full max-w-md overflow-hidden shadow-2xl border border-gray-700/50 modal-animate-in",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:s.jsx(Cd,{className:"w-4 h-4 text-white"})}),s.jsx("h2",{className:"text-xl font-semibold text-white",children:"i email"})]}),s.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-colors",children:s.jsx(et,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:j,className:"p-6",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("p",{className:"text-gray-300 mb-2",children:[s.jsx("span",{className:"text-white font-medium",children:"Email hin ti:"}),s.jsx("span",{className:"ml-2 text-blue-400",children:p})]})}),g.length>0&&s.jsx("div",{className:"mb-4 p-3 bg-red-600/20 border border-red-600/50 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[s.jsx(cn,{className:"w-4 h-4 flex-shrink-0"}),s.jsx("div",{className:"text-sm",children:g.map((N,S)=>s.jsx("div",{children:N},S))})]})}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("label",{className:"block text-white font-medium mb-2",children:["Email mi ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("input",{type:"email",value:i,onChange:N=>c(N.target.value),placeholder:"Nhp email mi",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:u})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",disabled:u,children:"Hy"}),s.jsx("button",{type:"submit",disabled:u||!i.trim(),className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:u?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"ang cp nht..."]}):s.jsxs(s.Fragment,{children:[s.jsx(on,{className:"w-4 h-4"}),"i email"]})})]})]})]})}),document.body)},$x=({isOpen:l,onClose:a,onSuccess:n})=>{const[i,c]=b.useState(""),[u,h]=b.useState(""),[g,m]=b.useState(!1),[x,p]=b.useState(!1),[v,j]=b.useState([]);if(!l)return null;const N=async S=>{if(S.preventDefault(),j([]),!i.trim()){j(["Vui lng nhp mt khu mi"]);return}if(i!==u){j(["Mt khu xc nhn khng khp"]);return}if(i.length<6){j(["Mt khu phi c t nht 6 k t"]);return}p(!0);try{await new Promise(_=>setTimeout(_,1e3)),alert(` i mt khu thnh cng!

 Mt khu  c cp nht.`),console.log("Password changed successfully"),n(),a(),c(""),h("")}catch(_){console.error("Error changing password:",_),j(["C li xy ra khi i mt khu. Vui lng th li."])}finally{p(!1)}};return kl.createPortal(s.jsx("div",{className:"fixed inset-0 modal-backdrop-enhanced modal-container-responsive",style:{zIndex:1e6},children:s.jsxs("div",{className:"create-task-modal bg-[#1a1f2e] rounded-2xl w-full max-w-md overflow-hidden shadow-2xl border border-gray-700/50 modal-animate-in",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:s.jsx(Dl,{className:"w-4 h-4 text-white"})}),s.jsx("h2",{className:"text-xl font-semibold text-white",children:"i mt khu"})]}),s.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-colors",children:s.jsx(et,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:N,className:"p-6",children:[v.length>0&&s.jsx("div",{className:"mb-4 p-3 bg-red-600/20 border border-red-600/50 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[s.jsx(cn,{className:"w-4 h-4 flex-shrink-0"}),s.jsx("div",{className:"text-sm",children:v.map((S,_)=>s.jsx("div",{children:S},_))})]})}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-white font-medium mb-2",children:["Mt khu mi ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:g?"text":"password",value:i,onChange:S=>c(S.target.value),placeholder:"Nhp mt khu mi",className:"w-full px-4 py-3 pr-12 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:x}),s.jsx("button",{type:"button",onClick:()=>m(!g),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:g?s.jsx(i2,{className:"w-5 h-5"}):s.jsx(Ed,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("label",{className:"block text-white font-medium mb-2",children:["Xc nhn mt khu ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("input",{type:"password",value:u,onChange:S=>h(S.target.value),placeholder:"Nhp li mt khu mi",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:x})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",disabled:x,children:"Hy"}),s.jsx("button",{type:"submit",disabled:x||!i.trim()||!u.trim(),className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:x?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"ang cp nht..."]}):s.jsxs(s.Fragment,{children:[s.jsx(on,{className:"w-4 h-4"}),"i mt khu"]})})]})]})]})}),document.body)},m1=({isOpen:l,onClose:a,onLogout:n,onNavigate:i})=>{const[c,u]=b.useState("main"),[h,g]=b.useState(!1),[m,x]=b.useState(!1),[p,v]=b.useState(!1),[j,N]=b.useState(!1);b.useEffect(()=>{l&&g(!0)},[l]);const _=(()=>{try{const O=localStorage.getItem("auth_user");return O?JSON.parse(O):Ge()}catch(O){return console.error(" Error getting current user in ProfileModal:",O),{name:"Test User",email:"test@example.com",role:"employee",location:"H Ni"}}})();if(console.log(" ProfileModal isOpen:",l,"user:",_.name),console.log(" Modal states:",{showChangePasswordModal:j,showChangeEmailModal:p,showChangeAvatarModal:m}),!l)return null;const D=O=>{switch(O){case"retail_director":return"Gim c";case"team_leader":return"Trng nhm";case"employee":return"Nhn vin";default:return"Ngi dng"}},M=O=>O.split(" ").map(X=>X.charAt(0)).join("").toUpperCase().slice(0,2),E=O=>{i(O),a()},C=()=>{n(),a()},G=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-gray-700 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:M(_.name)}),s.jsx("button",{onClick:()=>x(!0),className:"absolute -bottom-1 -right-1 w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center hover:bg-blue-700 transition-colors hover:scale-110",title:"i avatar",children:s.jsx(Qa,{className:"w-3 h-3 text-white"})})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-white font-semibold text-lg",children:_.name}),s.jsx("p",{className:"text-gray-400 text-sm",children:_.email}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("span",{className:"px-2 py-1 bg-blue-600/20 text-blue-400 rounded-full text-xs font-medium",children:D(_.role)}),s.jsx("span",{className:"px-2 py-1 bg-green-600/20 text-green-400 rounded-full text-xs font-medium",children:_.location})]})]})]})}),s.jsxs("div",{className:"space-y-2",children:[(_.role==="retail_director"||_.role==="team_leader")&&s.jsxs("button",{onClick:()=>E("hr"),className:"w-full flex items-center justify-between p-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(qt,{className:"w-5 h-5 text-green-400"}),s.jsx("span",{className:"text-white font-medium",children:"Qun l Nhn vin"})]}),s.jsx(Jr,{className:"w-4 h-4 text-gray-400"})]}),s.jsxs("button",{onClick:()=>u("settings"),className:"w-full flex items-center justify-between p-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(U2,{className:"w-5 h-5 text-gray-400"}),s.jsx("span",{className:"text-white font-medium",children:"Ci t"})]}),s.jsx(Jr,{className:"w-4 h-4 text-gray-400"})]}),s.jsxs("button",{onClick:C,className:"w-full flex items-center gap-3 p-3 bg-red-600/20 hover:bg-red-600/30 rounded-lg transition-colors",children:[s.jsx(Ax,{className:"w-5 h-5 text-red-400"}),s.jsx("span",{className:"text-red-400 font-medium",children:"ng xut"})]})]})]}),z=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("button",{onClick:()=>u("main"),className:"flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors",children:[s.jsx(Jr,{className:"w-4 h-4 rotate-180"}),s.jsx("span",{children:"Quay li"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>{console.log(" Change password button clicked"),N(!0)},className:"w-full flex items-center gap-3 p-3 bg-gray-700 hover:bg-gray-600 active:bg-gray-500 rounded-lg transition-colors touch-manipulation",children:[s.jsx(Dl,{className:"w-5 h-5 text-yellow-400"}),s.jsx("span",{className:"text-white",children:"i mt khu"})]}),s.jsxs("button",{onClick:()=>{console.log(" Change email button clicked"),v(!0)},className:"w-full flex items-center gap-3 p-3 bg-gray-700 hover:bg-gray-600 active:bg-gray-500 rounded-lg transition-colors touch-manipulation",children:[s.jsx(Cd,{className:"w-5 h-5 text-blue-400"}),s.jsx("span",{className:"text-white",children:"i email"})]}),s.jsxs("button",{onClick:()=>{console.log(" Change avatar button clicked"),x(!0)},className:"w-full flex items-center gap-3 p-3 bg-gray-700 hover:bg-gray-600 active:bg-gray-500 rounded-lg transition-colors touch-manipulation",children:[s.jsx(Qa,{className:"w-5 h-5 text-purple-400"}),s.jsx("span",{className:"text-white",children:"i avatar"})]}),s.jsxs("button",{onClick:()=>{alert(`Thng tin c nhn bao gm:

 H v tn
 Email
 S in thoi
 a ch
 Ngy sinh
 Gii tnh
 Phng ban
 Chc v
 Ngy vo lm
 Trng thi lm vic`)},className:"w-full flex items-center gap-3 p-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:[s.jsx($s,{className:"w-5 h-5 text-green-400"}),s.jsx("span",{className:"text-white",children:"Thng tin c nhn"})]})]})]}),H=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("button",{onClick:()=>u("main"),className:"flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors",children:[s.jsx(Jr,{className:"w-4 h-4 rotate-180"}),s.jsx("span",{children:"Quay li"})]}),s.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[s.jsx("h3",{className:"text-white font-semibold mb-2",children:"Qun l Nhn vin"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Chc nng ny cho php bn qun l thng tin nhn vin, phn quyn v theo di hiu sut lm vic."})]}),s.jsxs("button",{onClick:()=>E("hr"),className:"w-full flex items-center justify-between p-3 bg-green-600/20 hover:bg-green-600/30 rounded-lg transition-colors border border-green-500/30",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(qt,{className:"w-5 h-5 text-green-400"}),s.jsx("span",{className:"text-white font-medium",children:"M trang Qun l Nhn vin"})]}),s.jsx(Jr,{className:"w-4 h-4 text-gray-400"})]})]});return kl.createPortal(s.jsxs("div",{className:"profile-modal-container md:hidden",style:{zIndex:999999},children:[s.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:a,style:{zIndex:999998}}),s.jsxs("div",{className:`profile-modal-content bg-gray-800/95 backdrop-blur-xl rounded-2xl overflow-hidden shadow-2xl border border-gray-600/50 transform transition-all duration-300 ease-out ${h?"scale-100 opacity-100":"scale-95 opacity-0"}`,style:{zIndex:999999},children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-600/50",children:[s.jsx("h2",{className:"text-xl font-semibold text-white",children:c==="main"?"Ti khon":c==="settings"?"Ci t":"Qun l Nhn vin"}),s.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-700/50 rounded-xl transition-all duration-200 hover:scale-110",children:s.jsx(et,{className:"w-5 h-5 text-gray-400 hover:text-white transition-colors"})})]}),s.jsxs("div",{className:"p-6 pb-8 overflow-y-auto max-h-[calc(75vh-120px)]",children:[c==="main"&&G(),c==="settings"&&z(),c==="hr"&&H()]})]}),s.jsx(qx,{isOpen:m,onClose:()=>x(!1),onSuccess:()=>{x(!1)}}),s.jsx(zx,{isOpen:p,onClose:()=>v(!1),onSuccess:()=>{v(!1)}}),s.jsx($x,{isOpen:j,onClose:()=>N(!1),onSuccess:()=>{N(!1)}})]}),document.body)};function g1({activeTab:l,onTabChange:a,isModalOpen:n=!1,onLogout:i}){const[c,u]=b.useState(!0),[h,g]=b.useState(0),[m,x]=b.useState("up"),[p,v]=b.useState(!1),j=b.useRef(null),N=b.useRef(null);b.useEffect(()=>{const M=()=>{const E=window.scrollY,C=Math.abs(E-h);if(document.documentElement.scrollHeight,C>3){const G=E>h?"down":"up";x(G),g(E),j.current&&clearTimeout(j.current),N.current&&clearTimeout(N.current),G==="down"?u(!1):G==="up"&&u(!0),N.current=setTimeout(()=>{u(!0)},1500)}};return window.addEventListener("scroll",M,{passive:!0}),()=>{window.removeEventListener("scroll",M),j.current&&clearTimeout(j.current),N.current&&clearTimeout(N.current)}},[h]),b.useEffect(()=>{n||p?u(!1):(m==="up"||h===0)&&u(!0)},[n,p,m,h]),b.useEffect(()=>{u(!0),j.current&&clearTimeout(j.current),N.current&&clearTimeout(N.current)},[l]);const S=(()=>{try{return Ge()}catch(M){return console.error(" MobileDock: Error getting current user:",M),{id:"unknown",name:"Unknown User",email:"unknown@email.com",team_id:"0",location:"H Ni",role:"employee",team:{id:"0",name:"Unknown Team",location:"HN"}}}})(),_=M=>M.split(" ").map(E=>E.charAt(0)).join("").toUpperCase().slice(0,2),D=[{id:"home",label:"Trang Ch",icon:Dx,color:"text-blue-400",activeColor:"text-blue-500"},{id:"work",label:"Cng Vic",icon:Ex,color:"text-green-400",activeColor:"text-green-500"},{id:"plan",label:"K Hoch",icon:Bt,color:"text-purple-400",activeColor:"text-purple-500"},{id:"customers",label:"Khch Hng",icon:qt,color:"text-orange-400",activeColor:"text-orange-500"},{id:"profile",label:"Ti khon",icon:$s,color:"text-purple-400",activeColor:"text-purple-500",isProfile:!0}];return s.jsxs("div",{className:`lg:hidden fixed bottom-0 left-0 right-0 z-40 transition-all duration-300 ease-in-out ${c?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,style:{pointerEvents:c?"auto":"none"},children:[s.jsx("div",{className:"mx-3 mb-1",children:s.jsx("div",{className:"bg-gray-800/90 backdrop-blur-xl border border-gray-600/30 rounded-xl shadow-2xl",children:s.jsx("div",{className:"flex items-center justify-around px-1 py-1",children:D.map(M=>{const E=l===M.id,C=M.icon;return s.jsxs("button",{onClick:()=>M.isProfile?v(!0):a(M.id),className:`
                  flex flex-col items-center justify-center p-1 rounded-lg min-w-[40px] min-h-[40px]
                  transition-all duration-300 ease-out transform
                  ${E?"bg-white/15 scale-105 shadow-lg shadow-black/20":"hover:bg-white/8 hover:scale-102 active:scale-95"}
                `,children:[s.jsxs("div",{className:`
                  relative mb-0.5 transition-all duration-300
                  ${E?"scale-105":"group-hover:scale-102"}
                `,children:[M.isProfile?s.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-xs",children:_(S.name)}):s.jsx(C,{className:`
                        w-4 h-4 transition-all duration-300
                        ${E?`${M.activeColor} drop-shadow-lg`:`${M.color} group-hover:text-white`}
                      `,strokeWidth:E?2.5:2}),E&&s.jsx("div",{className:"absolute -top-0.5 -right-0.5 w-1.5 h-1.5 bg-gradient-to-r from-blue-400 to-blue-600 rounded-full animate-pulse shadow-lg"})]}),s.jsx("span",{className:`
                  text-xs font-medium transition-all duration-300
                  ${E?"text-white scale-102 font-semibold":"text-gray-400 group-hover:text-gray-200"}
                `,children:M.label})]},M.id)})})})}),s.jsx("div",{className:"h-safe"}),s.jsx(m1,{isOpen:p,onClose:()=>v(!1),onLogout:i||(()=>{}),onNavigate:a})]})}function x1({onLogout:l}){const[a,n]=b.useState("account"),i=()=>{console.log("Chnh sa thng tin ti khon")},c=()=>{console.log("i email")},u=()=>{console.log("i mt khu")},h=()=>{console.log("i avatar")},g=()=>{console.log("i nh ba")},m=()=>{switch(a){case"account":return s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[s.jsx(Zt,{icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),title:"Thng tin ti khon",description:"Qun l thng tin c nhn v ti khon ca bn",buttonText:"Chnh sa thng tin",buttonColor:"blue",onClick:i}),s.jsx(Zt,{icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),title:"i Email",description:"Cp nht a ch email ca ti khon",buttonText:"Thay i email",buttonColor:"green",onClick:c}),s.jsx(Zt,{icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),title:"i mt khu",description:"Cp nht mt khu  bo mt ti khon",buttonText:"i mt khu",buttonColor:"yellow",onClick:u}),s.jsx(Zt,{icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),title:"i Avatar",description:"Thay i nh i din ca bn",buttonText:"Ti nh ln",buttonColor:"purple",onClick:h}),s.jsx(Zt,{icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 0h10a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"})}),title:"i nh ba",description:"Cp nht nh ba cho h s ca bn",buttonText:"Thay i nh ba",buttonColor:"indigo",onClick:g}),s.jsx(Zt,{icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),title:"ng xut",description:"Thot khi ti khon hin ti",buttonText:"ng xut",buttonColor:"red",fullWidth:!0,children:s.jsx("button",{onClick:l,className:"bg-red-600 text-white py-2 px-6 rounded-lg hover:bg-red-700 transition-colors text-sm font-medium ml-4",children:"ng xut"})})]});case"hr":return s.jsx(Bx,{});default:return null}};return s.jsx("div",{className:"py-6 md:py-8",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-4 md:px-0",children:[s.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white mb-6 md:mb-8",children:"Ci t"}),s.jsxs("div",{className:"flex space-x-1 bg-gray-800 p-1 rounded-lg mb-8",children:[s.jsxs("button",{onClick:()=>n("account"),className:`px-6 py-3 rounded-md text-sm font-medium transition-colors flex items-center space-x-2 ${a==="account"?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),s.jsx("span",{children:"Ti khon"})]}),s.jsxs("button",{onClick:()=>n("hr"),className:`px-6 py-3 rounded-md text-sm font-medium transition-colors flex items-center space-x-2 ${a==="hr"?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),s.jsx("span",{children:"Nhn s"})]})]}),s.jsx("div",{className:"mt-8",children:m()})]})})}class p1{async getAllEmployees(){try{const{data:a,error:n}=await te.from("users").select(`
          id,
          name,
          email,
          role,
          team_id,
          location,
          department_type,
          team:teams(id, name)
        `).order("name");return n?(console.error("Error fetching employees:",n),[]):a||[]}catch(a){return console.error("Error in getAllEmployees:",a),[]}}async getAssignableEmployees(a,n,i){try{const c=await this.getAllEmployees();return n==="retail_director"?c.filter(u=>u.id!==a):n==="team_leader"?c.filter(u=>u.role==="employee"&&u.location===i&&u.id!==a):[]}catch(c){return console.error("Error in getAssignableEmployees:",c),[]}}async getTaggableEmployees(a,n){try{return(await this.getAllEmployees()).filter(c=>!(c.id===a||n&&c.location!==n)).map(c=>({id:c.id,name:c.name,email:c.email,role:this.getRoleDisplay(c.role),location:c.location,team_name:Array.isArray(c.team)?c.team[0]?.name:c.team?.name||"Khng c nhm"}))}catch(i){return console.error("Error in getTaggableEmployees:",i),[]}}async getEmployeesByLocation(a){try{const{data:n,error:i}=await te.from("users").select(`
          id,
          name,
          email,
          role,
          team_id,
          location,
          department_type,
          team:teams(id, name)
        `).eq("location",a).order("name");return i?(console.error("Error fetching employees by location:",i),[]):n||[]}catch(n){return console.error("Error in getEmployeesByLocation:",n),[]}}async getEmployeesByTeam(a){try{const{data:n,error:i}=await te.from("users").select(`
          id,
          name,
          email,
          role,
          team_id,
          location,
          department_type,
          team:teams(id, name)
        `).eq("team_id",a).order("name");return i?(console.error("Error fetching employees by team:",i),[]):n||[]}catch(n){return console.error("Error in getEmployeesByTeam:",n),[]}}async getEmployeeById(a){try{const{data:n,error:i}=await te.from("users").select(`
          id,
          name,
          email,
          role,
          team_id,
          location,
          department_type,
          team:teams(id, name)
        `).eq("id",a).single();return i||!n?null:n}catch(n){return console.error("Error in getEmployeeById:",n),null}}getRoleDisplay(a){switch(a){case"retail_director":return"Gim c";case"team_leader":return"Trng nhm";case"employee":return"Nhn vin";default:return a}}async searchEmployees(a,n,i){try{const c=await this.getTaggableEmployees(n,i);if(!a.trim())return c.slice(0,8);const u=a.toLowerCase();return c.filter(h=>h.name.toLowerCase().includes(u)||h.email.toLowerCase().includes(u)).slice(0,8)}catch(c){return console.error("Error in searchEmployees:",c),[]}}async getCurrentEmployee(){try{const a=localStorage.getItem("auth_user");if(!a)return null;const n=JSON.parse(a);return await this.getEmployeeById(n.id)}catch(a){return console.error("Error in getCurrentEmployee:",a),null}}}const Px=new p1,Eg=({value:l,onChange:a,placeholder:n="Chn ngy",label:i,required:c=!1,minDate:u})=>{const[h,g]=b.useState(!1),[m,x]=b.useState(new Date),[p,v]=b.useState(l?new Date(l):null),j=b.useRef(null);b.useEffect(()=>{const O=X=>{j.current&&!j.current.contains(X.target)&&g(!1)};return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[]);const N=O=>O?O.toLocaleDateString("vi-VN",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"",S=O=>O.toISOString().split("T")[0],_=O=>{const X=O.getFullYear(),ie=O.getMonth(),Q=new Date(X,ie,1),ne=new Date(X,ie+1,0).getDate(),je=Q.getDay(),se=[];for(let oe=0;oe<je;oe++)se.push(null);for(let oe=1;oe<=ne;oe++)se.push(new Date(X,ie,oe));return se},D=O=>{v(O),a(S(O)),g(!1)},M=O=>{x(X=>{const ie=new Date(X);return O==="prev"?ie.setMonth(X.getMonth()-1):ie.setMonth(X.getMonth()+1),ie})},E=O=>{if(!u)return!1;const X=new Date(u).getTime();return O.getTime()<X},C=O=>{const X=new Date;return O.toDateString()===X.toDateString()},G=O=>p?O.toDateString()===p.toDateString():!1,z=_(m),H=["CN","T2","T3","T4","T5","T6","T7"];return s.jsxs("div",{className:"relative",ref:j,children:[i&&s.jsxs("label",{className:"block text-white font-medium mb-2",children:[i," ",c&&s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("div",{onClick:()=>g(!h),className:"w-full p-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white cursor-pointer hover:border-gray-500 transition-colors relative",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:p?"text-white":"text-gray-400",children:p?N(p):n}),s.jsx(Bt,{className:"w-5 h-5 text-gray-400"})]})}),h&&s.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-600 rounded-xl shadow-2xl z-50 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[s.jsx("button",{onClick:()=>M("prev"),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(ZN,{className:"w-5 h-5 text-gray-400"})}),s.jsx("h3",{className:"text-white font-semibold",children:m.toLocaleDateString("vi-VN",{month:"long",year:"numeric"})}),s.jsx("button",{onClick:()=>M("next"),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(Jr,{className:"w-5 h-5 text-gray-400"})})]}),s.jsx("div",{className:"grid grid-cols-7 border-b border-gray-700",children:H.map(O=>s.jsx("div",{className:"p-3 text-center text-gray-400 text-sm font-medium",children:O},O))}),s.jsx("div",{className:"grid grid-cols-7 p-2",children:z.map((O,X)=>s.jsx("div",{className:"aspect-square p-1",children:O&&s.jsx("button",{onClick:()=>D(O),disabled:E(O),className:`
                      w-full h-full rounded-lg text-sm font-medium transition-all duration-200
                      ${G(O)?"bg-blue-500 text-white shadow-lg scale-105":C(O)?"bg-blue-500/20 text-blue-400 border border-blue-500/30":E(O)?"text-gray-600 cursor-not-allowed":"text-gray-300 hover:bg-gray-700 hover:text-white"}
                    `,children:O.getDate()})},X))}),s.jsxs("div",{className:"p-3 border-t border-gray-700 flex gap-2",children:[s.jsx("button",{onClick:()=>D(new Date),className:"px-3 py-2 text-sm bg-gray-700 hover:bg-gray-600 text-gray-300 rounded-lg transition-colors",children:"Hm nay"}),s.jsx("button",{onClick:()=>{const O=new Date;O.setDate(O.getDate()+1),D(O)},className:"px-3 py-2 text-sm bg-gray-700 hover:bg-gray-600 text-gray-300 rounded-lg transition-colors",children:"Ngy mai"})]})]})]})},Xu=({value:l,onChange:a,options:n,placeholder:i="Chn...",label:c,required:u=!1})=>{const[h,g]=b.useState(!1),m=b.useRef(null);b.useEffect(()=>{const v=j=>{m.current&&!m.current.contains(j.target)&&g(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const x=n.find(v=>v.value===l),p=v=>{a(v),g(!1)};return s.jsxs("div",{className:"relative",ref:m,children:[c&&s.jsxs("label",{className:"block text-white font-medium mb-2",children:[c," ",u&&s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("button",{type:"button",onClick:()=>g(!h),className:"w-full p-3 bg-gray-800/50 border border-gray-600 rounded-lg text-left hover:border-gray-500 transition-colors focus:border-blue-500 focus:outline-none",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-2",children:x?s.jsxs(s.Fragment,{children:[x.color&&s.jsx("div",{className:`w-3 h-3 rounded-full ${x.color}`}),x.icon&&s.jsx(x.icon,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-white",children:x.label})]}):s.jsx("span",{className:"text-gray-400",children:i})}),s.jsx(Ks,{className:`w-5 h-5 text-gray-400 transition-transform duration-200 ${h?"rotate-180":""}`})]})}),h&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-600 rounded-lg shadow-2xl z-50 overflow-hidden",children:s.jsx("div",{className:"py-2 max-h-60 overflow-y-auto modal-scrollbar",children:n.map(v=>s.jsxs("button",{onClick:()=>p(v.value),className:`
                  w-full px-4 py-3 text-left hover:bg-gray-700 transition-colors flex items-center gap-3
                  ${l===v.value?"bg-gray-700":""}
                `,children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[v.color&&s.jsx("div",{className:`w-3 h-3 rounded-full ${v.color}`}),v.icon&&s.jsx(v.icon,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-white",children:v.label})]}),l===v.value&&s.jsx(jl,{className:"w-4 h-4 text-blue-400"})]},v.value))})})]})},y1=({value:l,onChange:a,label:n="Phm vi chia s",required:i=!1})=>{const[c,u]=b.useState(!1),h=b.useRef(null),g=[{value:"public",label:"Chung",description:"Mi ngi trong cng ty c th xem",icon:Cx,color:"text-green-400"},{value:"team",label:"Nhm",description:"Ch thnh vin trong nhm c th xem",icon:qt,color:"text-blue-400"},{value:"private",label:"Ti",description:"Ch mnh ti c th xem",icon:Dl,color:"text-gray-400"}];b.useEffect(()=>{const p=v=>{h.current&&!h.current.contains(v.target)&&u(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const m=g.find(p=>p.value===l),x=p=>{a(p),u(!1)};return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"block text-white font-medium",children:[n," ",i&&s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsxs("div",{ref:h,className:"relative",children:[s.jsx("button",{type:"button",onClick:()=>u(!c),className:"w-full p-3 bg-gray-800/50 border border-gray-600 rounded-lg hover:border-gray-500 transition-colors focus:border-blue-500 focus:outline-none",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-3",children:m&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`w-5 h-5 ${m.color}`,children:s.jsx(m.icon,{className:"w-full h-full"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"text-white font-medium text-sm",children:m.label}),s.jsx("div",{className:"text-gray-400 text-xs",children:m.description})]})]})}),s.jsx(Ks,{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${c?"rotate-180":""}`})]})}),c&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-600 rounded-lg shadow-2xl z-50 overflow-hidden",children:s.jsx("div",{className:"py-2",children:g.map(p=>s.jsxs("button",{onClick:()=>x(p.value),className:`
                    w-full px-4 py-3 text-left hover:bg-gray-700 transition-colors flex items-center gap-3
                    ${l===p.value?"bg-gray-700/50":""}
                  `,children:[s.jsx("div",{className:`w-5 h-5 ${p.color} flex-shrink-0`,children:s.jsx(p.icon,{className:"w-full h-full"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-white font-medium text-sm",children:p.label}),s.jsx("div",{className:"text-gray-400 text-xs mt-0.5",children:p.description})]}),l===p.value&&s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"})]},p.value))})})]}),s.jsxs("div",{className:"text-gray-400 text-sm",children:[m?.value==="public"&&"Tt c nhn vin trong cng ty c th xem cng vic ny",m?.value==="team"&&"Ch thnh vin trong nhm ca bn c th xem",m?.value==="private"&&"Ch bn c th xem cng vic ny"]})]})},v1=({label:l,value:a,onChange:n,placeholder:i="Nhp tn  tag ngi dng...",required:c=!1,currentUserId:u,currentUserLocation:h})=>{const[g,m]=b.useState(!1),[x,p]=b.useState(""),[v,j]=b.useState([]),[N,S]=b.useState(!1),_=b.useRef(null),D=b.useRef(null);b.useEffect(()=>{(async()=>{if(u){S(!0);try{const ie=(await Px.searchEmployees(x,u,h)).filter(Q=>!a.some(J=>J.id===Q.id));j(ie)}catch(X){console.error("Error searching employees:",X),j([])}finally{S(!1)}}})()},[x,a,u,h]),b.useEffect(()=>{const O=X=>{D.current&&!D.current.contains(X.target)&&(m(!1),p(""))};return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[]);const M=O=>O.split(" ").map(X=>X[0]).join("").toUpperCase().slice(0,2),E=O=>{n([...a,O]),p(""),m(!1),setTimeout(()=>{_.current?.focus()},100)},C=O=>{n(a.filter(X=>X.id!==O))},G=O=>{const X=O.target.value;p(X),m(X.length>0)},z=()=>{x.length>0&&m(!0)},H=O=>{O.key==="Escape"&&(m(!1),p(""))};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"block text-white font-medium text-sm",children:[l," ",c&&s.jsx("span",{className:"text-red-400",children:"*"})]}),a.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 p-2 bg-gray-700/20 rounded-lg border border-gray-600/30",children:a.map(O=>s.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-blue-600/20 border border-blue-500/30 rounded-full text-sm font-medium text-blue-300 hover:bg-blue-600/30 transition-colors group",children:[s.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-xs font-bold flex-shrink-0",children:M(O.name)}),s.jsx("span",{className:"max-w-32 truncate",children:O.name}),s.jsx("button",{type:"button",onClick:()=>C(O.id),className:"w-4 h-4 rounded-full bg-blue-500/20 hover:bg-red-500/20 flex items-center justify-center transition-colors group-hover:bg-red-500/30",title:`Xa ${O.name}`,children:s.jsx(et,{className:"w-3 h-3 text-blue-300 group-hover:text-red-300"})})]},O.id))}),s.jsxs("div",{ref:D,className:"relative",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:_,type:"text",value:x,onChange:G,onFocus:z,onKeyDown:H,placeholder:i,className:"w-full p-2.5 pl-9 bg-gray-800/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none transition-colors text-sm"}),s.jsx(Ox,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"})]}),g&&v.length>0&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-600 rounded-lg shadow-2xl z-50 overflow-hidden",children:s.jsx("div",{className:"py-2 max-h-64 overflow-y-auto modal-scrollbar",children:v.map(O=>s.jsxs("button",{type:"button",onClick:()=>E(O),className:"w-full px-4 py-3 text-left hover:bg-gray-700 transition-colors flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-sm font-bold flex-shrink-0",children:M(O.name)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-white font-medium truncate",children:O.name}),s.jsx("div",{className:"text-gray-400 text-sm truncate",children:O.email}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("span",{className:"px-2 py-0.5 bg-gray-700 text-gray-300 rounded text-xs",children:O.role}),s.jsx("span",{className:"px-2 py-0.5 bg-gray-700 text-gray-300 rounded text-xs",children:O.location}),O.team_name&&s.jsx("span",{className:"px-2 py-0.5 bg-blue-700 text-blue-300 rounded text-xs",children:O.team_name})]})]})]},O.id))})}),g&&x&&v.length===0&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-600 rounded-lg shadow-2xl z-50 p-4 text-center",children:s.jsxs("div",{className:"text-gray-400 text-sm",children:['Khng tm thy ngi dng no vi t kha "',x,'"']})})]}),a.length>0&&s.jsxs("div",{className:"text-gray-400 text-xs",children:[" tag ",a.length," ngi dng"]})]})},po=({value:l=[],onChange:a,placeholder:n="Chn danh mc cng vic",label:i,required:c=!1,disabled:u=!1,helperText:h})=>{const[g,m]=b.useState(!1),[x,p]=b.useState(""),v=b.useRef(null),j=[{value:"sbg-new",label:"SBG mi",icon:qs,color:"bg-blue-500",category:"SBG"},{value:"sbg-old",label:"SBG c",icon:qs,color:"bg-blue-600",category:"SBG"},{value:"partner-new",label:"i tc mi",icon:qt,color:"bg-green-500",category:"I TC"},{value:"partner-old",label:"i tc c",icon:qt,color:"bg-green-600",category:"I TC"},{value:"kts-new",label:"KTS mi",icon:vs,color:"bg-purple-500",category:"KTS"},{value:"kts-old",label:"KTS c",icon:vs,color:"bg-purple-600",category:"KTS"},{value:"customer-new",label:"Khch hng mi",icon:$s,color:"bg-orange-500",category:"KHCH HNG"},{value:"customer-old",label:"Khch hng c",icon:$s,color:"bg-orange-600",category:"KHCH HNG"},{value:"other",label:"Cng vic khc",icon:qs,color:"bg-gray-500",category:"KHC"}],N=j.reduce((z,H)=>{const O=H.category||"Khc";return z[O]||(z[O]=[]),z[O].push(H),z},{}),S=Object.entries(N).reduce((z,[H,O])=>{const X=O.filter(ie=>ie.label.toLowerCase().includes(x.toLowerCase()));return X.length>0&&(z[H]=X),z},{});b.useEffect(()=>{const z=H=>{v.current&&!v.current.contains(H.target)&&m(!1)};return document.addEventListener("mousedown",z),()=>{document.removeEventListener("mousedown",z)}},[]);const _=z=>{l.includes(z)?a(l.filter(H=>H!==z)):a([...l,z])},D=z=>{a(l.filter(H=>H!==z))},M=()=>{a([])},E=j.filter(z=>l.includes(z.value)),C=E.slice(0,3),G=E.length-3;return s.jsxs("div",{className:"relative",ref:v,children:[i&&s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[i,c&&s.jsx("span",{className:"text-red-400 ml-1",children:"*"})]}),s.jsx("button",{type:"button",onClick:()=>{u||(m(!g),g||p(""))},disabled:u,className:`w-full px-3 py-2.5 bg-gray-700 border border-gray-600 rounded-lg text-left focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors min-h-[44px] ${u?"opacity-50 cursor-not-allowed":"cursor-pointer hover:border-gray-500"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex-1 min-w-0",children:E.length===0?s.jsx("span",{className:"text-gray-400 text-sm",children:n}):s.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[C.map(z=>s.jsxs("span",{className:`dropdown-badge inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium text-white ${z.color}`,children:[s.jsx("span",{className:"truncate max-w-[120px]",children:z.label}),s.jsx("span",{onClick:H=>{H.stopPropagation(),D(z.value)},className:"ml-1.5 hover:bg-white/20 rounded-full p-0.5 transition-colors cursor-pointer inline-flex items-center justify-center",role:"button",tabIndex:0,onKeyDown:H=>{(H.key==="Enter"||H.key===" ")&&(H.preventDefault(),H.stopPropagation(),D(z.value))},children:s.jsx(et,{className:"w-3 h-3"})})]},z.value)),G>0&&s.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-600 text-gray-200",children:["+",G]})]})}),s.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[E.length>0&&s.jsx("span",{onClick:z=>{z.stopPropagation(),M()},className:"text-gray-400 hover:text-gray-200 transition-colors cursor-pointer inline-flex items-center justify-center",role:"button",tabIndex:0,onKeyDown:z=>{(z.key==="Enter"||z.key===" ")&&(z.preventDefault(),z.stopPropagation(),M())},title:"Xa tt c",children:s.jsx(et,{className:"w-4 h-4"})}),s.jsx(Ks,{className:`w-4 h-4 text-gray-400 transition-transform ${g?"rotate-180":""}`})]})]})}),g&&s.jsxs("div",{className:"absolute left-0 right-0 bg-gray-800 border border-gray-600 rounded-xl shadow-2xl z-50 top-full mt-2 max-h-[70vh] md:max-h-[400px] flex flex-col",children:[s.jsx("div",{className:"p-3 border-b border-gray-600 bg-gray-700/30 flex-shrink-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[E.length>0&&s.jsxs("div",{className:"text-xs text-gray-400",children:[" chn: ",E.length," loi cng vic"]}),s.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-3 py-1.5 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:"Xong"})]})}),s.jsxs("div",{className:"dropdown-options-list overflow-y-auto flex-1 min-h-0",children:[Object.entries(S).map(([z,H])=>H.length===0?null:s.jsxs("div",{children:[s.jsx("div",{className:"px-3 py-1.5 bg-gray-750/30",children:s.jsx("span",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider",children:z})}),s.jsx("div",{className:"dropdown-grid p-3",children:H.map(O=>{const X=l.includes(O.value);return s.jsxs("button",{type:"button",onClick:()=>_(O.value),className:`dropdown-badge btn-touch px-3 py-2.5 rounded-full text-center min-h-[44px] flex items-center justify-center text-sm font-medium ${X?`${O.color} text-white selected`:"bg-gray-700/50 text-gray-300 hover:bg-gray-600/70 hover:text-white"}`,children:[s.jsx("span",{className:"truncate",children:O.label}),X&&s.jsx(jl,{className:"w-3 h-3 ml-1 flex-shrink-0"})]},O.value)})})]},z)),Object.values(S).every(z=>z.length===0)&&s.jsx("div",{className:"text-center py-8 text-gray-400",children:"Khng tm thy loi cng vic ph hp"})]})]}),h&&s.jsx("div",{className:"text-gray-400 text-sm mt-2",children:h})]})},b1=({isOpen:l,onClose:a,onSubmit:n})=>{const[i,c]=Wr.useState(null),[u,h]=Wr.useState(!0),[g,m]=b.useState({name:"",description:"",workTypes:[],priority:"normal",status:"new-requests",startDate:new Date().toISOString().split("T")[0],dueDate:"",taggedUsers:[],department:"HN",platform:[],campaignType:"",shareScope:"team"}),x=[{value:"new-requests",label:"Cha tin hnh",color:"bg-yellow-500",icon:Cl},{value:"approved",label:"ang tin hnh",color:"bg-blue-500",icon:cn},{value:"live",label:" hon thnh",color:"bg-green-500",icon:on}],p=[{value:"low",label:"Thp",color:"bg-green-500"},{value:"normal",label:"Bnh thng",color:"bg-yellow-500"},{value:"high",label:"Cao",color:"bg-red-500"}];if(Wr.useEffect(()=>{l&&(async()=>{try{h(!0);const D=await Px.getCurrentEmployee();if(D){c(D);const M=D.location==="H Ni"?"HN":"HCM";m(E=>({...E,department:M}))}}catch(D){console.error("Error loading user data:",D)}finally{h(!1)}})()},[l]),!l)return null;if(u||!i)return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",children:s.jsx("div",{className:"bg-[#1a1f2e] rounded-lg sm:rounded-2xl w-full max-w-md overflow-hidden shadow-2xl border border-gray-700/50",children:s.jsxs("div",{className:"p-6 sm:p-8 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 sm:h-8 sm:w-8 border-b-2 border-blue-500 mx-auto mb-3 sm:mb-4"}),s.jsx("p",{className:"text-gray-400 text-sm sm:text-base",children:"ang ti thng tin ngi dng..."})]})})});const v=i.role==="retail_director",j=_=>{m(D=>({...D,workTypes:_}))},N=_=>{if(_.preventDefault(),!i){console.error("No current user found");return}const D=g.workTypes.length>0?g.workTypes[0]:"other";n({...g,workTypes:[D],id:`task-${Date.now()}`,createdBy:{id:i.id,name:i.name,email:i.email},assignedTo:g.taggedUsers.length>0?g.taggedUsers[0]:null,endDate:g.dueDate}),S(),a()},S=()=>{if(!i)return;const _=i.location==="H Ni"?"HN":"HCM";m({name:"",description:"",workTypes:[],priority:"normal",status:"new-requests",startDate:new Date().toISOString().split("T")[0],dueDate:"",taggedUsers:[],department:_,platform:[],campaignType:"",shareScope:"team"})};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",children:s.jsxs("div",{className:"bg-[#1a1f2e] rounded-lg sm:rounded-2xl w-full max-w-2xl max-h-[95vh] sm:max-h-[90vh] overflow-hidden shadow-2xl border border-gray-700/50 flex flex-col",children:[s.jsx("div",{className:"flex-shrink-0 p-3 sm:p-4 md:p-6 border-b border-gray-700 bg-gradient-to-r from-blue-600/10 to-purple-600/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[s.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center shadow-lg flex-shrink-0",children:s.jsx(Ya,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-white truncate",children:"To cng vic mi"}),s.jsx("p",{className:"text-gray-400 text-xs sm:text-sm mt-0.5 sm:mt-1 hidden sm:block",children:"To v qun l cng vic hiu qu"})]})]}),s.jsx("button",{type:"button",onClick:a,className:"flex-shrink-0 p-1.5 sm:p-2 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-lg transition-colors",children:s.jsx(et,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsxs("form",{id:"create-task-form",onSubmit:N,className:"p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-6",children:[s.jsx(po,{label:"Danh mc cng vic",value:g.workTypes,onChange:j,placeholder:"Chn danh mc cng vic",required:!0}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-white font-medium mb-2",children:["Tiu  cng vic ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("input",{type:"text",value:g.name,onChange:_=>m({...g,name:_.target.value}),placeholder:"Nhp tiu  cng vic...",className:"w-full p-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-white font-medium mb-2",children:["M t chi tit ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("textarea",{value:g.description,onChange:_=>m({...g,description:_.target.value}),placeholder:"M t chi tit v cng vic, yu cu, mc tiu...",rows:4,className:"w-full p-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none resize-none",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsx(Xu,{label:"Trng thi",value:g.status,onChange:_=>m({...g,status:_}),options:x,placeholder:"Chn trng thi"}),s.jsx(Xu,{label:"Mc  u tin",value:g.priority,onChange:_=>m({...g,priority:_}),options:p,placeholder:"Chn mc  u tin"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsx(Eg,{label:"Ngy thc hin",value:g.startDate,onChange:_=>m({...g,startDate:_}),placeholder:"Chn ngy thc hin",required:!0}),s.jsx(Eg,{label:"Hn cht",value:g.dueDate,onChange:_=>m({...g,dueDate:_}),placeholder:"Chn hn cht",minDate:g.startDate})]}),v&&s.jsxs("div",{children:[s.jsx(Xu,{label:"Chi nhnh",value:g.department,onChange:_=>m({...g,department:_,taggedUsers:[]}),options:[{value:"HN",label:"H Ni",icon:qs},{value:"HCM",label:"H Ch Minh",icon:qs}],placeholder:"Chn chi nhnh (ty chn)"}),s.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Ty chn - Ch chn khi cn giao vic cho chi nhnh c th"})]}),s.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-4 border border-gray-600/50",children:[s.jsx(v1,{label:"Thm ngi cng lm vic",value:g.taggedUsers,onChange:_=>m({...g,taggedUsers:_}),placeholder:"Nhp tn  thm ng nghip cng lm vic...",currentUserId:i.id,currentUserLocation:v&&g.department?g.department==="HN"?"H Ni":"H Ch Minh":i.location}),s.jsx("div",{className:"text-gray-400 text-xs mt-2",children:v?g.department?`Ch hin th nhn vin ti ${g.department==="HN"?"H Ni":"H Ch Minh"}`:`Ch hin th nhn vin ti ${i.location} (cha chn chi nhnh)`:`Ch hin th nhn vin ti ${i.location}`})]}),s.jsx(y1,{value:g.shareScope,onChange:_=>m({...g,shareScope:_}),label:"Phm vi chia s",required:!0})]})}),s.jsx("div",{className:"flex-shrink-0 p-3 sm:p-4 md:p-6 border-t border-gray-700/50 bg-[#1a1f2e]",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-3",children:[s.jsx("button",{type:"button",onClick:a,className:"w-full sm:w-auto px-4 sm:px-6 py-2.5 sm:py-3 text-gray-300 hover:text-white hover:bg-gray-700/30 rounded-lg transition-colors font-medium text-sm sm:text-base",children:"Hy b"}),s.jsxs("button",{type:"submit",form:"create-task-form",className:"w-full sm:w-auto px-4 sm:px-6 py-2.5 sm:py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg transition-all duration-200 flex items-center justify-center gap-2 font-medium shadow-lg hover:shadow-xl transform hover:scale-[1.02] text-sm sm:text-base",children:[s.jsx(Ya,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Lu Cng Vic"]})]})})]})})},w1=({isOpen:l,onClose:a,onConfirm:n,title:i="Delete Items",message:c="Are you sure you want to permanently delete this item?",itemName:u})=>{if(!l)return null;const h=()=>{n(),a()};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-6 max-w-md w-full mx-4 shadow-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:i}),s.jsx("button",{onClick:a,className:"p-1 hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(et,{className:"w-5 h-5 text-gray-400"})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("p",{className:"text-gray-300 mb-2",children:c}),u&&s.jsxs("p",{className:"text-sm text-gray-400",children:["Item: ",s.jsx("span",{className:"text-white font-medium",children:u})]})]}),s.jsxs("div",{className:"flex gap-3 justify-end",children:[s.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded-lg transition-colors",children:"Close"}),s.jsx("button",{onClick:h,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",children:"Delete"})]})]})})},pl=new Map,j1=300*1e3;function N1(l,a,n,i){const c={timestamp:new Date().toISOString(),action:l,taskId:a,taskName:i,userId:n,type:"UNAUTHORIZED_ACCESS"};console.warn(" Truy cp tri php:",c)}function S1(l){return l==="admin"||l==="manager"||l==="retail_director"}function Za(l,a){try{const n=Ge(),i=a||n?.id;if(!i||!l)return console.warn(" isTaskOwner: Missing userId or task"),!1;if(S1(n?.role))return console.log(" Admin/Manager c quyn chnh sa tt c tasks"),!0;const c=l.createdBy?.id===i;return console.log(" Task permission check:",{taskId:l.id,taskName:l.name,createdBy:l.createdBy?.id,currentUser:i,userRole:n?.role,isOwner:c}),c}catch(n){return console.error(" Error checking task ownership:",n),!1}}function _1(l,a){return Za(l,a)}function k1(l,a){return Za(l,a)}function T1(l,a){return Za(l,a)}function E1(l,a){return Za(l,a)}function C1(l,a){return Za(l,a)}function D1(l,a){return Za(l,a)}function hd(l,a){const n=Ge()?.id,i=`${l.id}-${n}`,c=pl.get(i);if(c&&Date.now()-c.timestamp<j1)return console.log(" S dng cache cho permissions ca task:",l.name),c.permissions;const h={isOwner:Za(l,a),canEdit:_1(l,a),canDelete:k1(l,a),canChangeStatus:T1(l,a),canChangePriority:E1(l,a),canChangeWorkType:C1(l,a),canAssign:D1(l,a),canView:!0};return pl.set(i,{permissions:h,timestamp:Date.now()}),h}function Cg(l){if(l){for(const a of pl.keys())a.startsWith(l)&&pl.delete(a);console.log("  xa cache permissions cho task:",l)}else pl.clear(),console.log("  xa ton b cache permissions")}function A1(l,a,n){const i=Ge();return n&&i?.id&&N1(l,n,i.id,a),` Bn khng c quyn ${l} cng vic "${a}". Ch ngi to cng vic hoc Admin/Manager mi c quyn thc hin hnh ng ny.`}const M1=({isOpen:l,onClose:a,onSubmit:n,task:i})=>{const[c,u]=b.useState({name:"",description:"",workTypes:[],priority:"normal",status:"new-requests",dueDate:"",assignedTo:"",department:"HN",campaignType:""});b.useEffect(()=>{l&&i&&u({name:i.name||"",description:i.description||"",workTypes:i.workType?[i.workType]:[],priority:i.priority||"normal",status:i.status||"new-requests",dueDate:i.dueDate||"",assignedTo:i.assignedTo?.name||"",department:i.department||"HN",campaignType:i.campaignType||""})},[l,i]);const h=j=>{if(j.preventDefault(),!i)return;if(!hd(i).canEdit){alert(A1("chnh sa",i.name,i.id));return}n({...c,id:i.id,workType:c.workTypes[0]||"other",startDate:i.startDate,dueDate:c.dueDate,assignedToId:i.assignedTo?.id}),a()},g=j=>{u(N=>({...N,workTypes:j}))},m=(j,N)=>{u(S=>({...S,[j]:N}))};if(!l||!i)return null;const p=hd(i).canEdit,v=[{value:"new-requests",label:"Cha tin hnh"},{value:"approved",label:"ang tin hnh"},{value:"live",label:" hon thnh"}];return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",children:s.jsxs("div",{className:"bg-[#1a1f2e] rounded-lg sm:rounded-2xl w-full max-w-2xl max-h-[95vh] sm:max-h-[90vh] overflow-hidden shadow-2xl border border-gray-700/50 flex flex-col",children:[s.jsx("div",{className:"flex-shrink-0 p-3 sm:p-4 md:p-6 border-b border-gray-700 bg-gradient-to-r from-blue-600/10 to-purple-600/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[s.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center shadow-lg flex-shrink-0",children:s.jsx(Nl,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-white truncate",children:p?"Chnh sa cng vic":"Xem chi tit cng vic"}),s.jsx("p",{className:"text-gray-400 text-xs sm:text-sm mt-0.5 sm:mt-1 hidden sm:block",children:p?"Cp nht thng tin cng vic":"Ch ngi to cng vic mi c quyn chnh sa"})]})]}),s.jsx("button",{type:"button",onClick:a,className:"flex-shrink-0 p-1.5 sm:p-2 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-lg transition-colors",children:s.jsx(et,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsxs("form",{id:"edit-task-form",onSubmit:h,className:"p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-6",children:[s.jsx(po,{label:"Loi cng vic",value:c.workTypes,onChange:g,placeholder:"Chn loi cng vic",disabled:!p,required:!0}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-white font-medium mb-2",children:["Tn cng vic ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("input",{type:"text",value:c.name,onChange:j=>m("name",j.target.value),disabled:!p,className:`w-full p-3 border rounded-lg text-white placeholder-gray-400 focus:outline-none ${p?"bg-gray-800/50 border-gray-600 focus:border-blue-500":"bg-gray-700/30 border-gray-700 cursor-not-allowed opacity-60"}`,placeholder:"Nhp tn cng vic...",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-white font-medium mb-2",children:"M t chi tit"}),s.jsx("textarea",{value:c.description,onChange:j=>m("description",j.target.value),disabled:!p,rows:4,className:`w-full p-3 border rounded-lg text-white placeholder-gray-400 focus:outline-none resize-none ${p?"bg-gray-800/50 border-gray-600 focus:border-blue-500":"bg-gray-700/30 border-gray-700 cursor-not-allowed opacity-60"}`,placeholder:"M t chi tit v cng vic, yu cu, mc tiu..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-white font-medium mb-2",children:"Mc  u tin"}),s.jsxs("select",{value:c.priority,onChange:j=>m("priority",j.target.value),disabled:!p,className:`w-full p-3 border rounded-lg text-white focus:outline-none ${p?"bg-gray-800/50 border-gray-600 focus:border-blue-500":"bg-gray-700/30 border-gray-700 cursor-not-allowed opacity-60"}`,children:[s.jsx("option",{value:"low",children:"Thp"}),s.jsx("option",{value:"normal",children:"Bnh thng"}),s.jsx("option",{value:"high",children:"Cao"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-white font-medium mb-2",children:"Trng thi"}),s.jsx("select",{value:c.status,onChange:j=>m("status",j.target.value),disabled:!p,className:`w-full p-3 border rounded-lg text-white focus:outline-none ${p?"bg-gray-800/50 border-gray-600 focus:border-blue-500":"bg-gray-700/30 border-gray-700 cursor-not-allowed opacity-60"}`,children:v.map(j=>s.jsx("option",{value:j.value,children:j.label},j.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-white font-medium mb-2",children:"Ngy hon thnh"}),s.jsx("input",{type:"date",value:c.dueDate,onChange:j=>m("dueDate",j.target.value),disabled:!p,className:`w-full p-3 border rounded-lg text-white focus:outline-none ${p?"bg-gray-800/50 border-gray-600 focus:border-blue-500":"bg-gray-700/30 border-gray-700 cursor-not-allowed opacity-60"}`})]})]})]})}),s.jsx("div",{className:"flex-shrink-0 p-3 sm:p-4 md:p-6 border-t border-gray-700/50 bg-[#1a1f2e]",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-3",children:[s.jsx("button",{type:"button",onClick:a,className:"w-full sm:w-auto px-4 sm:px-6 py-2.5 sm:py-3 text-gray-300 hover:text-white hover:bg-gray-700/30 rounded-lg transition-colors font-medium text-sm sm:text-base",children:p?"Hy":"ng"}),p&&s.jsxs("button",{type:"submit",form:"edit-task-form",className:"w-full sm:w-auto px-4 sm:px-6 py-2.5 sm:py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg transition-all duration-200 flex items-center justify-center gap-2 font-medium shadow-lg hover:shadow-xl transform hover:scale-[1.02] text-sm sm:text-base",children:[s.jsx(Nl,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Lu thay i"]})]})})]})})},Dg={"sbg-new":{label:"SBG mi",color:"bg-blue-500/20 text-blue-300 border-blue-500/30"},"sbg-old":{label:"SBG c",color:"bg-blue-600/20 text-blue-400 border-blue-600/30"},"partner-new":{label:"i tc mi",color:"bg-green-500/20 text-green-300 border-green-500/30"},"partner-old":{label:"i tc c",color:"bg-green-600/20 text-green-400 border-green-600/30"},"kts-new":{label:"KTS mi",color:"bg-purple-500/20 text-purple-300 border-purple-500/30"},"kts-old":{label:"KTS c",color:"bg-purple-600/20 text-purple-400 border-purple-600/30"},"customer-new":{label:"Khch hng mi",color:"bg-orange-500/20 text-orange-300 border-orange-500/30"},"customer-old":{label:"Khch hng c",color:"bg-orange-600/20 text-orange-400 border-orange-600/30"},other:{label:"Cng vic khc",color:"bg-gray-500/20 text-gray-300 border-gray-500/30"}},O1=({value:l,onChange:a,className:n=""})=>{const i=Dg[l]||Dg.other;return s.jsxs("div",{className:`relative inline-flex items-center ${n}`,children:[s.jsx("div",{"data-testid":"work-type-badge",className:`px-2 py-1 rounded-full text-xs font-medium border ${i.color} bg-gray-800/50`,title:i.label,children:i.label}),a&&s.jsxs("select",{"aria-label":"i danh mc cng vic",value:l,onChange:c=>a(c.target.value),className:"absolute inset-0 opacity-0 cursor-pointer",children:[s.jsx("option",{value:"sbg-new",children:"SBG mi"}),s.jsx("option",{value:"sbg-old",children:"SBG c"}),s.jsx("option",{value:"partner-new",children:"i tc mi"}),s.jsx("option",{value:"partner-old",children:"i tc c"}),s.jsx("option",{value:"kts-new",children:"KTS mi"}),s.jsx("option",{value:"kts-old",children:"KTS c"}),s.jsx("option",{value:"customer-new",children:"Khch hng mi"}),s.jsx("option",{value:"customer-old",children:"Khch hng c"}),s.jsx("option",{value:"other",children:"Cng vic khc"})]})]})},R1=["sbg-new","sbg-old","partner-new","partner-old","kts-new","kts-old","customer-new","customer-old","other"],lo=({workTypes:l,onChange:a,maxDisplay:n=3,className:i=""})=>{const c=(()=>{if(console.log(" MultiWorkTypeBadges received workTypes:",l,"Type:",typeof l),!l)return["other"];if(Array.isArray(l))return l;if(typeof l=="string"){if(l.startsWith("[")&&l.endsWith("]"))try{const v=JSON.parse(l);return Array.isArray(v)?v:[l]}catch{return[l]}return[l]}return["other"]})();console.log(" Normalized workTypes:",c);const u=c.slice(0,n),h=c.length-n,g=R1.filter(v=>!c.includes(v)),m=v=>{if(a){const j=c.filter(N=>N!==v);a(j)}},x=v=>{a&&!c.includes(v)&&a([...c,v])},p=(v,j)=>{if(a){const N=c.map(S=>S===v?j:S);a(N)}};return s.jsxs("div",{className:`flex items-center gap-1 flex-wrap ${i}`,children:[u.map((v,j)=>s.jsxs("div",{className:"relative group",children:[s.jsx(O1,{value:v,onChange:a?N=>p(v,N):void 0}),a&&c.length>1&&s.jsx("button",{onClick:N=>{N.stopPropagation(),m(v)},className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 hover:bg-red-600 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"Xa danh mc",children:s.jsx(et,{className:"w-2 h-2 text-white"})})]},`${v}-${j}`)),h>0&&s.jsxs("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium text-white bg-gray-600 border border-gray-500/30",title:`+${h} danh mc khc`,children:["+",h]}),a&&g.length>0&&s.jsxs("div",{className:"relative inline-flex items-center",children:[s.jsx("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium text-gray-300 bg-gray-700/50 hover:bg-gray-600/50 border border-gray-600/30 transition-colors cursor-pointer",title:"Thm danh mc",children:s.jsx(Ya,{className:"w-3 h-3"})}),s.jsxs("select",{value:"",onChange:v=>{v.target.value&&(x(v.target.value),v.target.value="")},className:"absolute inset-0 opacity-0 cursor-pointer",children:[s.jsx("option",{value:"",children:"Thm danh mc"}),g.map(v=>s.jsxs("option",{value:v,children:[v==="sbg-new"&&"SBG mi",v==="sbg-old"&&"SBG c",v==="partner-new"&&"i tc mi",v==="partner-old"&&"i tc c",v==="kts-new"&&"KTS mi",v==="kts-old"&&"KTS c",v==="customer-new"&&"Khch hng mi",v==="customer-old"&&"Khch hng c",v==="other"&&"Cng vic khc"]},v))]})]})]})},Ag={high:{label:"Cao",color:"bg-red-500/20 text-red-300 border-red-500/30"},normal:{label:"Bnh thng",color:"bg-blue-500/20 text-blue-300 border-blue-500/30"},low:{label:"Thp",color:"bg-gray-500/20 text-gray-300 border-gray-500/30"}},io=({value:l,onChange:a,className:n=""})=>{const i=Ag[l]||Ag.normal;return s.jsxs("div",{className:`relative inline-flex items-center ${n}`,children:[s.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium border ${i.color} bg-gray-800/50`,title:`u tin ${i.label}`,children:i.label}),a&&s.jsxs("select",{"aria-label":"i u tin",value:l,onChange:c=>a(c.target.value),className:"absolute inset-0 opacity-0 cursor-pointer",children:[s.jsx("option",{value:"low",children:"Thp"}),s.jsx("option",{value:"normal",children:"Bnh thng"}),s.jsx("option",{value:"high",children:"Cao"})]})]})},U1=({tasks:l,activeFilter:a,onFilterChange:n,compact:i=!1})=>{const c={all:l.length,"new-requests":l.filter(h=>h.status==="new-requests").length,approved:l.filter(h=>h.status==="approved").length,live:l.filter(h=>h.status==="live").length},u=[{key:"all",label:"Tt c",icon:null,count:c.all,color:"text-gray-400",bgColor:"bg-gray-700/50",activeColor:"text-white",activeBgColor:"bg-gray-600",borderColor:"border-gray-600",activeBorderColor:"border-gray-500"},{key:"new-requests",label:i?"Cha bt u":"Cha tin hnh",icon:Cl,count:c["new-requests"],color:"text-yellow-400",bgColor:"bg-yellow-500/10",activeColor:"text-yellow-300",activeBgColor:"bg-yellow-500/20",borderColor:"border-yellow-500/30",activeBorderColor:"border-yellow-400"},{key:"approved",label:i?"ang lm":"ang tin hnh",icon:cn,count:c.approved,color:"text-blue-400",bgColor:"bg-blue-500/10",activeColor:"text-blue-300",activeBgColor:"bg-blue-500/20",borderColor:"border-blue-500/30",activeBorderColor:"border-blue-400"},{key:"live",label:i?"Hon thnh":" hon thnh",icon:on,count:c.live,color:"text-green-400",bgColor:"bg-green-500/10",activeColor:"text-green-300",activeBgColor:"bg-green-500/20",borderColor:"border-green-500/30",activeBorderColor:"border-green-400"}];return s.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-lg border border-gray-700/50 p-3 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),s.jsx("h3",{className:"text-sm font-medium text-gray-300",children:"Lc nhanh theo trng thi"})]}),s.jsx("div",{className:`grid gap-2 ${i?"grid-cols-2 sm:grid-cols-4":"grid-cols-1 sm:grid-cols-2 lg:grid-cols-4"}`,children:u.map(h=>{const g=a===h.key,m=h.icon;return s.jsxs("button",{onClick:()=>n(h.key),className:`
                relative flex items-center gap-2 p-3 rounded-lg border transition-all duration-200
                hover:scale-[1.02] hover:shadow-lg
                ${g?`${h.activeBgColor} ${h.activeBorderColor} ${h.activeColor}`:`${h.bgColor} ${h.borderColor} ${h.color} hover:${h.activeBgColor}`}
                ${i?"text-xs":"text-sm"}
              `,children:[m&&s.jsx(m,{className:`${i?"w-3 h-3":"w-4 h-4"} flex-shrink-0`}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("div",{className:`font-medium ${i?"text-xs":"text-sm"}`,children:h.label}),s.jsxs("div",{className:"text-xs opacity-75",children:[h.count," cng vic"]})]}),s.jsx("div",{className:`
                px-2 py-1 rounded-full text-xs font-bold
                ${g?"bg-white/20 text-white":"bg-gray-700/50 text-gray-300"}
              `,children:h.count}),g&&s.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-white rounded-full opacity-75"})]},h.key)})}),s.jsx("div",{className:"mt-3 pt-3 border-t border-gray-700/50",children:s.jsxs("div",{className:"text-xs text-gray-400 text-center",children:["Tng cng: ",s.jsx("span",{className:"font-medium text-gray-300",children:c.all})," cng vic",a!=="all"&&s.jsxs("span",{className:"ml-2",children:[" ang hin th: ",s.jsx("span",{className:"font-medium text-blue-300",children:c[a]})]})]})})]})},Mg={private:{label:"C nhn",icon:Dl,color:"bg-gray-500/20 text-gray-300 border-gray-500/30"},team:{label:"Nhm",icon:qt,color:"bg-blue-500/20 text-blue-300 border-blue-500/30"},public:{label:"Cng khai",icon:Cx,color:"bg-green-500/20 text-green-300 border-green-500/30"}},oo=({value:l,onChange:a,className:n=""})=>{const i=Mg[l]||Mg.team,c=i.icon;return s.jsxs("div",{className:`relative inline-flex items-center ${n}`,children:[s.jsx("div",{className:`w-6 h-6 rounded-full border flex items-center justify-center ${i.color} bg-gray-800/50`,title:i.label,children:s.jsx(c,{className:"w-3 h-3"})}),a&&s.jsxs("select",{"aria-label":"i phm vi chia s",value:l,onChange:u=>a(u.target.value),className:"absolute inset-0 opacity-0 cursor-pointer",children:[s.jsx("option",{value:"private",children:"C nhn"}),s.jsx("option",{value:"team",children:"Nhm"}),s.jsx("option",{value:"public",children:"Cng khai"})]})]})},Og={"new-requests":{label:"Cha tin hnh",color:"bg-yellow-500/20 text-yellow-300 border-yellow-500/30"},approved:{label:"ang tin hnh",color:"bg-blue-500/20 text-blue-300 border-blue-500/30"},live:{label:" hon thnh",color:"bg-green-500/20 text-green-300 border-green-500/30"}},co=({value:l,onChange:a,className:n=""})=>{const i=Og[l]||Og["new-requests"];return s.jsxs("div",{className:`relative inline-flex items-center ${n}`,children:[s.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium border ${i.color} bg-gray-800/50`,title:i.label,children:i.label}),a&&s.jsxs("select",{"aria-label":"i trng thi",value:l,onChange:c=>a(c.target.value),className:"absolute inset-0 opacity-0 cursor-pointer",children:[s.jsx("option",{value:"new-requests",children:"Cha tin hnh"}),s.jsx("option",{value:"approved",children:"ang tin hnh"}),s.jsx("option",{value:"live",children:" hon thnh"})]})]})},pa=({task:l,onEdit:a,onDelete:n,compact:i=!1})=>{const c=l?hd(l):{canEdit:!0,canDelete:!0};if(!c.canEdit&&!c.canDelete)return null;const u=g=>{g.stopPropagation(),a&&a(g)},h=g=>{g.stopPropagation(),n&&n(g)};return i?s.jsxs("div",{className:"flex items-center gap-1 bg-gray-800/90 backdrop-blur-sm rounded-lg p-1 shadow-lg border border-gray-600/50",children:[c.canEdit&&s.jsx("button",{onClick:u,className:`
              p-2 rounded-md
              bg-blue-500/20 border border-blue-500/30
              text-blue-300 hover:text-blue-200
              hover:bg-blue-500/30 hover:border-blue-400/50
              hover:scale-105 hover:shadow-md
              transition-all duration-200
              backdrop-blur-sm
              min-h-[44px] min-w-[44px] md:min-h-[auto] md:min-w-[auto]
              active:scale-95 active:bg-blue-500/40
            `,title:"Chnh sa cng vic",children:s.jsx(en,{className:"w-4 h-4"})}),c.canDelete&&s.jsx("button",{onClick:h,className:`
              p-2 rounded-md
              bg-red-500/20 border border-red-500/30
              text-red-300 hover:text-red-200
              hover:bg-red-500/30 hover:border-red-400/50
              hover:scale-105 hover:shadow-md
              transition-all duration-200
              backdrop-blur-sm
              min-h-[44px] min-w-[44px] md:min-h-[auto] md:min-w-[auto]
              active:scale-95 active:bg-red-500/40
            `,title:"Xa cng vic",children:s.jsx(Fa,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"flex flex-col gap-2",children:[c.canEdit&&s.jsx("button",{onClick:u,className:"p-2 rounded-lg bg-blue-500/10 border border-blue-500/20 text-blue-400 hover:bg-blue-500/20 hover:text-blue-300 transition-all duration-200 group",title:"Chnh sa cng vic",children:s.jsx(en,{className:"w-4 h-4 group-hover:scale-110 transition-transform"})}),c.canDelete&&s.jsx("button",{onClick:h,className:"p-2 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 hover:bg-red-500/20 hover:text-red-300 transition-all duration-200 group",title:"Xa cng vic",children:s.jsx(Fa,{className:"w-4 h-4 group-hover:scale-110 transition-transform"})})]})},Fi=({task:l,onUpdateTask:a,compact:n=!1,maxWorkTypes:i=2})=>n?s.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[s.jsx("div",{className:"flex items-center gap-1 flex-wrap",children:s.jsx(lo,{workTypes:l.workTypes||[l.workType],onChange:c=>{a({id:l.id,workTypes:c})},maxDisplay:i})}),s.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[s.jsx(co,{value:l.status,onChange:c=>a({id:l.id,status:c})}),s.jsx(io,{value:l.priority,onChange:c=>a({id:l.id,priority:c})})]}),s.jsx("div",{className:"flex items-center gap-1",children:s.jsx(oo,{value:l.shareScope||"team",onChange:c=>a({id:l.id,shareScope:c})})})]}):s.jsxs("div",{className:"flex items-center gap-2 flex-wrap w-full",children:[s.jsx(lo,{workTypes:l.workTypes||[l.workType],onChange:c=>{a({id:l.id,workTypes:c})},maxDisplay:i}),s.jsx(co,{value:l.status,onChange:c=>a({id:l.id,status:c})}),s.jsx(io,{value:l.priority,onChange:c=>a({id:l.id,priority:c})}),s.jsx(oo,{value:l.shareScope||"team",onChange:c=>a({id:l.id,shareScope:c})})]}),L1=({status:l,priority:a,onStatusChange:n,onPriorityChange:i,isEditMode:c})=>{const u=x=>{switch(x){case"new-requests":return{label:"Yu cu mi",color:"bg-yellow-500/20 text-yellow-300 border-yellow-500/30"};case"approved":return{label:" duyt",color:"bg-blue-500/20 text-blue-300 border-blue-500/30"};case"live":return{label:"ang thc hin",color:"bg-green-500/20 text-green-300 border-green-500/30"};default:return{label:"Khng xc nh",color:"bg-gray-500/20 text-gray-300 border-gray-500/30"}}},h=x=>{switch(x){case"low":return{label:"Thp",color:"bg-gray-500/20 text-gray-300 border-gray-500/30"};case"normal":return{label:"Bnh thng",color:"bg-blue-500/20 text-blue-300 border-blue-500/30"};case"high":return{label:"Cao",color:"bg-red-500/20 text-red-300 border-red-500/30"};default:return{label:"Bnh thng",color:"bg-blue-500/20 text-blue-300 border-blue-500/30"}}},g=u(l),m=h(a);return c?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"relative",children:s.jsxs("div",{className:`relative px-3 py-1 rounded-full text-xs font-medium border cursor-pointer ${g.color} bg-gray-800/50`,children:[s.jsxs("select",{value:l,onChange:x=>n(x.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",children:[s.jsx("option",{value:"new-requests",children:"Yu cu mi"}),s.jsx("option",{value:"approved",children:" duyt"}),s.jsx("option",{value:"live",children:"ang thc hin"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:g.label}),s.jsx(Ks,{className:"w-3 h-3 ml-1"})]})]})}),s.jsx("div",{className:"relative",children:s.jsxs("div",{className:`relative px-3 py-1 rounded-full text-xs font-medium border cursor-pointer ${m.color} bg-gray-800/50`,children:[s.jsxs("select",{value:a,onChange:x=>i(x.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",children:[s.jsx("option",{value:"low",children:"Thp"}),s.jsx("option",{value:"normal",children:"Bnh thng"}),s.jsx("option",{value:"high",children:"Cao"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:m.label}),s.jsx(Ks,{className:"w-3 h-3 ml-1"})]})]})})]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${g.color}`,children:g.label}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${m.color}`,children:m.label})]})},H1="https://fnakxavwxubnbucfoujd.supabase.co",B1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZuYWt4YXZ3eHVibmJ1Y2ZvdWpkIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1MDU4NjY2MSwiZXhwIjoyMDY2MTYyNjYxfQ.Xwa7Zz2pgg9wp-pqukoGSKy2IMg11kExKolbrBSQfAM",Xi=Sx(H1,B1,{auth:{autoRefreshToken:!1,persistSession:!1}});class q1{constructor(){this.BUCKET_NAME="task-attachments"}get storage(){return Xi.storage}async uploadFile(a,n){try{const{data:i,error:c}=await Xi.storage.from(this.BUCKET_NAME).upload(a,n,{cacheControl:"3600",upsert:!1});return c?(console.error("Storage upload error:",c),{success:!1,error:c.message}):{success:!0,data:i}}catch(i){return console.error("Upload error:",i),{success:!1,error:"Upload failed"}}}async getSignedUrl(a,n=3600){try{const{data:i,error:c}=await Xi.storage.from(this.BUCKET_NAME).createSignedUrl(a,n);return c?(console.error("Signed URL error:",c),null):i.signedUrl}catch(i){return console.error("Signed URL error:",i),null}}async deleteFile(a){try{const{error:n}=await Xi.storage.from(this.BUCKET_NAME).remove([a]);return n?(console.error("Delete error:",n),{success:!1,error:n.message}):{success:!0}}catch(n){return console.error("Delete error:",n),{success:!1,error:"Delete failed"}}}}const Zi=new q1;class z1{constructor(){this.BUCKET_NAME="task-attachments",this.MAX_FILE_SIZE=50*1024*1024,this.ALLOWED_TYPES=["image/jpeg","image/png","image/gif","image/webp","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain","text/csv"]}validateFile(a){return a.size>this.MAX_FILE_SIZE?{valid:!1,error:"File size exceeds 50MB limit"}:this.ALLOWED_TYPES.includes(a.type)?{valid:!0}:{valid:!1,error:"File type not allowed"}}generateFilePath(a,n,i){const c=Date.now(),u=n.replace(/[^a-zA-Z0-9.-]/g,"_");return`tasks/${a}/${i}/${c}_${u}`}async uploadAttachment(a){try{const n=Ge();if(!n)return{success:!1,error:"User not authenticated"};const i=this.validateFile(a.file);if(!i.valid)return{success:!1,error:i.error};const c=this.generateFilePath(a.taskId,a.file.name,n.id),{data:u,error:h}=await Zi.storage.from(this.BUCKET_NAME).upload(c,a.file,{cacheControl:"3600",upsert:!1});if(h)return console.error("Storage upload error:",h),{success:!1,error:"Failed to upload file to storage"};const{data:g,error:m}=await te.from("task_attachments").insert({task_id:a.taskId,file_name:a.file.name,file_path:c,file_size:a.file.size,file_type:a.file.type,uploaded_by:n.id}).select().single();return m?(console.error("Database insert error:",m),await Zi.storage.from(this.BUCKET_NAME).remove([c]),{success:!1,error:"Failed to save attachment record"}):{success:!0,attachment:g}}catch(n){return console.error("Upload attachment error:",n),{success:!1,error:"Unexpected error during upload"}}}async getTaskAttachments(a){try{const{data:n,error:i}=await te.from("task_attachments").select("*").eq("task_id",a).order("created_at",{ascending:!1});if(i)throw console.error("Error fetching attachments:",i),new Error("Failed to fetch attachments");return n||[]}catch(n){throw console.error("Get task attachments error:",n),n}}async getAttachmentUrl(a,n=3600){try{const{data:i,error:c}=await Zi.storage.from(this.BUCKET_NAME).createSignedUrl(a,n);return c?(console.error("Error creating signed URL:",c),null):i.signedUrl}catch(i){return console.error("Get attachment URL error:",i),null}}async deleteAttachment(a){try{const n=Ge();if(!n)return{success:!1,error:"User not authenticated"};const{data:i,error:c}=await te.from("task_attachments").select("*").eq("id",a).single();if(c||!i)return{success:!1,error:"Attachment not found"};if(i.uploaded_by!==n.id)return{success:!1,error:"Not authorized to delete this attachment"};const{error:u}=await Zi.storage.from(this.BUCKET_NAME).remove([i.file_path]);u&&console.error("Storage delete error:",u);const{error:h}=await te.from("task_attachments").delete().eq("id",a);return h?(console.error("Database delete error:",h),{success:!1,error:"Failed to delete attachment record"}):{success:!0}}catch(n){return console.error("Delete attachment error:",n),{success:!1,error:"Unexpected error during deletion"}}}getFileTypeIcon(a){return a.startsWith("image/")?"":a==="application/pdf"?"":a.includes("word")?"":a.includes("excel")||a.includes("spreadsheet")?"":a.startsWith("text/")?"":""}formatFileSize(a){if(a===0)return"0 Bytes";const n=1024,i=["Bytes","KB","MB","GB"],c=Math.floor(Math.log(a)/Math.log(n));return parseFloat((a/Math.pow(n,c)).toFixed(2))+" "+i[c]}isImageFile(a){return a.startsWith("image/")}}const ps=new z1,$1=({taskId:l,onAttachmentsChange:a})=>{const[n,i]=b.useState([]),[c,u]=b.useState(!1),[h,g]=b.useState(!0),[m,x]=b.useState(!1),[p,v]=b.useState(null),[j,N]=b.useState(null),[S,_]=b.useState(!0),D=b.useRef(null);b.useEffect(()=>{M()},[l]);const M=async()=>{try{g(!0);const J=await ps.getTaskAttachments(l);i(J),a?.(J)}catch(J){console.error("Error loading attachments:",J)}finally{g(!1)}},E=J=>{J&&Array.from(J).forEach(ne=>{C(ne)})},C=async J=>{try{u(!0);const ne=await ps.uploadAttachment({taskId:l,file:J});ne.success&&ne.attachment?(i(je=>[ne.attachment,...je]),a?.([ne.attachment,...n])):alert(ne.error||"Failed to upload file")}catch(ne){console.error("Upload error:",ne),alert("Failed to upload file")}finally{u(!1)}},G=async J=>{if(confirm("Bn c chc mun xa file ny?"))try{const ne=await ps.deleteAttachment(J);if(ne.success){const je=n.filter(se=>se.id!==J);i(je),a?.(je)}else alert(ne.error||"Failed to delete file")}catch(ne){console.error("Delete error:",ne),alert("Failed to delete file")}},z=async J=>{if(!ps.isImageFile(J.file_type)){H(J);return}try{const ne=await ps.getAttachmentUrl(J.file_path);ne&&(v(ne),N(J))}catch(ne){console.error("Preview error:",ne)}},H=async J=>{try{const ne=await ps.getAttachmentUrl(J.file_path);if(ne){const je=document.createElement("a");je.href=ne,je.download=J.file_name,document.body.appendChild(je),je.click(),document.body.removeChild(je)}}catch(ne){console.error("Download error:",ne)}},O=J=>{J.preventDefault(),x(!0)},X=J=>{J.preventDefault(),x(!1)},ie=J=>{J.preventDefault(),x(!1),E(J.dataTransfer.files)},Q=J=>J.startsWith("image/")?s.jsx(b2,{className:"w-4 h-4"}):J==="application/pdf"?s.jsx(u2,{className:"w-4 h-4"}):s.jsx(Qu,{className:"w-4 h-4"});return h?s.jsxs("div",{className:"bg-white/5 rounded-2xl border border-gray-700/30 p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-8 h-8 bg-purple-500/20 rounded-full flex items-center justify-center",children:s.jsx(Qu,{className:"w-4 h-4 text-purple-400"})}),s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Tp nh km"})]}),s.jsx("div",{className:"text-center py-8 text-gray-400",children:"ang ti..."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white/5 rounded-2xl border border-gray-700/30",children:[s.jsx("div",{className:"p-4 border-b border-gray-700/20",children:s.jsxs("button",{onClick:()=>_(!S),className:"w-full flex items-center justify-between hover:bg-gray-800/30 rounded-lg p-2 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-6 h-6 bg-purple-500/20 rounded-full flex items-center justify-center",children:s.jsx(Qu,{className:"w-3 h-3 text-purple-400"})}),s.jsx("h3",{className:"text-base font-medium text-white",children:"Tp nh km"}),s.jsxs("span",{className:"text-xs text-gray-400",children:["(",n.length,")"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[n.length>0&&!S&&s.jsx("span",{className:"text-xs text-gray-500",children:"Ty chn"}),S?s.jsx(Ks,{className:"w-4 h-4 text-gray-400"}):s.jsx(dd,{className:"w-4 h-4 text-gray-400"})]})]})}),S&&n.length>0&&s.jsx("div",{className:"px-4 pb-3",children:s.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-4",children:[s.jsxs("span",{children:[n.length," tp nh km"]}),s.jsx("span",{children:""}),s.jsx("span",{children:"Click  xem chi tit"})]})}),!S&&s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:`border-2 border-dashed rounded-xl p-6 text-center transition-colors ${m?"border-purple-400 bg-purple-500/10":"border-gray-600 hover:border-gray-500"}`,onDragOver:O,onDragLeave:X,onDrop:ie,children:[s.jsx(Rx,{className:"w-8 h-8 text-gray-400 mx-auto mb-3"}),s.jsxs("p",{className:"text-gray-300 mb-2",children:["Ko th file vo y hoc"," ",s.jsx("button",{onClick:()=>D.current?.click(),className:"text-purple-400 hover:text-purple-300 underline",disabled:c,children:"chn file"})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"H tr: nh, PDF, Word, Excel, Text (ti a 50MB)"}),c&&s.jsxs("div",{className:"mt-3",children:[s.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-purple-500 h-2 rounded-full animate-pulse w-1/2"})}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"ang ti ln..."})]})]}),s.jsx("input",{ref:D,type:"file",multiple:!0,className:"hidden",onChange:J=>E(J.target.files),accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx,.txt,.csv"}),n.length>0&&s.jsx("div",{className:"mt-6 space-y-3",children:n.map(J=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-800/30 rounded-lg border border-gray-700/20 hover:bg-gray-800/50 transition-colors",children:[s.jsx("div",{className:"text-gray-400",children:Q(J.file_type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-white font-medium truncate",children:J.file_name}),s.jsxs("p",{className:"text-xs text-gray-400",children:[ps.formatFileSize(J.file_size),"  "," ",new Date(J.created_at).toLocaleDateString("vi-VN")]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>z(J),className:"p-2 text-gray-400 hover:text-blue-400 hover:bg-blue-500/10 rounded-lg transition-colors",title:ps.isImageFile(J.file_type)?"Xem trc":"Ti xung",children:ps.isImageFile(J.file_type)?s.jsx(Ed,{className:"w-4 h-4"}):s.jsx(a2,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>G(J.id),className:"p-2 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",title:"Xa",children:s.jsx(Fa,{className:"w-4 h-4"})})]})]},J.id))})]})]}),p&&j&&s.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[s.jsx("button",{onClick:()=>{v(null),N(null)},className:"absolute -top-12 right-0 text-white hover:text-gray-300 transition-colors",children:s.jsx(et,{className:"w-8 h-8"})}),s.jsx("img",{src:p,alt:j.file_name,className:"max-w-full max-h-full object-contain rounded-lg"}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white p-4 rounded-b-lg",children:[s.jsx("p",{className:"font-medium",children:j.file_name}),s.jsx("p",{className:"text-sm text-gray-300",children:ps.formatFileSize(j.file_size)})]})]})})]})};class P1{async createChecklistItem(a){try{if(!Ge())throw new Error("User not authenticated");const{data:i,error:c}=await te.from("tasks").select("id").eq("id",a.taskId).single();if(c||!i)throw new Error("Task not found");let u=a.orderIndex;if(u===void 0){const{data:m}=await te.from("task_checklist_items").select("order_index").eq("task_id",a.taskId).order("order_index",{ascending:!1}).limit(1).single();u=m?m.order_index+1:0}const{data:h,error:g}=await te.from("task_checklist_items").insert({task_id:a.taskId,title:a.title,order_index:u}).select().single();if(g)throw console.error("Error creating checklist item:",g),new Error("Failed to create checklist item");return h}catch(n){throw console.error("Create checklist item error:",n),n}}async getTaskChecklistItems(a){try{const{data:n,error:i}=await te.from("task_checklist_items").select("*").eq("task_id",a).order("order_index",{ascending:!0});if(i)throw console.error("Error fetching checklist items:",i),new Error("Failed to fetch checklist items");return n||[]}catch(n){throw console.error("Get task checklist items error:",n),n}}async updateChecklistItem(a){try{const{data:n,error:i}=await te.from("task_checklist_items").select("id").eq("id",a.id).single();if(i||!n)throw new Error("Checklist item not found");const c={};a.title!==void 0&&(c.title=a.title),a.isCompleted!==void 0&&(c.is_completed=a.isCompleted),a.orderIndex!==void 0&&(c.order_index=a.orderIndex);const{data:u,error:h}=await te.from("task_checklist_items").update(c).eq("id",a.id).select().single();if(h)throw console.error("Error updating checklist item:",h),new Error("Failed to update checklist item");return u}catch(n){throw console.error("Update checklist item error:",n),n}}async deleteChecklistItem(a){try{const{data:n,error:i}=await te.from("task_checklist_items").select("id").eq("id",a).single();if(i||!n)throw new Error("Checklist item not found");const{error:c}=await te.from("task_checklist_items").delete().eq("id",a);if(c)throw console.error("Error deleting checklist item:",c),new Error("Failed to delete checklist item")}catch(n){throw console.error("Delete checklist item error:",n),n}}async reorderChecklistItems(a,n){try{const{data:i,error:c}=await te.from("tasks").select("id").eq("id",a).single();if(c||!i)throw new Error("Task not found");const u=n.map((h,g)=>te.from("task_checklist_items").update({order_index:g}).eq("id",h).eq("task_id",a));await Promise.all(u)}catch(i){throw console.error("Reorder checklist items error:",i),i}}async getChecklistProgress(a){try{const{data:n,error:i}=await te.rpc("get_task_checklist_progress",{task_uuid:a});if(i)throw console.error("Error getting checklist progress:",i),new Error("Failed to get checklist progress");return n||{total:0,completed:0,percentage:0}}catch(n){console.error("Get checklist progress error:",n);try{const i=await this.getTaskChecklistItems(a),c=i.length,u=i.filter(g=>g.is_completed).length,h=c>0?Math.round(u/c*100):0;return{total:c,completed:u,percentage:h}}catch(i){return console.error("Fallback progress calculation error:",i),{total:0,completed:0,percentage:0}}}}async toggleChecklistItem(a){try{const{data:n,error:i}=await te.from("task_checklist_items").select("is_completed").eq("id",a).single();if(i||!n)throw new Error("Checklist item not found");return await this.updateChecklistItem({id:a,isCompleted:!n.is_completed})}catch(n){throw console.error("Toggle checklist item error:",n),n}}async bulkUpdateChecklistItems(a){try{return await Promise.all(a.map(i=>this.updateChecklistItem(i)))}catch(n){throw console.error("Bulk update checklist items error:",n),n}}}const Ga=new P1,K1=({taskId:l,onProgressChange:a})=>{const[n,i]=b.useState([]),[c,u]=b.useState({total:0,completed:0,percentage:0}),[h,g]=b.useState(!0),[m,x]=b.useState(""),[p,v]=b.useState(null),[j,N]=b.useState(""),[S,_]=b.useState(!1),[D,M]=b.useState(null),[E,C]=b.useState(""),[G,z]=b.useState(""),H=b.useRef(null),O=b.useRef(null);b.useEffect(()=>{X()},[l]),b.useEffect(()=>{S&&H.current&&H.current.focus()},[S]),b.useEffect(()=>{!h&&n.length===0&&!S&&_(!0)},[h,n.length,S]),b.useEffect(()=>{p&&O.current&&O.current.focus()},[p]);const X=async()=>{try{g(!0);const[R,W]=await Promise.all([Ga.getTaskChecklistItems(l),Ga.getChecklistProgress(l)]);i(R),u(W),a?.(W)}catch(R){console.error("Error loading checklist:",R)}finally{g(!1)}},ie=async()=>{try{const R=await Ga.getChecklistProgress(l);u(R),a?.(R)}catch(R){console.error("Error updating progress:",R)}},Q=async()=>{if(m.trim())try{const R=await Ga.createChecklistItem({taskId:l,title:m.trim()});i(W=>[...W,R]),x(""),_(!1),ie()}catch(R){console.error("Error adding item:",R),alert("Khng th thm mc mi")}},J=async R=>{try{const W=await Ga.toggleChecklistItem(R);i(re=>re.map(ue=>ue.id===R?W:ue)),ie()}catch(W){console.error("Error toggling item:",W),alert("Khng th cp nht trng thi")}},ne=async R=>{if(j.trim())try{const W=await Ga.updateChecklistItem({id:R,title:j.trim()});i(re=>re.map(ue=>ue.id===R?W:ue)),v(null),N("")}catch(W){console.error("Error editing item:",W),alert("Khng th cp nht mc")}},je=async R=>{if(confirm("Bn c chc mun xa mc ny?"))try{await Ga.deleteChecklistItem(R),i(W=>W.filter(re=>re.id!==R)),ie()}catch(W){console.error("Error deleting item:",W),alert("Khng th xa mc")}},se=R=>{v(R.id),N(R.title)},oe=()=>{v(null),N("")},L=R=>{M(R.id),C(""),z("")},I=()=>{M(null),C(""),z("")},ae=async()=>{if(!D||!E){alert("Vui lng chn ngy");return}try{const R=n.find(W=>W.id===D);if(!R)return;console.log(" Scheduling checklist item:",{itemId:D,itemTitle:R.title,scheduleDate:E,scheduleTime:G}),await is.createScheduledChecklistItem({itemTitle:R.title,parentTaskId:l,checklistItemId:D,scheduledDate:E,scheduledTime:G||void 0}),alert(`  ln lch "${R.title}" vo ${E} ${G||""}`),I()}catch(R){console.error("Error scheduling checklist item:",R),alert(" Khng th ln lch. Vui lng th li.")}},ve=()=>{const R=new Date;return R.setDate(R.getDate()+1),R.toISOString().split("T")[0]},T=()=>{_(!1),x("")};return h?s.jsxs("div",{className:"bg-white/5 rounded-2xl border border-gray-700/30 p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-8 h-8 bg-green-500/20 rounded-full flex items-center justify-center",children:s.jsx(Yu,{className:"w-4 h-4 text-green-400"})}),s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Danh sch cng vic con"})]}),s.jsx("div",{className:"text-center py-8 text-gray-400",children:"ang ti..."})]}):s.jsxs("div",{className:"bg-white/5 rounded-2xl border border-gray-700/30",children:[s.jsxs("div",{className:"p-6 border-b border-gray-700/20",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-green-500/20 rounded-full flex items-center justify-center",children:s.jsx(Yu,{className:"w-4 h-4 text-green-400"})}),s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Danh sch cng vic con"}),s.jsxs("span",{className:"text-sm text-gray-400",children:["(",c.completed,"/",c.total,")"]})]}),s.jsxs("button",{onClick:()=>_(!0),className:"flex items-center gap-2 px-3 py-2 bg-green-500/20 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors",children:[s.jsx(Ya,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"Thm mc"})]})]}),c.total>0&&s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400 mb-2",children:[s.jsx("span",{children:"Tin  hon thnh"}),s.jsxs("span",{children:[c.percentage,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${c.percentage}%`}})})]})]}),s.jsxs("div",{className:"p-6",children:[S&&s.jsx("div",{className:"mb-4 p-3 bg-gray-800/30 rounded-lg border border-gray-700/20",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(jg,{className:"w-5 h-5 text-gray-400"}),s.jsx("input",{ref:H,type:"text",value:m,onChange:R=>x(R.target.value),placeholder:"Nhp ni dung cng vic con...",className:"flex-1 bg-transparent text-white placeholder-gray-400 border-none outline-none",onKeyDown:R=>{R.key==="Enter"&&Q(),R.key==="Escape"&&T()}}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:Q,className:"p-1 text-green-400 hover:text-green-300 transition-colors",title:"Lu",children:s.jsx(jl,{className:"w-4 h-4"})}),s.jsx("button",{onClick:T,className:"p-1 text-gray-400 hover:text-gray-300 transition-colors",title:"Hy",children:s.jsx(et,{className:"w-4 h-4"})})]})]})}),n.length>0?s.jsx("div",{className:"space-y-2",children:n.map(R=>s.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition-colors ${R.is_completed?"bg-green-500/10 border-green-500/20":"bg-gray-800/30 border-gray-700/20 hover:bg-gray-800/50"}`,children:[s.jsx(p2,{className:"w-4 h-4 text-gray-500 cursor-grab"}),s.jsx("button",{onClick:()=>J(R.id),className:`flex-shrink-0 transition-colors ${R.is_completed?"text-green-400 hover:text-green-300":"text-gray-400 hover:text-gray-300"}`,children:R.is_completed?s.jsx(Yu,{className:"w-5 h-5"}):s.jsx(jg,{className:"w-5 h-5"})}),s.jsx("div",{className:"flex-1 min-w-0",children:p===R.id?s.jsx("input",{ref:O,type:"text",value:j,onChange:W=>N(W.target.value),className:"w-full bg-transparent text-white border-none outline-none",onKeyDown:W=>{W.key==="Enter"&&ne(R.id),W.key==="Escape"&&oe()}}):s.jsx("span",{className:`${R.is_completed?"text-gray-400 line-through":"text-white"}`,children:R.title})}),s.jsx("div",{className:"flex items-center gap-1",children:p===R.id?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>ne(R.id),className:"p-1 text-green-400 hover:text-green-300 transition-colors",title:"Lu",children:s.jsx(jl,{className:"w-4 h-4"})}),s.jsx("button",{onClick:oe,className:"p-1 text-gray-400 hover:text-gray-300 transition-colors",title:"Hy",children:s.jsx(et,{className:"w-4 h-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>L(R),className:"p-1 text-gray-400 hover:text-purple-400 transition-colors",title:"Ln lch",children:s.jsx(Bt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>se(R),className:"p-1 text-gray-400 hover:text-blue-400 transition-colors",title:"Sa",children:s.jsx(en,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>je(R.id),className:"p-1 text-gray-400 hover:text-red-400 transition-colors",title:"Xa",children:s.jsx(Fa,{className:"w-4 h-4"})})]})})]},R.id))}):null]}),D&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-800 rounded-2xl border border-gray-700 p-6 w-full max-w-md mx-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[s.jsx(Bt,{className:"w-5 h-5 text-purple-400"}),"Ln lch cng vic con"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Cng vic"}),s.jsx("div",{className:"p-3 bg-gray-700/50 rounded-lg text-white",children:n.find(R=>R.id===D)?.title})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Chn ngy *"}),s.jsx("input",{type:"date",value:E,onChange:R=>C(R.target.value),min:ve(),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-purple-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Chn gi (ty chn)"}),s.jsx("input",{type:"time",value:G,onChange:R=>z(R.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-purple-500 focus:outline-none"})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:ae,disabled:!E,className:"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Lu lch"}),s.jsx("button",{onClick:I,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Hy"})]})]})})]})},G1=({isOpen:l,onClose:a,task:n,onEdit:i,onDelete:c,onUpdate:u})=>{const[h,g]=b.useState([]),[m,x]=b.useState({total:0,completed:0,percentage:0}),[p,v]=b.useState(!1),[j,N]=b.useState(!1),[S,_]=b.useState({name:"",description:"",priority:"normal",status:"new-requests",dueDate:""});b.useEffect(()=>{n&&_({name:n.name||"",description:n.description||"",priority:n.priority||"normal",status:n.status||"new-requests",dueDate:n.dueDate||""})},[n]),b.useEffect(()=>{if(l)return document.body.classList.add("modal-open"),()=>{document.body.classList.remove("modal-open")}},[l]),b.useEffect(()=>{const Q=J=>{j&&(J.ctrlKey||J.metaKey)&&J.key==="s"&&(J.preventDefault(),C()),j&&J.key==="Escape"&&(J.preventDefault(),E())};if(l)return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[j,l]);const D=Q=>{g(Q)},M=Q=>{x(Q)},E=()=>{j&&n&&_({name:n.name||"",description:n.description||"",priority:n.priority||"normal",status:n.status||"new-requests",dueDate:n.dueDate||""}),N(!j)},C=async()=>{if(n&&u)try{await u({...n,...S,id:n.id}),N(!1)}catch(Q){console.error("Failed to save task:",Q)}},G=(Q,J)=>{_(ne=>({...ne,[Q]:J}))};if(!l||!n)return null;console.log("TaskDetailModal task data:",{id:n.id,name:n.name,startDate:n.startDate,createdAt:n.createdAt,dueDate:n.dueDate});const z=[{value:"other",label:"Cng vic khc",icon:qs,color:"bg-gray-500"},{value:"sbg-new",label:"SBG mi",icon:qs,color:"bg-blue-500"},{value:"sbg-old",label:"SBG c",icon:qs,color:"bg-blue-400"},{value:"partner-new",label:"i tc mi",icon:qt,color:"bg-green-500"},{value:"partner-old",label:"i tc c",icon:qt,color:"bg-green-400"},{value:"kts-new",label:"KTS mi",icon:vs,color:"bg-purple-500"},{value:"kts-old",label:"KTS c",icon:vs,color:"bg-purple-400"},{value:"customer-new",label:"Khch hng mi",icon:$s,color:"bg-orange-500"},{value:"customer-old",label:"Khch hng c",icon:$s,color:"bg-orange-400"}],H=Q=>z.find(J=>J.value===Q)||z[0],O=Q=>{if(console.log("TaskDetailModal formatDate input:",Q),!Q)return"N/A";try{const J=new Date(Q);if(isNaN(J.getTime()))return console.log("Invalid date:",Q),"N/A";const ne=J.getDate().toString().padStart(2,"0"),je=(J.getMonth()+1).toString().padStart(2,"0");return`${ne} thg ${je}`}catch(J){return console.log("Date parsing error:",J,Q),"N/A"}},X=H(n.workType),ie=X.icon;return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",children:s.jsx("div",{className:"bg-[#1a1f2e] rounded-lg sm:rounded-2xl w-full max-w-2xl md:max-w-3xl lg:max-w-4xl max-h-[95vh] sm:max-h-[90vh] overflow-hidden shadow-2xl border border-gray-700/50 flex flex-col",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:`border-b border-gray-700 flex-shrink-0 ${j?"bg-gradient-to-r from-orange-600/20 to-yellow-600/20":"bg-gradient-to-r from-blue-600/10 to-purple-600/10"}`,children:s.jsxs("div",{className:"p-3 sm:p-4 md:p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 md:gap-4",children:[s.jsxs("div",{className:"flex items-center justify-between gap-3 md:gap-4 flex-1 min-w-0",children:[s.jsxs("div",{className:`inline-flex items-center gap-1 md:gap-2 px-2 md:px-3 py-1 rounded-full text-white text-xs font-medium ${X.color} flex-shrink-0`,children:[s.jsx(ie,{className:"w-3 h-3"}),s.jsx("span",{className:"hidden sm:inline",children:X.label})]}),j?s.jsx("input",{type:"text",value:S.name,onChange:Q=>G("name",Q.target.value),className:"text-base md:text-lg font-bold text-white bg-gray-800/50 border border-gray-600 rounded-lg px-3 py-1 flex-1 min-w-0 focus:border-blue-500 focus:outline-none",placeholder:"Tn cng vic..."}):s.jsx("h2",{className:"text-base md:text-lg font-bold text-white break-words leading-tight flex-1 min-w-0",children:n.name}),j&&s.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-orange-500/20 rounded-full border border-orange-500/30",children:[s.jsx(en,{className:"w-3 h-3 text-orange-400"}),s.jsx("span",{className:"text-xs text-orange-300 hidden sm:inline",children:"ang chnh sa"})]}),s.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors flex-shrink-0 md:hidden",children:s.jsx(et,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-2",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(L1,{status:j?S.status:n.status,priority:j?S.priority:n.priority,onStatusChange:Q=>G("status",Q),onPriorityChange:Q=>G("priority",Q),isEditMode:j})}),s.jsx("div",{className:"flex md:hidden items-center gap-1",children:j?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:C,className:"p-2 text-gray-400 hover:text-green-400 hover:bg-green-500/10 rounded-lg transition-colors",title:"Lu",children:s.jsx(Nl,{className:"w-4 h-4"})}),s.jsx("button",{onClick:E,className:"p-2 text-gray-400 hover:text-gray-300 hover:bg-gray-700 rounded-lg transition-colors",title:"Hy",children:s.jsx(et,{className:"w-4 h-4"})})]}):s.jsx("button",{onClick:E,className:"p-2 text-gray-400 hover:text-blue-400 hover:bg-blue-500/10 rounded-lg transition-colors",title:"Chnh sa",children:s.jsx(en,{className:"w-4 h-4"})})}),s.jsxs("div",{className:"hidden md:flex items-center gap-1 flex-shrink-0",children:[j?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:C,className:"p-2 text-gray-400 hover:text-green-400 hover:bg-green-500/10 rounded-lg transition-colors",title:"Lu thay i",children:s.jsx(Nl,{className:"w-4 h-4"})}),s.jsx("button",{onClick:E,className:"p-2 text-gray-400 hover:text-gray-300 hover:bg-gray-700 rounded-lg transition-colors",title:"Hy",children:s.jsx(et,{className:"w-4 h-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:E,className:"p-2 text-gray-400 hover:text-blue-400 hover:bg-blue-500/10 rounded-lg transition-colors",title:"Chnh sa",children:s.jsx(en,{className:"w-4 h-4"})}),s.jsx("button",{onClick:c,className:"p-2 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",title:"Xa",children:s.jsx(Fa,{className:"w-4 h-4"})})]}),s.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(et,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{className:"task-detail-meta-mobile mt-2 md:mt-3",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Bt,{className:"w-3 h-3 text-green-400"}),s.jsx("span",{className:"hidden sm:inline",children:"Bt u: "}),s.jsx("span",{children:O(n.startDate||n.createdAt||new Date().toISOString())})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(qt,{className:"w-3 h-3 text-blue-400"}),s.jsx("span",{className:"hidden sm:inline",children:"To bi: "}),s.jsx("span",{children:n.createdBy?.name||"Khng xc nh"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx($s,{className:"w-3 h-3 text-purple-400"}),s.jsx("span",{className:"hidden sm:inline",children:"Thc hin: "}),s.jsx("span",{children:n.assignedTo?.name||"Cha phn cng"})]}),(n.dueDate||j)&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Bt,{className:"w-3 h-3 text-red-400"}),s.jsx("span",{className:"hidden sm:inline",children:"Hn cht: "}),j?s.jsx("input",{type:"date",value:S.dueDate?S.dueDate.split("T")[0]:"",onChange:Q=>G("dueDate",Q.target.value?Q.target.value+"T00:00:00.000Z":""),className:"bg-gray-800/50 border border-gray-600 rounded px-2 py-1 text-xs text-white focus:border-blue-500 focus:outline-none"}):s.jsx("span",{children:O(n.dueDate||"")})]}),m.total>0&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(vs,{className:"w-3 h-3 text-green-400"}),s.jsx("span",{className:"hidden sm:inline",children:"Checklist: "}),s.jsxs("span",{children:[m.completed,"/",m.total," (",m.percentage,"%)"]})]}),h.length>0&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(qs,{className:"w-3 h-3 text-purple-400"}),s.jsx("span",{className:"hidden sm:inline",children:"Tp nh km: "}),s.jsx("span",{children:h.length})]}),p&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Bt,{className:"w-3 h-3 text-blue-400"}),s.jsx("span",{children:" ln lch"})]})]})]})}),s.jsx("div",{className:"task-detail-scroll-mobile bg-gray-900/50 p-4 md:p-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto space-y-4 md:space-y-8",children:[s.jsxs("div",{className:"task-detail-section-mobile bg-white/5 rounded-xl md:rounded-2xl border border-gray-700/30",children:[s.jsx("div",{className:"p-4 md:p-6 border-b border-gray-700/20",children:s.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[s.jsx("div",{className:"w-6 h-6 md:w-8 md:h-8 bg-blue-500/20 rounded-full flex items-center justify-center",children:s.jsx(vs,{className:"w-3 h-3 md:w-4 md:h-4 text-blue-400"})}),s.jsx("h3",{className:"text-base md:text-lg font-semibold text-white",children:"Thng tin cng vic chi tit"})]})}),s.jsx("div",{className:"p-4 md:p-8 flex-1 flex flex-col",children:j?s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx("label",{className:"block text-white font-medium mb-2",children:"M t cng vic"}),s.jsx("textarea",{value:S.description,onChange:Q=>G("description",Q.target.value),className:"flex-1 min-h-[200px] p-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none resize-none",placeholder:"Nhp m t chi tit v cng vic..."})]}):s.jsx(s.Fragment,{children:n.description?s.jsx("div",{className:"prose prose-invert prose-sm md:prose-lg max-w-none flex-1",children:s.jsx("div",{className:"task-detail-text-mobile text-gray-200 leading-relaxed whitespace-pre-wrap font-normal h-full",children:n.description})}):s.jsxs("div",{className:"text-center py-8 md:py-16 flex-1 flex flex-col justify-center",children:[s.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-gray-700/30 rounded-full flex items-center justify-center mx-auto mb-3 md:mb-4",children:s.jsx(vs,{className:"w-6 h-6 md:w-8 md:h-8 text-gray-500"})}),s.jsx("p",{className:"text-gray-500 text-base md:text-lg",children:"Cha c m t chi tit"}),s.jsx("p",{className:"text-gray-600 text-xs md:text-sm mt-2",children:"Thm m t  cung cp thng tin chi tit v cng vic ny"})]})})})]}),s.jsx(K1,{taskId:n.id,onProgressChange:M}),s.jsx($1,{taskId:n.id,onAttachmentsChange:D})]})})]})})})},I1=({onFilterChange:l})=>{const[a,n]=b.useState({searchTerm:"",dateFilter:"all",workTypeFilter:"all",priorityFilter:"all"}),[i,c]=b.useState(!1),[u,h]=b.useState(!1),g=[{value:"all",label:"Tt c ngy"},{value:"today",label:"Hm nay"},{value:"yesterday",label:"Hm qua"},{value:"tomorrow",label:"Ngy mai"},{value:"last3days",label:"3 ngy trc"},{value:"last5days",label:"5 ngy trc"},{value:"last7days",label:"7 ngy trc"},{value:"next3days",label:"3 ngy ti"},{value:"next5days",label:"5 ngy ti"},{value:"next7days",label:"7 ngy ti"},{value:"thisWeek",label:"Tun ny"},{value:"thisMonth",label:"Thng ny"},{value:"thisYear",label:"Nm ny"},{value:"custom",label:"Ty chn"}],m=[{value:"all",label:"Tt c mc "},{value:"high",label:"u tin cao"},{value:"normal",label:"u tin bnh thng"},{value:"low",label:"u tin thp"}],x=[{value:"all",label:"Tt c loi cng vic"},...Object.entries(X2).map(([N,S])=>({value:N,label:S}))],p=N=>{const S={...a,...N};n(S),l(S)},v=()=>{const N={searchTerm:"",dateFilter:"all",workTypeFilter:"all",priorityFilter:"all"};n(N),l(N)},j=a.searchTerm||a.dateFilter!=="all"||a.workTypeFilter!=="all"||a.priorityFilter!=="all";return s.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-lg border border-gray-700/50 mb-4 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center gap-2 p-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Ox,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Tm kim...",value:a.searchTerm,onChange:N=>p({searchTerm:N.target.value}),className:"w-full pl-9 pr-3 py-2 bg-gray-700/50 border border-gray-600/50 rounded-lg text-white text-sm placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:bg-gray-700"})]}),s.jsxs("button",{onClick:()=>h(!u),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${j?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-gray-700/50 text-gray-300 border border-gray-600/50 hover:bg-gray-700"}`,children:[s.jsx(h2,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"B lc"}),j&&s.jsx("span",{className:"bg-blue-500 text-white text-xs px-1.5 py-0.5 rounded-full min-w-[18px] text-center",children:Object.values(a).filter(N=>N&&N!=="all").length}),u?s.jsx(dd,{className:"w-4 h-4"}):s.jsx(Ks,{className:"w-4 h-4"})]})]}),u&&s.jsxs("div",{className:"border-t border-gray-700/50 p-3 space-y-3 animate-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 text-xs mb-1",children:"Thi gian"}),s.jsx("select",{value:a.dateFilter,onChange:N=>p({dateFilter:N.target.value}),className:"w-full px-2 py-1.5 bg-gray-700/50 border border-gray-600/50 rounded text-white text-sm focus:border-blue-500 focus:outline-none",children:g.slice(0,8).map(N=>s.jsx("option",{value:N.value,children:N.label},N.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 text-xs mb-1",children:"Loi cng vic"}),s.jsx("select",{value:a.workTypeFilter,onChange:N=>p({workTypeFilter:N.target.value}),className:"w-full px-2 py-1.5 bg-gray-700/50 border border-gray-600/50 rounded text-white text-sm focus:border-blue-500 focus:outline-none",children:x.map(N=>s.jsx("option",{value:N.value,children:N.label},N.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 text-xs mb-1",children:"Mc  u tin"}),s.jsx("select",{value:a.priorityFilter,onChange:N=>p({priorityFilter:N.target.value}),className:"w-full px-2 py-1.5 bg-gray-700/50 border border-gray-600/50 rounded text-white text-sm focus:border-blue-500 focus:outline-none",children:m.map(N=>s.jsx("option",{value:N.value,children:N.label},N.value))})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 pt-2 border-t border-gray-700/30",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("button",{onClick:()=>c(!i),className:`flex items-center gap-1.5 px-2 py-1.5 rounded text-xs transition-colors ${i?"bg-blue-500/20 text-blue-400":"text-gray-400 hover:text-gray-300"}`,children:[s.jsx(Bt,{className:"w-3 h-3"}),"Nng cao",i?s.jsx(dd,{className:"w-3 h-3"}):s.jsx(Ks,{className:"w-3 h-3"})]})}),j&&s.jsxs("button",{onClick:v,className:"flex items-center gap-1.5 px-2 py-1.5 text-xs text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded transition-colors",children:[s.jsx(et,{className:"w-3 h-3"}),"Xa b lc"]})]}),i&&a.dateFilter==="custom"&&s.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t border-gray-700/30",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 text-xs mb-1",children:"T ngy"}),s.jsx("input",{type:"date",value:a.customDateRange?.start||"",onChange:N=>p({customDateRange:{...a.customDateRange,start:N.target.value,end:a.customDateRange?.end||""}}),className:"w-full px-2 py-1.5 bg-gray-700/50 border border-gray-600/50 rounded text-white text-sm focus:border-blue-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 text-xs mb-1",children:"n ngy"}),s.jsx("input",{type:"date",value:a.customDateRange?.end||"",onChange:N=>p({customDateRange:{...a.customDateRange,start:a.customDateRange?.start||"",end:N.target.value}}),className:"w-full px-2 py-1.5 bg-gray-700/50 border border-gray-600/50 rounded text-white text-sm focus:border-blue-500 focus:outline-none"})]})]})]})]})};function V1(l){if(!l)return null;try{const a={Th1:1,Th2:2,Th3:3,Th4:4,Th5:5,Th6:6,Th7:7,Th8:8,Th9:9,Th10:10,Th11:11,Th12:12,th1:1,th2:2,th3:3,th4:4,th5:5,th6:6,th7:7,th8:8,th9:9,th10:10,th11:11,th12:12},n=/^(\d{1,2})\s+(Th\d{1,2}),?\s+(\d{4})$/i,i=l.match(n);if(!i){const x=/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/,p=l.match(x);if(p){const v=parseInt(p[1],10),j=parseInt(p[2],10),N=parseInt(p[3],10),S=new Date(N,j-1,v);if(!isNaN(S.getTime()))return S}return null}const c=parseInt(i[1],10),u=i[2],h=parseInt(i[3],10),g=a[u];if(!g)return null;const m=new Date(h,g-1,c);return m.getFullYear()!==h||m.getMonth()!==g-1||m.getDate()!==c?null:m}catch{return null}}function Ji(l){if(!l||isNaN(l.getTime()))return"N/A";const a=l.getDate().toString().padStart(2,"0"),n=(l.getMonth()+1).toString().padStart(2,"0");return`${a} thg ${n}`}function Wi(l){if(!l)return null;const a=V1(l);if(a)return a;try{const n=new Date(l);if(!isNaN(n.getTime()))return n}catch{}return null}const Q1=({userRole:l,currentUser:a,onModalStateChange:n})=>{const i=(()=>{try{return Ge()}catch(K){return console.error(" TaskList: Error getting current user:",K),localStorage.getItem("auth_user")?{id:"unknown",name:"Unknown User",email:"unknown@email.com",team_id:"0",location:"H Ni",role:"employee",team:{id:"0",name:"Unknown Team",location:"HN"}}:(console.error(" No auth_user found in localStorage - user needs to login"),window.location.href="/login",null)}})();if(!i)return s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-gray-400",children:"ang chuyn hng n trang ng nhp..."})});Hx();const[c,u]=b.useState("my-tasks"),[h,g]=b.useState(l1(i)),[m,x]=b.useState(null),[p,v]=b.useState(!1),[j,N]=b.useState(!1),[S,_]=b.useState(!1),[D,M]=b.useState(!1);b.useEffect(()=>{n?.(p||j||S||D)},[p,j,S,D,n]);const[E,C]=b.useState(null),[G,z]=b.useState(null),[H,O]=b.useState([]),[X,ie]=b.useState(!1),[Q,J]=b.useState([]),[ne,je]=b.useState([]),[se,oe]=b.useState({searchTerm:"",dateFilter:"all",workTypeFilter:"all",priorityFilter:"all"}),[L,I]=b.useState(null),[ae,ve]=b.useState("all"),T=K=>{const le=new Date;return(K.dueDate?new Date(K.dueDate):new Date(K.startDate)).toDateString()===le.toDateString()&&K.status!=="live"};b.useEffect(()=>{i&&i.id&&i.id!=="unknown"?(R(),W()):(console.warn(" TaskList: User not authenticated, skipping task load"),O([]),ie(!1))},[c,h,m,i.id]);const R=async()=>{try{ie(!0),console.log(" Loading tasks for tab:",c),console.log(" Current user:",i?.name,i?.id),console.log(" Department tab:",h),console.log(" Selected team ID:",m);let K=[];switch(c){case"my-tasks":console.log(" Loading my tasks for user ID:",i?.id),i?.id?K=await is.getMyTasks(i.id):(console.error(" No user ID found"),K=[]),console.log(" My tasks loaded:",K.length,"tasks");break;case"team-tasks":const le=h==="hanoi"?"HN":"HCM";console.log(" Loading team tasks for location:",le,"team:",m),K=await is.getTeamTasks(m||void 0,le),console.log(" Team tasks loaded:",K.length,"tasks");break;case"department-tasks":const ee=h==="hanoi"?"HN":"HCM";console.log(" Loading department tasks for location:",ee),K=await is.getDepartmentTasks(ee),console.log(" Department tasks loaded:",K.length,"tasks");break;default:console.log(" Loading all tasks"),K=await is.getTasks(),console.log(" All tasks loaded:",K.length,"tasks")}console.log(" Setting tasks state with:",K.length,"tasks"),console.log(" Task IDs:",K.map(le=>le.id).slice(0,5)),O(K),console.log(" Tasks state updated successfully")}catch(K){console.error(" Error loading tasks:",K),console.error(" Error details:",K),O([])}finally{ie(!1)}},W=async()=>{try{const[K,le]=await Promise.all([te.from("teams").select("*").order("id"),te.from("users").select("*").order("name")]);if(K.error)throw K.error;if(le.error)throw le.error;J(K.data||[]),je(le.data||[])}catch(K){console.error("Error loading teams and users:",K)}},re=async K=>{try{ie(!0);const le=i?.id;if(!le)throw new Error("Khng tm thy thng tin ng nhp");console.log(" Creating task with data:",K),console.log(" Current tab:",c),console.log(" Current user:",i);const ee=await is.createTask({name:K.name,description:K.description,workTypes:K.workTypes,priority:K.priority,campaignType:K.campaignType,platform:K.platform,startDate:K.startDate,endDate:K.endDate,dueDate:K.dueDate,assignedToId:K.assignedTo?.id||le,department:K.department,createdAt:K.startDate?new Date(K.startDate).toISOString():new Date().toISOString(),shareScope:K.shareScope},le);console.log(" Task created successfully:",ee);let be=c;K.taggedUsers&&K.taggedUsers.length>0?c==="my-tasks"&&(be="my-tasks"):be="my-tasks",be!==c&&(console.log(` Switching from ${c} to ${be} to show new task`),u(be),await new Promise(He=>setTimeout(He,100))),await R();const ce=be==="my-tasks"?"Ca Ti":be==="team-tasks"?"Ca Nhm":"Ca Phng Ban";console.log(" Tasks reloaded, should be visible in tab:",be)}catch(le){console.error("Error creating task:",le),alert("Khng th to cng vic mi. Vui lng th li.")}finally{ie(!1)}},ue=K=>{const le=H.find(ee=>ee.id===K);le&&(C(le),N(!0))},me=async K=>{try{ie(!0),console.log(" Updating task with data:",K),await is.updateTask(K),Cg(K.id),await R()}catch(le){console.error(" Error updating task:",le),console.error(" Task data that failed:",K),alert("Khng th cp nht cng vic. Vui lng th li.")}finally{ie(!1)}},pe=K=>{const le=H.find(ee=>ee.id===K);le&&(z(le),_(!0))},mt=async()=>{if(G)try{ie(!0),console.log(" Deleting task:",G.id,G.name),await is.deleteTask(G.id),console.log(" Task deleted successfully from database"),Cg(G.id),console.log(" Reloading tasks after delete..."),await R(),console.log(" Tasks reloaded after delete")}catch(K){console.error(" Error deleting task:",K),alert("Khng th xa cng vic. Vui lng th li.")}finally{ie(!1),z(null),_(!1)}},Be=(K,le)=>K.filter(be=>{if(ae!=="all"&&be.status!==ae)return!1;if(le.searchTerm){const ce=le.searchTerm.toLowerCase();if(!(be.name.toLowerCase().includes(ce)||be.description?.toLowerCase().includes(ce)||be.createdBy?.name.toLowerCase().includes(ce)||be.assignedTo?.name.toLowerCase().includes(ce)))return!1}if(le.dateFilter!=="all"){const ce=new Date,He=new Date(be.startDate);switch(le.dateFilter){case"today":if(He.toDateString()!==ce.toDateString())return!1;break;case"week":const Ne=new Date(ce.getTime()-10080*60*1e3);if(He<Ne)return!1;break;case"month":const $t=new Date(ce.getTime()-720*60*60*1e3);if(He<$t)return!1;break}}return!(le.workTypeFilter!=="all"&&be.workType!==le.workTypeFilter||le.priorityFilter!=="all"&&be.priority!==le.priorityFilter)}).sort((be,ce)=>{const He={approved:0,"new-requests":1,live:2},Ne=He[be.status]-He[ce.status];if(Ne!==0)return Ne;const $t=new Date(be.createdAt||be.startDate).getTime();return new Date(ce.createdAt||ce.startDate).getTime()-$t}),zt=K=>[{id:"new-requests",name:"Cha tin hnh",status:"new-requests",isExpanded:!0,tasks:K.filter(ee=>ee.status==="new-requests")},{id:"approved",name:"ang tin hnh",status:"approved",isExpanded:!0,tasks:K.filter(ee=>ee.status==="approved")},{id:"live",name:" hon thnh",status:"live",isExpanded:!0,tasks:K.filter(ee=>ee.status==="live")}].sort((ee,be)=>{const ce=["new-requests","approved","live"];return ce.indexOf(ee.id)-ce.indexOf(be.id)}).filter(ee=>ee.tasks.length>0),us=Be(H,se),F=zt(us),Ee=c!=="team-tasks"?[]:Q.filter(ee=>ne.filter(ce=>ce.team_id===ee.id.toString()).some(ce=>ce.location===(h==="hanoi"?"H Ni":"H Ch Minh"))).sort((ee,be)=>{const ce=He=>{const Ne=He.match(/\d+/);return Ne?parseInt(Ne[0]):999};return ce(ee.name)-ce(be.name)}).map(ee=>{const be=ne.filter(Ne=>Ne.team_id===ee.id.toString()&&Ne.location===(h==="hanoi"?"H Ni":"H Ch Minh"));let ce=us.filter(Ne=>{const $t=ne.find(Gs=>Gs.name===Ne.assignedTo?.name),es=ne.find(Gs=>Gs.name===Ne.createdBy?.name);return $t&&$t.team_id===ee.id.toString()||es&&es.team_id===ee.id.toString()});if(L){const Ne=ne.find($t=>$t.id===L);if(console.log(" Member filter debug:",{selectedMemberId:L,selectedMember:Ne?.name,totalTeamTasks:ce.length}),Ne){const $t=ce.length;ce=ce.filter(es=>{const Gs=es.assignedTo?.name===Ne.name,ja=es.createdBy?.name===Ne.name,Na=Gs||ja;return console.log(` Task "${es.name}":`,{assignedTo:es.assignedTo?.name,createdBy:es.createdBy?.name,selectedMember:Ne.name,assignedMatch:Gs,createdMatch:ja,result:Na?"INCLUDED":"EXCLUDED"}),Na}),console.log(` Member filter result: ${$t} -> ${ce.length} tasks`)}}const He=[{id:"new-requests",name:"Cha tin hnh",status:"new-requests",isExpanded:!0,tasks:ce.filter(Ne=>Ne.status==="new-requests")},{id:"approved",name:"ang tin hnh",status:"approved",isExpanded:!0,tasks:ce.filter(Ne=>Ne.status==="approved")},{id:"live",name:" hon thnh",status:"live",isExpanded:!0,tasks:ce.filter(Ne=>Ne.status==="live")}].filter(Ne=>Ne.tasks.length>0);return{id:ee.id.toString(),name:ee.name,members:be,taskGroups:He,totalTasks:ce.length}}),Ce=K=>{C(K),M(!0)},Re=()=>{M(!1),N(!0)},tt=()=>{M(!1),E&&(z(E),_(!0))},Wa=K=>{I(L===K?null:K)},ba=K=>{u(K),I(null)},er=()=>{const K=[{id:"my-tasks",label:"Ca Ti"},{id:"team-tasks",label:"Ca Nhm"},{id:"department-tasks",label:"Cng vic chung"}];return s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[s.jsx("nav",{className:"mobile-tab-nav",children:K.map(le=>{const ee=c===le.id;return s.jsx("button",{onClick:()=>ba(le.id),className:`
                  relative transition-all duration-300
                  ${ee?"text-white bg-gradient-to-r from-cyan-600 to-blue-700 shadow-md":"text-gray-300 hover:text-white hover:bg-gray-700/50"}
                `,children:le.label},le.id)})}),s.jsxs("button",{onClick:()=>{"vibrate"in navigator&&navigator.vibrate(50);try{const le=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT");le.volume=.05,le.play().catch(()=>{})}catch{}v(!0)},className:`
            premium-create-button
            ${X?"premium-loading":""}
            group relative overflow-hidden
            flex items-center justify-center gap-3
            px-6 py-3
            border-0
            text-white font-bold
            text-sm
            rounded-2xl
            transition-all duration-500 ease-out
            shadow-2xl hover:shadow-blue-500/30
            transform hover:scale-105 active:scale-95
            w-full lg:w-auto
            min-w-[160px]
            disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none
            focus:outline-none focus:ring-4 focus:ring-blue-500/50
          `,disabled:X,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400/30 via-purple-400/30 to-cyan-400/30 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),s.jsx("div",{className:"relative z-10 flex items-center justify-center w-5 h-5",children:X?s.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):s.jsx("svg",{className:"premium-icon w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})}),s.jsx("span",{className:"premium-text relative z-10",children:X?"ang x l...":"To cng vic"}),s.jsxs("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:[s.jsx("div",{className:"absolute top-2 left-4 w-1 h-1 bg-white/60 rounded-full animate-ping",style:{animationDelay:"0s"}}),s.jsx("div",{className:"absolute top-4 right-6 w-1 h-1 bg-white/40 rounded-full animate-ping",style:{animationDelay:"0.5s"}}),s.jsx("div",{className:"absolute bottom-3 left-8 w-1 h-1 bg-white/50 rounded-full animate-ping",style:{animationDelay:"1s"}}),s.jsx("div",{className:"absolute bottom-2 right-4 w-1 h-1 bg-white/30 rounded-full animate-ping",style:{animationDelay:"1.5s"}})]})]})]})},wa=K=>{g(K),I(null)},yo=()=>c!=="department-tasks"&&c!=="team-tasks"||!i1(i.role)?null:s.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[s.jsx("span",{className:"text-xs text-gray-400 font-medium uppercase tracking-wider",children:"Khu vc:"}),s.jsxs("div",{className:"flex items-center gap-1 p-0.5 bg-gray-900/80 backdrop-blur-md rounded-full shadow",children:[s.jsx("button",{onClick:()=>wa("hanoi"),className:`
              px-3 py-1.5 text-xs font-medium rounded-full
              transition-all duration-300
              ${h==="hanoi"?"text-blue-400 bg-blue-900/50 shadow-inner ":"text-gray-300 hover:text-white hover:bg-gray-700"}
            `,children:"H Ni"}),s.jsx("button",{onClick:()=>wa("hcm"),className:`
              px-3 py-1.5 text-xs font-medium rounded-full
              transition-all duration-300
              ${h==="hcm"?"text-blue-400 bg-blue-900/50 shadow-inner":"text-gray-300 hover:text-white hover:bg-gray-700"}
            `,children:"H Ch Minh"})]})]});return s.jsxs("div",{className:"relative mobile-scroll-container mobile-safe-container",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 opacity-50"}),s.jsxs("div",{className:"relative space-y-4 md:space-y-6 mobile-text-optimize",children:[s.jsxs("div",{className:"mobile-header-container",children:[er(),yo()]}),s.jsx("div",{className:"mobile-task-container bg-gray-900/80 backdrop-blur-md rounded-lg shadow",children:s.jsx(I1,{onFilterChange:oe})}),s.jsx(U1,{tasks:H,activeFilter:ae,onFilterChange:ve,compact:!1}),c==="team-tasks"&&Ee.length>0&&Yi(i.role)&&s.jsx("div",{className:"mb-4",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:Ee.map(K=>{const le=m===K.id;return s.jsx("button",{onClick:()=>x(le?null:K.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${le?"bg-blue-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700 hover:text-white border border-gray-700"}`,children:K.name},K.id)})})}),s.jsx("div",{className:"space-y-3 md:space-y-4",children:c==="team-tasks"?Ee.length===0?s.jsx("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-8 text-center",children:s.jsxs("div",{className:"text-gray-400",children:["Khng c nhm no ti ",h==="hanoi"?"H Ni":"H Ch Minh"]})}):m||!Yi(i.role)?(()=>{let K;return m?K=Ee.find(le=>le.id===m):Yi(i.role)||(K=Ee.find(le=>le.id===i.team_id)),K?s.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[s.jsxs("div",{className:"bg-gray-900 px-6 py-4 border-b border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:K.name}),s.jsxs("span",{className:"text-sm text-gray-400",children:["(",K.members.length," thnh vin)"]}),L&&s.jsxs("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 rounded-full text-xs font-medium",children:["Lc theo: ",ne.find(le=>le.id===L)?.name]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-sm text-gray-400",children:[K.totalTasks," cng vic"]}),L&&K.totalTasks>0&&s.jsx("span",{className:"text-xs text-blue-400",children:"( lc)"})]})]}),s.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[K.members.sort((le,ee)=>le.role==="team_leader"&&ee.role!=="team_leader"?-1:le.role!=="team_leader"&&ee.role==="team_leader"?1:le.name.localeCompare(ee.name)).map(le=>{const ee=L===le.id,be=K.taskGroups.reduce((ce,He)=>ce+He.tasks.filter(Ne=>Ne.assignedTo?.name===le.name||Ne.createdBy?.name===le.name).length,0);return s.jsxs("button",{"data-testid":"team-member-button",onClick:()=>Wa(le.id),className:`px-3 py-1 rounded-full text-xs font-medium transition-all duration-200 hover:scale-105 ${ee?"bg-blue-600 text-white ring-2 ring-blue-400":le.role==="team_leader"?"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30":"bg-gray-500/20 text-gray-400 hover:bg-gray-500/30"}`,title:`Click  lc cng vic ca ${le.name} (${be} cng vic)`,children:[le.name," ",le.role==="team_leader"&&"(Trng nhm)",be>0&&s.jsx("span",{className:`ml-1 px-1 py-0.5 rounded text-xs ${ee?"bg-white/20":"bg-black/20"}`,children:be})]},le.id)}),L&&s.jsx("button",{onClick:()=>I(null),className:"px-2 py-1 rounded-full text-xs font-medium bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-colors",title:"Xa b lc thnh vin",children:" B lc"})]})]}),s.jsx("div",{className:"p-6 space-y-4",children:K.taskGroups.length===0?s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"text-gray-400 text-sm",children:"Nhm ny cha c cng vic no"})}):(()=>{const le=K.taskGroups.flatMap(ee=>ee.tasks);return s.jsx("div",{className:"mobile-task-list",children:s.jsx("div",{children:le.map(ee=>{const be=T(ee);return s.jsxs("div",{className:`mobile-task-item group hover:bg-gray-700/30 transition-all duration-200 cursor-pointer relative ${be?"border-l-4 border-red-500 bg-red-500/5 hover:bg-red-500/10":""}`,onClick:()=>Ce(ee),children:[be&&s.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-xs text-red-400 font-medium",children:"Hm nay"})]}),s.jsx("div",{className:"hidden md:block w-full mb-3",children:s.jsx(Fi,{task:ee,onUpdateTask:me,compact:!1,maxWorkTypes:2})}),s.jsx("div",{className:"md:hidden w-full mb-3",children:s.jsx(Fi,{task:ee,onUpdateTask:me,compact:!0,maxWorkTypes:1})}),s.jsxs("div",{className:"mobile-task-content",children:[s.jsxs("div",{className:"hidden md:flex items-center w-full",children:[s.jsx("span",{className:"mobile-assignee",title:ee.assignedTo?.name||ee.createdBy?.name||"Cha giao",children:ee.assignedTo?.name||ee.createdBy?.name||"Cha giao"}),s.jsxs("h5",{className:"font-bold text-white group-hover:text-blue-300 transition-colors text-base min-w-0 flex-1 ml-8",title:ee.name,children:[ee.name,ee.description&&s.jsxs("span",{className:"text-gray-300 font-normal",children:[" - ",ee.description]})]})]}),s.jsxs("div",{className:"md:hidden w-full",children:[s.jsx("h5",{className:"mobile-task-title",title:ee.name,children:ee.name}),ee.description&&s.jsx("p",{className:"mobile-task-description",title:ee.description,children:ee.description}),s.jsxs("div",{className:"mobile-task-meta",children:[s.jsx(lo,{workTypes:ee.workTypes||[ee.workType],onChange:ce=>{console.log("WorkTypes changed:",ce),me({id:ee.id,workTypes:ce})},maxDisplay:2,className:"mobile-task-badge"}),s.jsx(co,{value:ee.status,onChange:ce=>me({id:ee.id,status:ce})}),s.jsx(io,{value:ee.priority,onChange:ce=>me({id:ee.id,priority:ce})}),s.jsx(oo,{value:ee.shareScope||"team",onChange:ce=>me({id:ee.id,shareScope:ce})}),s.jsx("span",{className:"mobile-assignee",title:ee.assignedTo?.name||ee.createdBy?.name||"Cha giao",children:ee.assignedTo?.name||ee.createdBy?.name||"Cha giao"}),s.jsx("span",{className:"text-xs text-gray-400 font-medium",children:(()=>{const ce=ee.startDate||ee.createdAt||ee.dueDate;if(ce){const He=Wi(ce);if(He)return Ji(He)}return"N/A"})()})]})]})]}),s.jsx("div",{className:"hidden md:block flex-shrink-0 text-xs text-gray-400 font-medium min-w-0",style:{width:"60px",textAlign:"right"},children:(()=>{const ce=ee.startDate||ee.createdAt||ee.dueDate;if(ce){const He=Wi(ce);if(He)return Ji(He)}return"N/A"})()}),s.jsx("div",{className:"hidden md:flex flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity duration-200 absolute right-4 top-1/2 -translate-y-1/2",children:s.jsx(pa,{task:ee,onEdit:ce=>{ce?.stopPropagation(),ue(ee.id)},onDelete:ce=>{ce?.stopPropagation(),pe(ee.id)},compact:!0})})]},ee.id)})})})})()})]},K.id):null})():Yi(i.role)?s.jsx("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-8 text-center",children:s.jsxs("div",{className:"text-gray-400",children:[s.jsx("div",{className:"mb-2",children:s.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),s.jsx("p",{className:"text-lg font-medium mb-1",children:"Vui lng chn mt nhm"}),s.jsx("p",{className:"text-sm",children:"Chn nhm t cc nt  trn  xem danh sch cng vic"})]})}):null:F.length===0?s.jsx("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-8 text-center",children:s.jsx("div",{className:"text-gray-400",children:H.length===0?"Khng c cng vic no":"Khng tm thy cng vic ph hp vi b lc"})}):s.jsx("div",{className:"mobile-task-list",children:s.jsx("div",{children:us.map(K=>{const le=T(K);return s.jsxs("div",{"data-testid":"task-item",className:`mobile-task-item mobile-touch-feedback mobile-optimized group hover:bg-gray-700/30 transition-all duration-200 cursor-pointer relative ${le?"border-l-4 border-red-500 bg-red-500/5 hover:bg-red-500/10":""}`,onClick:()=>Ce(K),children:[le&&s.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-xs text-red-400 font-medium",children:"Hm nay"})]}),s.jsx("div",{className:"hidden md:block w-full mb-3",children:s.jsx(Fi,{task:K,onUpdateTask:me,compact:!1,maxWorkTypes:2})}),s.jsx("div",{className:"md:hidden w-full mb-3",children:s.jsx(Fi,{task:K,onUpdateTask:me,compact:!0,maxWorkTypes:1})}),s.jsxs("div",{className:"mobile-task-content",children:[s.jsxs("div",{className:"hidden md:flex items-center w-full",children:[s.jsx("span",{className:"mobile-assignee",title:K.assignedTo?.name||K.createdBy?.name||"Cha giao",children:K.assignedTo?.name||K.createdBy?.name||"Cha giao"}),s.jsxs("h5",{className:"font-bold text-white group-hover:text-blue-300 transition-colors text-base min-w-0 flex-1 ml-8",title:K.name+(K.description?" - "+K.description:""),children:[K.name,K.description&&s.jsxs("span",{className:"text-gray-300 font-normal",children:[" - ",K.description.length>50?K.description.substring(0,50)+"...":K.description]})]})]}),s.jsxs("div",{className:"md:hidden w-full",children:[s.jsx("h5",{className:"mobile-task-title",title:K.name,children:K.name}),K.description&&s.jsx("p",{className:"mobile-task-description",title:K.description,children:K.description.length>80?K.description.substring(0,80)+"...":K.description}),s.jsxs("div",{className:"mobile-task-meta",children:[s.jsx(lo,{workTypes:K.workTypes||[K.workType],onChange:ee=>{console.log("WorkTypes changed:",ee),me({id:K.id,workTypes:ee})},maxDisplay:2,className:"mobile-task-badge"}),s.jsx(co,{value:K.status,onChange:ee=>me({id:K.id,status:ee})}),s.jsx(io,{value:K.priority,onChange:ee=>me({id:K.id,priority:ee})}),s.jsx(oo,{value:K.shareScope||"team",onChange:ee=>me({id:K.id,shareScope:ee})}),s.jsx("span",{className:"mobile-assignee",title:K.assignedTo?.name||K.createdBy?.name||"Cha giao",children:K.assignedTo?.name||K.createdBy?.name||"Cha giao"}),s.jsx("span",{className:"text-xs text-gray-400 font-medium",children:(()=>{const ee=K.startDate||K.createdAt||K.dueDate;if(ee){const be=Wi(ee);if(be)return Ji(be)}return"N/A"})()})]})]})]}),s.jsx("div",{className:"hidden md:block flex-shrink-0 text-xs text-gray-400 font-medium min-w-0",style:{width:"60px",textAlign:"right"},children:(()=>{const ee=K.startDate||K.createdAt||K.dueDate;if(ee){const be=Wi(ee);if(be)return Ji(be)}return"N/A"})()}),s.jsx("div",{className:"hidden md:flex flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity duration-200 absolute right-4 top-1/2 -translate-y-1/2",children:s.jsx(pa,{task:K,onEdit:ee=>{ee?.stopPropagation(),ue(K.id)},onDelete:ee=>{ee?.stopPropagation(),pe(K.id)},compact:!0})})]},K.id)})})})})]}),s.jsx(b1,{isOpen:p,onClose:()=>v(!1),onSubmit:re}),s.jsx(M1,{isOpen:j,onClose:()=>{N(!1),C(null)},onSubmit:me,task:E}),s.jsx(w1,{isOpen:S,onClose:()=>{_(!1),z(null)},onConfirm:mt,title:"Xa cng vic",message:"Bn c chc chn mun xa cng vic ny vnh vin?",itemName:G?.name}),s.jsx(G1,{isOpen:D,onClose:()=>{M(!1),C(null)},task:E,onEdit:Re,onDelete:tt,onUpdate:me})]})},Y1=({onLogout:l,className:a="",isCollapsed:n=!1})=>{const[i,c]=b.useState(!1),[u,h]=b.useState({top:0,left:0}),[g,m]=b.useState(null),x=b.useRef(null),p=b.useRef(null),j=(()=>{try{const E=localStorage.getItem("auth_user");return E?JSON.parse(E):{name:"Test User",email:"test@example.com",role:"employee",location:"H Ni"}}catch(E){return console.error(" Error getting user data:",E),{name:"Unknown User",email:"unknown@example.com",role:"employee",location:"H Ni"}}})();b.useEffect(()=>{const E=C=>{p.current&&!p.current.contains(C.target)&&c(!1)};if(i)return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[i]);const N=E=>{switch(E){case"retail_director":return"Gim c";case"team_leader":return"Trng nhm";case"employee":return"Nhn vin";default:return"Ngi dng"}},S=E=>E.split(" ").map(C=>C.charAt(0)).join("").toUpperCase().slice(0,2),_=()=>{if(!x.current)return;const E=x.current.getBoundingClientRect(),C=window.innerWidth,G=window.innerHeight,z=384,H=400;let O=E.bottom+8,X=E.left;n?(X=E.right+8,O=E.top):(O+H>G&&(O=E.top-H-8),X+z>C&&(X=C-z-16)),O<16&&(O=16),X<16&&(X=16),h({top:O,left:X})},D=E=>{E.preventDefault(),E.stopPropagation(),i||_(),c(!i)},M=E=>{E.preventDefault(),E.stopPropagation(),c(!1),setTimeout(()=>{l()},100)};return b.useEffect(()=>{const E=()=>{i&&_()};return window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[i,n]),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`relative ${a}`,ref:p,children:s.jsxs("button",{ref:x,onClick:D,className:`flex items-center gap-3 p-2 rounded-lg hover:bg-gray-700 transition-all duration-200 w-full ${n?"justify-center":""} ${i?"bg-gray-700 ring-2 ring-blue-500/50":""}`,title:n?j.name:void 0,"data-testid":"user-avatar-button",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:S(j.name)}),!n&&s.jsxs("div",{className:"text-left flex-1",children:[s.jsx("div",{className:"text-white font-medium text-sm",children:j.name}),s.jsx("div",{className:"text-gray-400 text-xs",children:N(j.role)})]})]})}),i&&kl.createPortal(s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-[9998] bg-black/30 backdrop-blur-sm animate-in fade-in duration-200",onClick:()=>c(!1),"data-testid":"user-avatar-backdrop"}),s.jsxs("div",{ref:p,className:"fixed w-96 max-w-[calc(100vw-2rem)] bg-gray-800/95 backdrop-blur-xl border border-gray-600/50 rounded-2xl shadow-2xl z-[9999] max-h-[85vh] overflow-hidden animate-in slide-in-from-top-2 fade-in duration-300",style:{top:`${u.top}px`,left:`${u.left}px`},"data-testid":"user-avatar-dropdown",children:[s.jsx("div",{className:"p-6 border-b border-gray-600/50",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative flex-shrink-0",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-lg",children:S(j.name)}),s.jsx("button",{onClick:E=>{E.preventDefault(),E.stopPropagation(),c(!1),m("avatar")},className:"absolute -bottom-1 -right-1 w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center hover:bg-blue-700 transition-all duration-200 shadow-lg hover:scale-110",title:"i avatar",children:s.jsx(Qa,{className:"w-3 h-3 text-white"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-white font-semibold text-lg truncate",children:j.name}),s.jsx("p",{className:"text-gray-400 text-sm truncate",children:j.email}),s.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[s.jsx("span",{className:"px-3 py-1 bg-blue-600/20 text-blue-400 rounded-full text-xs font-medium border border-blue-500/20",children:N(j.role)}),s.jsx("span",{className:"px-3 py-1 bg-green-600/20 text-green-400 rounded-full text-xs font-medium border border-green-500/20",children:j.location})]})]})]})}),s.jsxs("div",{className:"p-4 space-y-2",children:[s.jsxs("button",{onClick:E=>{E.preventDefault(),E.stopPropagation(),c(!1),m("password")},className:"w-full flex items-center gap-3 px-4 py-3 text-gray-300 hover:bg-gray-700/50 rounded-xl transition-all duration-200 hover:text-white group",children:[s.jsx(Dl,{className:"w-5 h-5 group-hover:text-yellow-400 transition-colors"}),s.jsx("span",{className:"font-medium",children:"i mt khu"})]}),s.jsxs("button",{onClick:E=>{E.preventDefault(),E.stopPropagation(),c(!1),m("email")},className:"w-full flex items-center gap-3 px-4 py-3 text-gray-300 hover:bg-gray-700/50 rounded-xl transition-all duration-200 hover:text-white group",children:[s.jsx(Cd,{className:"w-5 h-5 group-hover:text-green-400 transition-colors"}),s.jsx("span",{className:"font-medium",children:"i email"})]}),s.jsxs("button",{onClick:E=>{E.preventDefault(),E.stopPropagation(),c(!1),m("avatar")},className:"w-full flex items-center gap-3 px-4 py-3 text-gray-300 hover:bg-gray-700/50 rounded-xl transition-all duration-200 hover:text-white group",children:[s.jsx(Qa,{className:"w-5 h-5 group-hover:text-purple-400 transition-colors"}),s.jsx("span",{className:"font-medium",children:"i avatar"})]}),s.jsxs("button",{onClick:E=>{E.preventDefault(),E.stopPropagation(),alert(`Thng tin c nhn bao gm:

 H v tn
 Email
 S in thoi
 a ch
 Ngy sinh
 Gii tnh
 Phng ban
 Chc v
 Ngy vo lm
 Trng thi lm vic`),console.log("Profile info clicked")},className:"w-full flex items-center gap-3 px-4 py-3 text-gray-300 hover:bg-gray-700/50 rounded-xl transition-all duration-200 hover:text-white group",children:[s.jsx($s,{className:"w-5 h-5 group-hover:text-blue-400 transition-colors"}),s.jsx("span",{className:"font-medium",children:"Thng tin c nhn"})]}),s.jsx("div",{className:"border-t border-gray-600/50 my-3"}),s.jsxs("button",{onClick:M,className:"w-full flex items-center gap-3 px-4 py-3 text-red-400 hover:bg-red-600/20 hover:text-red-300 rounded-xl transition-all duration-200 group font-medium","data-testid":"logout-button",children:[s.jsx(Ax,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),s.jsx("span",{children:"ng xut"})]})]})]})]}),document.body),s.jsx($x,{isOpen:g==="password",onClose:()=>m(null),onSuccess:()=>{console.log("Password changed successfully")}}),s.jsx(zx,{isOpen:g==="email",onClose:()=>m(null),onSuccess:()=>{console.log("Email changed successfully")}}),s.jsx(qx,{isOpen:g==="avatar",onClose:()=>m(null),onSuccess:()=>{console.log("Avatar changed successfully"),window.location.reload()}})]})};function F1({activeTab:l,setActiveTab:a,sidebarOpen:n,setSidebarOpen:i,onLogout:c,isModalOpen:u=!1}){const[h,g]=b.useState(!1),[m,x]=b.useState(!1),[p,v]=b.useState(!1);b.useEffect(()=>{const M=E=>{E.clientX<=80&&m&&!u&&x(!1)};return document.addEventListener("mousemove",M,{passive:!0}),()=>{document.removeEventListener("mousemove",M)}},[m,u]);const j=()=>{v(!0),x(!1)},N=()=>{v(!1),!(u||h)&&x(!0)},S=(()=>{try{return Ge()}catch(M){return console.error(" YouTubeSidebar: Error getting current user:",M),{name:"Unknown User"}}})(),_=[{id:"home",label:"Trang Ch",icon:s.jsx(Dx,{className:"w-5 h-5"})},{id:"work",label:"Cng Vic",icon:s.jsx(Ex,{className:"w-5 h-5"})},{id:"plan",label:"K Hoch",icon:s.jsx(Bt,{className:"w-5 h-5"})},{id:"customers",label:"Khch Hng",icon:s.jsx(qt,{className:"w-5 h-5"})},...S.name==="Khng c Mnh"?[{id:"hr",label:"Nhn Vin",icon:s.jsx(I2,{className:"w-5 h-5"})}]:[]],D=(M,E)=>{const C=h||m;return s.jsxs("button",{onClick:()=>a(M.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${E?"bg-gray-700 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"} ${C?"justify-center":""}`,title:C?M.label:void 0,children:[s.jsx("span",{className:`${E?"text-white":"text-gray-400"} ${C?"":"mr-3"}`,children:M.icon}),!C&&M.label]},M.id)};return s.jsxs(s.Fragment,{children:[n&&s.jsx("div",{className:"fixed inset-0 z-40 lg:hidden",children:s.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>i(!1)})}),s.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 ${h||m?"w-16":"w-64"} bg-gray-800 shadow-lg transform ${n?"translate-x-0":"-translate-x-full"} transition-all duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0`,onMouseEnter:j,onMouseLeave:N,children:[s.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-700",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("button",{onClick:()=>g(!h),className:"hidden lg:block p-2 rounded-md text-gray-400 hover:text-gray-300 hover:bg-gray-700",children:s.jsx(T2,{className:"w-6 h-6"})}),!(h||m)&&s.jsx("img",{src:"/incanto-logo.svg",alt:"INCANTO",className:"h-8 w-auto ml-2"})]}),s.jsx("button",{onClick:()=>i(!1),className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-300 hover:bg-gray-700",children:s.jsx(et,{className:"w-6 h-6"})})]}),s.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:s.jsx("div",{className:"space-y-1",children:_.map(M=>D(M,l===M.id))})}),s.jsx("div",{className:"border-t border-gray-700 p-4",children:s.jsx(Y1,{onLogout:c,className:`w-full ${h||m?"flex justify-center":""}`,isCollapsed:h||m})})]})]})}function Rg(){const{user:l,logout:a}=ln(),n=ws(),{tab:i}=Pv(),[c,u]=b.useState("home"),[h,g]=b.useState(!1),[m,x]=b.useState(!1),[p,v]=b.useState(null),[j,N]=b.useState(!1),[S,_]=b.useState({period:"month"}),[D,M]=b.useState("personal"),[E,C]=b.useState("hanoi"),[G,z]=b.useState(""),[H,O]=b.useState("");b.useEffect(()=>{if(i&&["home","work","plan","customers","hr","settings"].includes(i))u(i);else if(!i){const I=localStorage.getItem("dashboard-active-tab");I&&["home","work","plan","customers","hr","settings"].includes(I)?(u(I),n(`/dashboard/${I}`,{replace:!0})):(u("home"),n("/dashboard/home",{replace:!0}))}},[i,n]),b.useEffect(()=>{console.log(" Initializing auto-move scheduler..."),J2.startAutoMoveScheduler(60)},[]),b.useEffect(()=>{X()},[S]);const X=async()=>{N(!0);try{const I=await a1(S);v(I),I.hanoi||I.hcm?M("locations"):I.team?M("team"):M("personal")}catch(I){console.error(" Error loading dashboard stats:",I)}finally{N(!1)}},ie=I=>{u(I),n(`/dashboard/${I}`,{replace:!0}),localStorage.setItem("dashboard-active-tab",I),g(!1)},Q=()=>{a()},J=I=>({home:"Trang Ch",work:"Cng Vic",plan:"K Hoch",customers:"Khch Hng",hr:"Qun L Nhn Vin",settings:"Ci t"})[I]||"Trang Ch",ne=()=>{const I=["personal"];return p?.team&&I.push("team"),(p?.hanoi||p?.hcm)&&I.push("locations"),I},je=()=>{if(!p)return{ktsNew:0,ktsOld:0,partnerNew:0,partnerOld:0,customerNew:0,customerOld:0,sbgNew:0,sbgOld:0,other:0};switch(D){case"locations":return E==="hanoi"?p.hanoi||p.personal:p.hcm||p.personal;case"team":return p.team||p.personal;case"personal":default:return p.personal}},se=()=>{switch(D){case"locations":return`Thng k ${E==="hanoi"?"H Ni":"H Ch Minh"}`;case"team":return"Thng k nhm";case"personal":default:return"Thng k c nhn"}},oe=(I,ae)=>{z(I),O(ae)},L=()=>!p?.teamMembers||!G?[]:p.teamMembers;return s.jsxs("div",{className:"flex h-screen bg-gray-900",children:[s.jsx(F1,{activeTab:c,setActiveTab:ie,sidebarOpen:h,setSidebarOpen:g,onLogout:Q,isModalOpen:m}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden lg:ml-0",children:[s.jsx("header",{className:"bg-gray-800 shadow-sm border-b border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between h-16 px-6",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("h1",{className:"text-2xl font-semibold text-white",children:J(c)})}),c==="home"&&s.jsx(Sg,{value:S,onChange:_,className:"hidden md:block"})]})}),s.jsxs("main",{className:"flex-1 overflow-y-auto bg-gray-900 p-6 pb-16 md:pb-6",children:[c==="home"&&s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"md:hidden",children:s.jsx(Sg,{value:S,onChange:_,className:"w-full"})}),s.jsx(EN,{activeTab:D,onTabChange:M,availableTabs:ne()}),D==="locations"?s.jsxs("div",{className:"space-y-6",children:[s.jsx(AN,{activeLocation:E,onLocationChange:C}),s.jsx(Vu,{stats:je(),title:se(),isLoading:j}),s.jsx(UN,{location:E==="hanoi"?"H Ni":"H Ch Minh",selectedTeamId:G,onTeamSelect:oe}),G&&H&&s.jsx(vg,{members:L(),teamName:H,isLoading:j})]}):D==="team"&&p?.teamMembers?s.jsxs("div",{className:"space-y-6",children:[s.jsx(Vu,{stats:je(),title:se(),isLoading:j}),s.jsx(vg,{members:p.teamMembers,teamName:l?.team?.name||"Nhm ca bn",isLoading:j})]}):s.jsx(Vu,{stats:je(),title:se(),isLoading:j}),s.jsxs("div",{className:"hidden",children:[s.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Thng k chi tit (Legacy)"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-300 uppercase tracking-wider",children:"KTS C NHN"}),s.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"})]}),s.jsxs("div",{className:"flex items-baseline space-x-2 mb-2",children:[s.jsx("span",{className:"text-3xl font-bold text-white",children:Ye.categoryStats.architects.total}),s.jsxs("span",{className:"text-sm text-gray-400",children:["Trc: ",Ye.categoryStats.architects.existing]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx("span",{className:"text-xs text-green-400",children:" 0%"}),s.jsx("span",{className:"text-xs text-gray-400",children:"vs k hoch"})]}),s.jsxs("div",{className:"h-8 flex items-end space-x-1",children:[s.jsx("div",{className:"w-2 bg-blue-400 h-4 rounded-sm"}),s.jsx("div",{className:"w-2 bg-blue-400 h-5 rounded-sm"}),s.jsx("div",{className:"w-2 bg-blue-400 h-6 rounded-sm"}),s.jsx("div",{className:"w-2 bg-blue-400 h-7 rounded-sm"}),s.jsx("div",{className:"w-2 bg-blue-400 h-8 rounded-sm"})]}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[s.jsxs("span",{children:["Mi: ",Ye.categoryStats.architects.new]}),s.jsxs("span",{children:["C: ",Ye.categoryStats.architects.existing]})]})]}),s.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-300 uppercase tracking-wider",children:"I TC C NHN"}),s.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"})]}),s.jsxs("div",{className:"flex items-baseline space-x-2 mb-2",children:[s.jsx("span",{className:"text-3xl font-bold text-white",children:Ye.categoryStats.partners.total}),s.jsxs("span",{className:"text-sm text-gray-400",children:["Trc: ",Ye.categoryStats.partners.existing]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx("span",{className:"text-xs text-green-400",children:" 0%"}),s.jsx("span",{className:"text-xs text-gray-400",children:"vs k hoch"})]}),s.jsxs("div",{className:"h-8 flex items-end space-x-1",children:[s.jsx("div",{className:"w-2 bg-blue-400 h-3 rounded-sm"}),s.jsx("div",{className:"w-2 bg-blue-400 h-4 rounded-sm"}),s.jsx("div",{className:"w-2 bg-blue-400 h-6 rounded-sm"}),s.jsx("div",{className:"w-2 bg-blue-400 h-7 rounded-sm"}),s.jsx("div",{className:"w-2 bg-blue-400 h-8 rounded-sm"})]}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[s.jsxs("span",{children:["Mi: ",Ye.categoryStats.partners.new]}),s.jsxs("span",{children:["C: ",Ye.categoryStats.partners.existing]})]})]}),s.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-300 uppercase tracking-wider",children:"KHCH HNG C NHN"}),s.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"})]}),s.jsxs("div",{className:"flex items-baseline space-x-2 mb-2",children:[s.jsx("span",{className:"text-3xl font-bold text-white",children:Ye.categoryStats.customers.total}),s.jsxs("span",{className:"text-sm text-gray-400",children:["Trc: ",Ye.categoryStats.customers.existing]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx("span",{className:"text-xs text-green-400",children:" 0%"}),s.jsx("span",{className:"text-xs text-gray-400",children:"vs k hoch"})]}),s.jsxs("div",{className:"h-8 flex items-end space-x-1",children:[s.jsx("div",{className:"w-2 bg-blue-400 h-5 rounded-sm"}),s.jsx("div",{className:"w-2 bg-blue-400 h-6 rounded-sm"}),s.jsx("div",{className:"w-2 bg-blue-400 h-7 rounded-sm"}),s.jsx("div",{className:"w-2 bg-blue-400 h-8 rounded-sm"}),s.jsx("div",{className:"w-2 bg-blue-400 h-8 rounded-sm"})]}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[s.jsxs("span",{children:["Mi: ",Ye.categoryStats.customers.new]}),s.jsxs("span",{children:["C: ",Ye.categoryStats.customers.existing]})]})]}),s.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-300 uppercase tracking-wider",children:"BO GI C NHN"}),s.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"})]}),s.jsxs("div",{className:"flex items-baseline space-x-2 mb-2",children:[s.jsx("span",{className:"text-3xl font-bold text-white",children:Ye.categoryStats.quotes.total}),s.jsxs("span",{className:"text-sm text-gray-400",children:["Trc: ",Ye.categoryStats.quotes.existing]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx("span",{className:"text-xs text-green-400",children:" 0%"}),s.jsx("span",{className:"text-xs text-gray-400",children:"vs k hoch"})]}),s.jsxs("div",{className:"h-8 flex items-end space-x-1",children:[s.jsx("div",{className:"w-2 bg-blue-400 h-4 rounded-sm"}),s.jsx("div",{className:"w-2 bg-blue-400 h-5 rounded-sm"}),s.jsx("div",{className:"w-2 bg-blue-400 h-6 rounded-sm"}),s.jsx("div",{className:"w-2 bg-blue-400 h-7 rounded-sm"}),s.jsx("div",{className:"w-2 bg-blue-400 h-8 rounded-sm"})]}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[s.jsxs("span",{children:["Mi: ",Ye.categoryStats.quotes.new]}),s.jsxs("span",{children:["C: ",Ye.categoryStats.quotes.existing]})]})]}),s.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-300 uppercase tracking-wider",children:"CNG VIC KHC C NHN"}),s.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"})]}),s.jsxs("div",{className:"flex items-baseline space-x-2 mb-2",children:[s.jsx("span",{className:"text-3xl font-bold text-white",children:Ye.categoryStats.otherTasks}),s.jsx("span",{className:"text-sm text-gray-400",children:"Trc: 0"})]}),s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx("span",{className:"text-xs text-green-400",children:" 0%"}),s.jsx("span",{className:"text-xs text-gray-400",children:"vs k hoch"})]}),s.jsxs("div",{className:"h-8 flex items-end space-x-1",children:[s.jsx("div",{className:"w-2 bg-blue-400 h-3 rounded-sm"}),s.jsx("div",{className:"w-2 bg-blue-400 h-4 rounded-sm"}),s.jsx("div",{className:"w-2 bg-blue-400 h-5 rounded-sm"}),s.jsx("div",{className:"w-2 bg-blue-400 h-6 rounded-sm"}),s.jsx("div",{className:"w-2 bg-blue-400 h-8 rounded-sm"})]}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[s.jsxs("span",{children:["Mi: ",Math.floor(Ye.categoryStats.otherTasks*.3)]}),s.jsxs("span",{children:["C: ",Math.floor(Ye.categoryStats.otherTasks*.7)]})]})]}),s.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-300 uppercase tracking-wider",children:"DOANH S C NHN"}),s.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full"})]}),s.jsxs("div",{className:"flex items-baseline space-x-2 mb-2",children:[s.jsx("span",{className:"text-3xl font-bold text-white",children:"0"}),s.jsx("span",{className:"text-sm text-orange-400",children:"VN"}),s.jsx("span",{className:"text-sm text-gray-400",children:"Trc: 0 VN"})]}),s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx("span",{className:"text-xs text-green-400",children:" 0%"}),s.jsx("span",{className:"text-xs text-gray-400",children:"vs k hoch"})]}),s.jsxs("div",{className:"h-8 flex items-end space-x-1",children:[s.jsx("div",{className:"w-2 bg-orange-400 h-2 rounded-sm"}),s.jsx("div",{className:"w-2 bg-orange-400 h-3 rounded-sm"}),s.jsx("div",{className:"w-2 bg-orange-400 h-4 rounded-sm"}),s.jsx("div",{className:"w-2 bg-orange-400 h-5 rounded-sm"}),s.jsx("div",{className:"w-2 bg-orange-400 h-6 rounded-sm"})]}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[s.jsx("span",{children:"Mi: 0"}),s.jsx("span",{children:"C: 0"})]})]})]})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Tng quan h thng"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-slate-600 via-slate-700 to-slate-800 p-6 h-64 group hover:scale-105 transition-transform duration-300",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/20 to-purple-600/20"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-xs text-gray-300 uppercase tracking-wider mb-2",children:"TASK MANAGEMENT"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"TNG CNG VIC"}),s.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:Ye.managerStats.totalTasks}),s.jsx("div",{className:"text-sm text-gray-300",children:"Cng vic"})]}),s.jsx("div",{className:"absolute bottom-4 right-4 w-16 h-16 bg-blue-500/20 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-green-400 rounded-full"})]}),s.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-indigo-600 via-purple-700 to-pink-600 p-6 h-64 group hover:scale-105 transition-transform duration-300",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/30 to-pink-500/30"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-xs text-purple-200 uppercase tracking-wider mb-2",children:"COMPLETED"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"HON THNH"}),s.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:Ye.managerStats.completedTasks}),s.jsx("div",{className:"text-sm text-purple-200",children:"Cng vic"})]}),s.jsx("div",{className:"absolute bottom-4 right-4 w-16 h-16 bg-pink-500/20 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-pink-400 rounded-full"})]}),s.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-emerald-600 via-teal-700 to-cyan-800 p-6 h-64 group hover:scale-105 transition-transform duration-300",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/20 to-cyan-500/20"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-xs text-emerald-200 uppercase tracking-wider mb-2",children:"COMPLETION RATE"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"T L HON THNH"}),s.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:F2(Ye.managerStats.completionRate)}),s.jsx("div",{className:"text-sm text-emerald-200",children:"Hiu sut"})]}),s.jsx("div",{className:"absolute bottom-4 right-4 w-16 h-16 bg-emerald-500/20 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-emerald-400 rounded-full"})]}),s.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-amber-600 via-orange-700 to-red-700 p-6 h-64 group hover:scale-105 transition-transform duration-300",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/20 to-orange-500/20"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-xs text-amber-200 uppercase tracking-wider mb-2",children:"HANOI REVENUE"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"DOANH S H NI"}),s.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:_g(Ye.managerStats.hanoiRevenue)}),s.jsx("div",{className:"text-sm text-amber-200",children:"Doanh thu"})]}),s.jsx("div",{className:"absolute bottom-4 right-4 w-16 h-16 bg-amber-500/20 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-amber-400 rounded-full"})]}),s.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-rose-600 via-pink-700 to-purple-700 p-6 h-64 group hover:scale-105 transition-transform duration-300",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-rose-500/20 to-purple-500/20"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-xs text-rose-200 uppercase tracking-wider mb-2",children:"HCM REVENUE"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"DOANH S HCM"}),s.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:_g(Ye.managerStats.hcmRevenue)}),s.jsx("div",{className:"text-sm text-rose-200",children:"Doanh thu"})]}),s.jsx("div",{className:"absolute bottom-4 right-4 w-16 h-16 bg-rose-500/20 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-rose-400 rounded-full"})]}),s.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-violet-600 via-purple-700 to-indigo-700 p-6 h-64 group hover:scale-105 transition-transform duration-300",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-500/20 to-indigo-500/20"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-xs text-violet-200 uppercase tracking-wider mb-2",children:"TEAM"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"PERFORMANCE"}),s.jsxs("div",{className:"text-sm text-violet-200 mb-4",children:[Ye.teamStats.totalMembers," Members"]})]}),s.jsx("div",{className:"absolute bottom-4 right-4 w-16 h-16 bg-violet-500/20 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-violet-400 rounded-full"})]})]})]})]}),c==="work"&&s.jsx("div",{className:"space-y-8",children:s.jsx(Q1,{userRole:l?.role==="retail_director"?"manager":"employee",currentUser:l?.name||"Unknown User",onModalStateChange:x})}),c==="plan"&&s.jsx(u1,{}),c==="customers"&&s.jsx("div",{className:"space-y-8",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-sm p-8 text-center border border-gray-700",children:[s.jsx("div",{className:"w-16 h-16 bg-purple-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),s.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Qun l Khch Hng"}),s.jsx("p",{className:"text-gray-400",children:"Tnh nng qun l khch hng ang c pht trin."})]})}),c==="hr"&&s.jsx("div",{className:"space-y-8",children:s.jsx(Bx,{})}),c==="settings"&&s.jsx("div",{className:"space-y-8",children:s.jsx(x1,{onLogout:Q})})]})]}),s.jsx(g1,{activeTab:c,onTabChange:ie,isModalOpen:m,onLogout:Q})]})}const X1=()=>{const[l,a]=b.useState(["sbg-new"]);return s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:s.jsx(on,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Dropdown Loi Cng Vic - Ti u Mobile"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Badge/Tag design vi responsive layout"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(po,{label:"Chn loi cng vic",value:l,onChange:a,placeholder:"Chn mt hoc nhiu loi cng vic",required:!0}),s.jsx("div",{className:"bg-gray-700/50 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(j2,{className:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-white",children:"Tnh nng ti u:"}),s.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Badge/Tag design:"})," n gin, d nhn din"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Responsive grid:"})," 2-3-4 ct ty mn hnh"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Touch-friendly:"})," Min 44px height cho mobile"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Smart truncation:"})," Hin th ti a 3 badges + counter"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Kha cun mnh m:"})," Prevent tt c scroll events"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Mobile optimized:"})," 90vh height trn mobile"]})]})]})]})}),l.length>0&&s.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-4",children:[s.jsxs("h4",{className:"font-medium text-green-400 mb-2",children:[" chn (",l.length,"):"]}),s.jsx("div",{className:"text-sm text-gray-300",children:s.jsx("code",{className:"bg-gray-700 px-2 py-1 rounded text-green-400",children:JSON.stringify(l,null,2)})})]})]})]})},Z1=()=>{const[l,a]=b.useState([]);return s.jsx("div",{className:"min-h-screen bg-gray-900 p-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-8",children:"WorkType Dropdown - Ti u Mobile"}),s.jsxs("div",{className:"space-y-8 mb-8",children:[s.jsx(X1,{}),s.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-4",children:" Mobile Responsive Design"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("div",{className:"text-sm font-medium text-white",children:"Mobile"}),s.jsx("div",{className:"text-xs text-gray-400",children:"Di 640px"}),s.jsx("div",{className:"text-xs text-green-400",children:"2 ct grid"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("div",{className:"text-sm font-medium text-white",children:"Tablet"}),s.jsx("div",{className:"text-xs text-gray-400",children:"640px - 1024px"}),s.jsx("div",{className:"text-xs text-green-400",children:"3 ct grid"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("div",{className:"text-sm font-medium text-white",children:"Desktop"}),s.jsx("div",{className:"text-xs text-gray-400",children:"Trn 1024px"}),s.jsx("div",{className:"text-xs text-green-400",children:"4 ct grid"})]})]}),s.jsx("p",{className:"text-sm text-gray-300",children:"S dng Developer Tools (F12)  Device Toolbar (Ctrl+Shift+M)  test responsive design"})]}),s.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg border border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Test Th Cng"}),s.jsx(po,{label:"Loi cng vic",value:l,onChange:a,placeholder:"Chn loi cng vic",required:!0}),s.jsxs("div",{className:"mt-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Selected Values:"}),s.jsx("pre",{className:"bg-gray-700 p-3 rounded text-green-400 text-xs overflow-x-auto",children:JSON.stringify(l,null,2)})]})]})]}),s.jsxs("div",{className:"mt-8 space-y-6",children:[s.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:" Hng Dn Test"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-blue-400 mb-3",children:"Test 1: Kha Cun Trang"}),s.jsxs("ol",{className:"text-gray-300 space-y-2 text-sm",children:[s.jsx("li",{children:"1. Cun trang xung mt cht"}),s.jsx("li",{children:"2. M dropdown loi cng vic"}),s.jsx("li",{children:"3. Th cun bng:"}),s.jsx("li",{className:"ml-4",children:" Scroll wheel chut"}),s.jsx("li",{className:"ml-4",children:" Phm mi tn "}),s.jsx("li",{className:"ml-4",children:" Page Up/Down"}),s.jsx("li",{className:"ml-4",children:" Spacebar"}),s.jsx("li",{children:"4.  Trang khng c cun"}),s.jsx("li",{children:"5. ng dropdown"}),s.jsx("li",{children:"6.  Cun hot ng bnh thng"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-green-400 mb-3",children:"Test 2: Badge Design & Mobile"}),s.jsxs("ol",{className:"text-gray-300 space-y-2 text-sm",children:[s.jsx("li",{children:"1. M dropdown loi cng vic"}),s.jsx("li",{children:"2.  Badge/tag design n gin"}),s.jsx("li",{children:"3.  Responsive grid:"}),s.jsx("li",{className:"ml-4",children:" Mobile: 2-3 ct"}),s.jsx("li",{className:"ml-4",children:" Desktop: 4 ct"}),s.jsx("li",{children:"4.  Touch-friendly (min 44px)"}),s.jsx("li",{children:"5.  Selected badges truncation"}),s.jsx("li",{children:"6.  Smooth animations"}),s.jsx("li",{children:"7.  Mobile height: 90vh"})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Ni Dung Test Cun Trang"}),s.jsx("p",{className:"text-gray-400",children:"S dng ni dung di y  test tnh nng kha cun trang:"}),Array.from({length:25},(n,i)=>s.jsxs("div",{className:"bg-gray-700 p-4 rounded text-white",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{children:[" Ni dung test scroll #",i+1]}),s.jsxs("span",{className:"text-gray-400 text-sm",children:["Line ",i+1,"/25"]})]}),s.jsx("p",{className:"text-gray-300 text-sm mt-2",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."})]},i))]})]})]})})},J1=()=>{const l=n=>{console.log("Edit clicked!",n),alert("Nt Sa  c click!")},a=n=>{console.log("Delete clicked!",n),alert("Nt Xa  c click!")};return s.jsx("div",{className:"min-h-screen bg-gray-900 p-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-8",children:"TaskActions Demo"}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-white",children:"Compact Mode (nh trong TaskList)"}),s.jsx("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:s.jsxs("p",{className:"text-blue-300 text-sm",children:[" ",s.jsx("strong",{children:"Hng dn:"}),s.jsx("br",{})," ",s.jsx("strong",{children:"Desktop:"})," Di chuyn chut vo task  thy 2 nt Sa/Xa xut hin",s.jsx("br",{})," ",s.jsx("strong",{children:"Mobile/Tablet:"})," Tap vo task  m chi tit, 2 nt Sa/Xa c trong modal (tit kim khng gian)"]})}),s.jsx("div",{className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:s.jsxs("div",{className:"group flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 px-3 sm:px-4 lg:px-6 py-3 hover:bg-gray-700/30 transition-all duration-200 cursor-pointer relative border-b border-gray-700/50",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"hidden md:flex items-center w-full",children:[s.jsx("span",{className:"text-gray-200 text-sm font-medium min-w-0 flex-shrink-0",style:{width:"180px"},children:"Nguyn Vn A"}),s.jsxs("h5",{className:"font-medium text-white group-hover:text-blue-300 transition-colors text-sm min-w-0 flex-1 ml-8",children:["To campaign Facebook cho sn phm mi",s.jsxs("span",{className:"text-gray-300 font-normal",children:[" - ","Thit k creative v setup targeting cho chin dch qung co"]})]})]}),s.jsxs("div",{className:"md:hidden w-full space-y-1",children:[s.jsxs("div",{className:"flex items-center w-full",children:[s.jsx("span",{className:"text-gray-200 text-base font-medium truncate",children:"Nguyn Vn A"}),s.jsx("div",{className:"flex-1"}),s.jsx("span",{className:"text-xs text-gray-400 font-medium",style:{marginLeft:"auto",paddingLeft:"16px"},children:"Hm nay"})]}),s.jsx("h5",{className:"font-bold text-white text-sm leading-tight",children:"To campaign Facebook cho sn phm mi"}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"Thit k creative v setup targeting cho chin dch qung co"})]})]}),s.jsx("div",{className:"hidden md:block flex-shrink-0 text-xs text-gray-400 font-medium min-w-0",style:{width:"60px",textAlign:"right"},children:"Hm nay"}),s.jsx("div",{className:"hidden md:flex flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity duration-200 absolute right-4 top-1/2 -translate-y-1/2",children:s.jsx(pa,{onEdit:l,onDelete:a,compact:!0})})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-white",children:"Standalone Modes"}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Compact Mode"}),s.jsx(pa,{onEdit:l,onDelete:a,compact:!0})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Default Mode"}),s.jsx(pa,{onEdit:l,onDelete:a,compact:!1})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-white",children:"Mobile/Tablet UX - Space Optimized"}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Tit Kim Khng Gian"}),s.jsxs("div",{className:"space-y-3 text-gray-300 text-sm",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-green-400",children:""}),s.jsxs("span",{children:[s.jsx("strong",{children:"n 2 nt Sa/Xa"})," - Tit kim khng gian mn hnh"]})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-green-400",children:""}),s.jsxs("span",{children:[s.jsx("strong",{children:"Tap  m chi tit"})," - Ton b task area c th tap"]})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-green-400",children:""}),s.jsxs("span",{children:[s.jsx("strong",{children:"Actions trong modal"})," - 2 nt Sa/Xa c trong TaskDetailModal"]})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-green-400",children:""}),s.jsxs("span",{children:[s.jsx("strong",{children:"Clean interface"})," - Giao din gn gng, tp trung vo ni dung"]})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-white",children:"Background Tests"}),s.jsxs("div",{className:"bg-blue-900/20 rounded-lg p-6",children:[s.jsx("h3",{className:"text-white mb-2",children:"On Blue Background"}),s.jsx(pa,{onEdit:l,onDelete:a,compact:!0})]}),s.jsxs("div",{className:"bg-gray-700 rounded-lg p-6",children:[s.jsx("h3",{className:"text-white mb-2",children:"On Dark Gray Background"}),s.jsx(pa,{onEdit:l,onDelete:a,compact:!0})]}),s.jsxs("div",{className:"bg-gray-600 rounded-lg p-6",children:[s.jsx("h3",{className:"text-white mb-2",children:"On Light Gray Background"}),s.jsx(pa,{onEdit:l,onDelete:a,compact:!0})]})]})]})]})})};function W1(){return s.jsxs(ab,{children:[s.jsx(Nt,{path:"/auth/region-selection",element:s.jsx(xs,{requireAuth:!1,children:s.jsx(wN,{})})}),s.jsx(Nt,{path:"/auth/director-login",element:s.jsx(xs,{requireAuth:!1,children:s.jsx(jN,{})})}),s.jsx(Nt,{path:"/auth/team-selection",element:s.jsx(xs,{requireAuth:!1,children:s.jsx(NN,{})})}),s.jsx(Nt,{path:"/auth/user-selection",element:s.jsx(xs,{requireAuth:!1,children:s.jsx(bN,{})})}),s.jsx(Nt,{path:"/auth/password",element:s.jsx(xs,{requireAuth:!1,children:s.jsx(vN,{})})}),s.jsx(Nt,{path:"/auth/change-password",element:s.jsx(xs,{requireAuth:!1,children:s.jsx(SN,{})})}),s.jsx(Nt,{path:"/dashboard",element:s.jsx(xs,{requireAuth:!0,children:s.jsx(Rg,{})})}),s.jsx(Nt,{path:"/dashboard/:tab",element:s.jsx(xs,{requireAuth:!0,children:s.jsx(Rg,{})})}),s.jsx(Nt,{path:"/test/dropdown",element:s.jsx(xs,{requireAuth:!1,children:s.jsx(Z1,{})})}),s.jsx(Nt,{path:"/test/task-actions",element:s.jsx(xs,{requireAuth:!1,children:s.jsx(J1,{})})}),s.jsx(Nt,{path:"/",element:s.jsx(fl,{to:"/auth/region-selection",replace:!0})}),s.jsx(Nt,{path:"/auth",element:s.jsx(fl,{to:"/auth/region-selection",replace:!0})}),s.jsx(Nt,{path:"/auth/login",element:s.jsx(fl,{to:"/auth/region-selection",replace:!0})}),s.jsx(Nt,{path:"*",element:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"404"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Trang khng tm thy"}),s.jsx("a",{href:"/auth/region-selection",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"V trang chn khu vc"})]})})})]})}const eS=new nw({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}});function tS(){return s.jsx(yN,{children:s.jsx(iw,{client:eS,children:s.jsx(Tb,{children:s.jsx(pN,{children:s.jsx(gN,{children:s.jsx(W1,{})})})})})})}class Md{constructor(){this.intervalId=null,this.isRunning=!1,this.CHECK_INTERVAL=60*1e3,this.DAILY_CHECK_HOUR=0,this.lastDailyCheck=null}start(){if(this.isRunning){console.log("Scheduled tasks job is already running");return}console.log("Starting scheduled tasks background job..."),this.isRunning=!0,this.runDailyCheck(),this.intervalId=setInterval(()=>{this.checkAndRunDailyJob()},this.CHECK_INTERVAL),console.log(`Scheduled tasks job started. Checking every ${this.CHECK_INTERVAL/1e3} seconds.`)}stop(){if(!this.isRunning){console.log("Scheduled tasks job is not running");return}this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.isRunning=!1,console.log("Scheduled tasks background job stopped")}checkAndRunDailyJob(){const a=new Date,n=a.toISOString().split("T")[0];(a.getHours()===this.DAILY_CHECK_HOUR&&this.lastDailyCheck!==n||this.lastDailyCheck===null)&&this.runDailyCheck()}async runDailyCheck(){try{console.log("Running daily scheduled tasks check..."),console.log("  Scheduled tasks feature temporarily disabled - database migration pending"),this.lastDailyCheck=new Date().toISOString().split("T")[0]}catch(a){console.error("Error in daily scheduled tasks check:",a)}}notifyTasksMoved(a){"Notification"in window&&Notification.permission==="granted"&&new Notification("Cng vic  ln lch",{body:`${a.length} cng vic  c thm vo danh sch hm nay`,icon:"/favicon.ico"})}async requestNotificationPermission(){return"Notification"in window?Notification.permission==="granted"?!0:Notification.permission!=="denied"?await Notification.requestPermission()==="granted":!1:(console.log("This browser does not support notifications"),!1)}async triggerManualCheck(){console.log("Manually triggering scheduled tasks check..."),await this.runDailyCheck()}getStatus(){const a=new Date,n=new Date(a);return n.setDate(n.getDate()+1),n.setHours(0,0,0,0),{isRunning:this.isRunning,lastCheck:this.lastDailyCheck,nextCheck:n.toISOString()}}static initialize(){const a=new Md;return a.requestNotificationPermission(),a.start(),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&a.checkAndRunDailyJob()}),window.addEventListener("beforeunload",()=>{a.stop()}),a}}Md.initialize();const Kx=document.getElementById("root");if(!Kx)throw new Error("Root element not found");const sS=hv.createRoot(Kx);sS.render(s.jsx(b.StrictMode,{children:s.jsx(tS,{})}));
//# sourceMappingURL=index-B7NqAV4e.js.map
